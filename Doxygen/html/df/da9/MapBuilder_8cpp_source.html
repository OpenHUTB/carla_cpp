<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="zh">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.10.0"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>CARLA: MapBuilder.cpp 源文件</title>
<link href="../../tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../jquery.js"></script>
<script type="text/javascript" src="../../dynsections.js"></script>
<script type="text/javascript" src="../../clipboard.js"></script>
<script type="text/javascript" src="../../cookie.js"></script>
<link href="../../search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="../../search/searchdata.js"></script>
<script type="text/javascript" src="../../search/search.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
  $(function() { init_search(); });
/* @license-end */
</script>
<link href="../../doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectalign">
   <div id="projectname">CARLA
   </div>
  </td>
    <td>        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <span id="MSearchSelect"                onmouseover="return searchBox.OnSearchSelectShow()"                onmouseout="return searchBox.OnSearchSelectHide()">&#160;</span>
          <input type="text" id="MSearchField" value="" placeholder="搜索" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="../../search/close.svg" alt=""/></a>
          </span>
        </div>
</td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- 制作者 Doxygen 1.10.0 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "../../search/",'.html');
/* @license-end */
</script>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">载入中...</div>
<div class="SRStatus" id="Searching">搜索中...</div>
<div class="SRStatus" id="NoMatches">未找到</div>
</div>
</div>
</div>
</div>

<div id="nav-path" class="navpath">
  <ul>
<li class="navelem"><a class="el" href="../../dir_1604d568fa4d964dfa9079b701bbfa07.html">LibCarla</a></li><li class="navelem"><a class="el" href="../../dir_b9166249188ce33115fd7d5eed1849f2.html">source</a></li><li class="navelem"><a class="el" href="../../dir_b14cdd661f9a7048a44f1771cd402401.html">carla</a></li><li class="navelem"><a class="el" href="../../dir_8afc3b5d71d319c27bc8bd38d925daae.html">road</a></li>  </ul>
</div>
</div><!-- top -->
<div class="header">
  <div class="headertitle"><div class="title">MapBuilder.cpp</div></div>
</div><!--header-->
<div class="contents">
<a href="../../df/da9/MapBuilder_8cpp.html">浏览该文件的文档.</a><div class="fragment"><div class="line"><a id="l00001" name="l00001"></a><span class="lineno">    1</span><span class="comment">// Copyright (c) 2017 Computer Vision Center (CVC) at the Universitat Autonoma</span></div>
<div class="line"><a id="l00002" name="l00002"></a><span class="lineno">    2</span><span class="comment">// de Barcelona (UAB).</span></div>
<div class="line"><a id="l00003" name="l00003"></a><span class="lineno">    3</span><span class="comment">//</span></div>
<div class="line"><a id="l00004" name="l00004"></a><span class="lineno">    4</span><span class="comment">// This work is licensed under the terms of the MIT license.</span></div>
<div class="line"><a id="l00005" name="l00005"></a><span class="lineno">    5</span><span class="comment">// For a copy, see &lt;https://opensource.org/licenses/MIT&gt;.</span></div>
<div class="line"><a id="l00006" name="l00006"></a><span class="lineno">    6</span> </div>
<div class="line"><a id="l00007" name="l00007"></a><span class="lineno">    7</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d69/StringUtil_8h.html">carla/StringUtil.h</a>&quot;</span> <span class="comment">// 引入字符串工具库</span></div>
<div class="line"><a id="l00008" name="l00008"></a><span class="lineno">    8</span><span class="preprocessor">#include &quot;<a class="code" href="../../de/d3b/MapBuilder_8h.html">carla/road/MapBuilder.h</a>&quot;</span> <span class="comment">// 引入地图构建器</span></div>
<div class="line"><a id="l00009" name="l00009"></a><span class="lineno">    9</span><span class="preprocessor">#include &quot;<a class="code" href="../../d7/d90/RoadInfoElevation_8h.html">carla/road/element/RoadInfoElevation.h</a>&quot;</span> <span class="comment">// 引入道路高度信息类</span></div>
<div class="line"><a id="l00010" name="l00010"></a><span class="lineno">   10</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/d8e/RoadInfoGeometry_8h.html">carla/road/element/RoadInfoGeometry.h</a>&quot;</span> <span class="comment">// 引入道路几何信息类</span></div>
<div class="line"><a id="l00011" name="l00011"></a><span class="lineno">   11</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d4c/RoadInfoLaneAccess_8h.html">carla/road/element/RoadInfoLaneAccess.h</a>&quot;</span> <span class="comment">// 引入车道访问信息类</span></div>
<div class="line"><a id="l00012" name="l00012"></a><span class="lineno">   12</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/dfa/RoadInfoLaneBorder_8h.html">carla/road/element/RoadInfoLaneBorder.h</a>&quot;</span> <span class="comment">// 引入车道边界信息类</span></div>
<div class="line"><a id="l00013" name="l00013"></a><span class="lineno">   13</span><span class="preprocessor">#include &quot;<a class="code" href="../../dc/d17/RoadInfoLaneHeight_8h.html">carla/road/element/RoadInfoLaneHeight.h</a>&quot;</span> <span class="comment">// 引入车道高度信息类</span></div>
<div class="line"><a id="l00014" name="l00014"></a><span class="lineno">   14</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/db2/RoadInfoLaneMaterial_8h.html">carla/road/element/RoadInfoLaneMaterial.h</a>&quot;</span> <span class="comment">// 引入车道材料信息类</span></div>
<div class="line"><a id="l00015" name="l00015"></a><span class="lineno">   15</span><span class="preprocessor">#include &quot;<a class="code" href="../../db/d26/RoadInfoLaneOffset_8h.html">carla/road/element/RoadInfoLaneOffset.h</a>&quot;</span> <span class="comment">// 引入车道偏移信息类</span></div>
<div class="line"><a id="l00016" name="l00016"></a><span class="lineno">   16</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d14/RoadInfoLaneRule_8h.html">carla/road/element/RoadInfoLaneRule.h</a>&quot;</span> <span class="comment">// 引入车道规则信息类</span></div>
<div class="line"><a id="l00017" name="l00017"></a><span class="lineno">   17</span><span class="preprocessor">#include &quot;<a class="code" href="../../d5/d30/RoadInfoLaneVisibility_8h.html">carla/road/element/RoadInfoLaneVisibility.h</a>&quot;</span> <span class="comment">// 引入车道可见性信息类</span></div>
<div class="line"><a id="l00018" name="l00018"></a><span class="lineno">   18</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d16/RoadInfoLaneWidth_8h.html">carla/road/element/RoadInfoLaneWidth.h</a>&quot;</span> <span class="comment">// 引入车道宽度信息类</span></div>
<div class="line"><a id="l00019" name="l00019"></a><span class="lineno">   19</span><span class="preprocessor">#include &quot;<a class="code" href="../../dd/d32/RoadInfoMarkRecord_8h.html">carla/road/element/RoadInfoMarkRecord.h</a>&quot;</span> <span class="comment">// 引入道路标记记录类</span></div>
<div class="line"><a id="l00020" name="l00020"></a><span class="lineno">   20</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/d4f/RoadInfoMarkTypeLine_8h.html">carla/road/element/RoadInfoMarkTypeLine.h</a>&quot;</span> <span class="comment">// 引入道路标记类型线类</span></div>
<div class="line"><a id="l00021" name="l00021"></a><span class="lineno">   21</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/dbd/RoadInfoSpeed_8h.html">carla/road/element/RoadInfoSpeed.h</a>&quot;</span> <span class="comment">// 引入道路速度信息类</span></div>
<div class="line"><a id="l00022" name="l00022"></a><span class="lineno">   22</span><span class="preprocessor">#include &quot;<a class="code" href="../../d1/d1d/RoadInfoSignal_8h.html">carla/road/element/RoadInfoSignal.h</a>&quot;</span> <span class="comment">// 引入道路信号信息类</span></div>
<div class="line"><a id="l00023" name="l00023"></a><span class="lineno">   23</span><span class="preprocessor">#include &quot;<a class="code" href="../../d6/d67/RoadInfoVisitor_8h.html">carla/road/element/RoadInfoVisitor.h</a>&quot;</span> <span class="comment">// 引入道路信息访问者类</span></div>
<div class="line"><a id="l00024" name="l00024"></a><span class="lineno">   24</span><span class="preprocessor">#include &quot;<a class="code" href="../../da/dd7/RoadInfoCrosswalk_8h.html">carla/road/element/RoadInfoCrosswalk.h</a>&quot;</span> <span class="comment">// 引入人行横道信息类</span></div>
<div class="line"><a id="l00025" name="l00025"></a><span class="lineno">   25</span><span class="preprocessor">#include &quot;<a class="code" href="../../d2/d56/InformationSet_8h.html">carla/road/InformationSet.h</a>&quot;</span> <span class="comment">// 引入信息集合类</span></div>
<div class="line"><a id="l00026" name="l00026"></a><span class="lineno">   26</span><span class="preprocessor">#include &quot;<a class="code" href="../../d0/def/Signal_8h.html">carla/road/Signal.h</a>&quot;</span> <span class="comment">// 引入信号类</span></div>
<div class="line"><a id="l00027" name="l00027"></a><span class="lineno">   27</span><span class="preprocessor">#include &quot;<a class="code" href="../../d4/d64/SignalType_8h.html">carla/road/SignalType.h</a>&quot;</span> <span class="comment">// 引入信号类型类</span></div>
<div class="line"><a id="l00028" name="l00028"></a><span class="lineno">   28</span> </div>
<div class="line"><a id="l00029" name="l00029"></a><span class="lineno">   29</span><span class="preprocessor">#include &lt;iterator&gt;</span> <span class="comment">// 引入迭代器相关库</span></div>
<div class="line"><a id="l00030" name="l00030"></a><span class="lineno">   30</span><span class="preprocessor">#include &lt;memory&gt;</span> <span class="comment">// 引入智能指针库</span></div>
<div class="line"><a id="l00031" name="l00031"></a><span class="lineno">   31</span><span class="preprocessor">#include &lt;algorithm&gt;</span> <span class="comment">// 引入算法库</span></div>
<div class="line"><a id="l00032" name="l00032"></a><span class="lineno">   32</span> </div>
<div class="line"><a id="l00033" name="l00033"></a><span class="lineno">   33</span><span class="keyword">using namespace </span><a class="code hl_namespace" href="../../df/dc1/namespacecarla_1_1road_1_1element.html">carla::road::element</a>; <span class="comment">// 使用carla::road::element命名空间</span></div>
<div class="line"><a id="l00034" name="l00034"></a><span class="lineno">   34</span> </div>
<div class="line"><a id="l00035" name="l00035"></a><span class="lineno">   35</span><span class="keyword">namespace </span><a class="code hl_namespace" href="../../d9/d36/namespacecarla.html">carla</a> {</div>
<div class="line"><a id="l00036" name="l00036"></a><span class="lineno">   36</span><span class="keyword">namespace </span>road {</div>
<div class="line"><a id="l00037" name="l00037"></a><span class="lineno">   37</span> </div>
<div class="line"><a id="l00038" name="l00038"></a><span class="lineno">   38</span>  boost::optional&lt;Map&gt; <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a7b0bb12125e15fd246924aee12327e7e">MapBuilder::Build</a>() {</div>
<div class="line"><a id="l00039" name="l00039"></a><span class="lineno">   39</span> </div>
<div class="line"><a id="l00040" name="l00040"></a><span class="lineno">   40</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae3f4192b6f1b0737a5d12923fc8da239">CreatePointersBetweenRoadSegments</a>(); <span class="comment">// 创建路段之间的指针</span></div>
<div class="line"><a id="l00041" name="l00041"></a><span class="lineno">   41</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aa01b79061fa5fc167617bc32272a2bb7">RemoveZeroLaneValiditySignalReferences</a>(); <span class="comment">// 移除无效车道信号引用</span></div>
<div class="line"><a id="l00042" name="l00042"></a><span class="lineno">   42</span> </div>
<div class="line"><a id="l00043" name="l00043"></a><span class="lineno">   43</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp;info : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>) { <span class="comment">// 遍历临时道路信息容器</span></div>
<div class="line"><a id="l00044" name="l00044"></a><span class="lineno">   44</span>      <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(info.first != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路信息不为空</span></div>
<div class="line"><a id="l00045" name="l00045"></a><span class="lineno">   45</span>      info.first-&gt;_info = <a class="code hl_class" href="../../d4/d28/classcarla_1_1road_1_1InformationSet.html">InformationSet</a>(std::move(info.second)); <span class="comment">// 移动并设置道路信息</span></div>
<div class="line"><a id="l00046" name="l00046"></a><span class="lineno">   46</span>    }</div>
<div class="line"><a id="l00047" name="l00047"></a><span class="lineno">   47</span> </div>
<div class="line"><a id="l00048" name="l00048"></a><span class="lineno">   48</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;&amp;info : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>) { <span class="comment">// 遍历临时车道信息容器</span></div>
<div class="line"><a id="l00049" name="l00049"></a><span class="lineno">   49</span>      <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(info.first != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道信息不为空</span></div>
<div class="line"><a id="l00050" name="l00050"></a><span class="lineno">   50</span>      info.first-&gt;_info = <a class="code hl_class" href="../../d4/d28/classcarla_1_1road_1_1InformationSet.html">InformationSet</a>(std::move(info.second)); <span class="comment">// 移动并设置车道信息</span></div>
<div class="line"><a id="l00051" name="l00051"></a><span class="lineno">   51</span>    }</div>
<div class="line"><a id="l00052" name="l00052"></a><span class="lineno">   52</span> </div>
<div class="line"><a id="l00053" name="l00053"></a><span class="lineno">   53</span>    <span class="comment">// compute transform requires the roads to have the RoadInfo</span></div>
<div class="line"><a id="l00054" name="l00054"></a><span class="lineno">   54</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae08e6f0bdd3b6efe2e30ca19effd3a97">SolveSignalReferencesAndTransforms</a>(); <span class="comment">// 解决信号引用和变换</span></div>
<div class="line"><a id="l00055" name="l00055"></a><span class="lineno">   55</span> </div>
<div class="line"><a id="l00056" name="l00056"></a><span class="lineno">   56</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a76406231d5de92bdeda1b869d0da7eab">SolveControllerAndJuntionReferences</a>(); <span class="comment">// 解决控制器和交叉口引用</span></div>
<div class="line"><a id="l00057" name="l00057"></a><span class="lineno">   57</span> </div>
<div class="line"><a id="l00058" name="l00058"></a><span class="lineno">   58</span>    <span class="comment">// remove temporal already used information</span></div>
<div class="line"><a id="l00059" name="l00059"></a><span class="lineno">   59</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>.clear(); <span class="comment">// 清空临时道路信息容器</span></div>
<div class="line"><a id="l00060" name="l00060"></a><span class="lineno">   60</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>.clear(); <span class="comment">// 清空临时车道信息容器</span></div>
<div class="line"><a id="l00061" name="l00061"></a><span class="lineno">   61</span> </div>
<div class="line"><a id="l00062" name="l00062"></a><span class="lineno">   62</span>    <span class="comment">// _map_data is a member of MapBuilder so you must especify if</span></div>
<div class="line"><a id="l00063" name="l00063"></a><span class="lineno">   63</span>    <span class="comment">// you want to keep it (will return copy -&gt; Map(const Map &amp;))</span></div>
<div class="line"><a id="l00064" name="l00064"></a><span class="lineno">   64</span>    <span class="comment">// or move it (will return move -&gt; Map(Map &amp;&amp;))</span></div>
<div class="line"><a id="l00065" name="l00065"></a><span class="lineno">   65</span>    <a class="code hl_class" href="../../d7/db0/classMap.html">Map</a> map(std::move(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>)); <span class="comment">// 移动并创建地图对象</span></div>
<div class="line"><a id="l00066" name="l00066"></a><span class="lineno">   66</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab0d9fe008defb1501769cf62f8cadf14">CreateJunctionBoundingBoxes</a>(map); <span class="comment">// 创建交叉口的边界框</span></div>
<div class="line"><a id="l00067" name="l00067"></a><span class="lineno">   67</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a681b6b968d9fc6a9477dca966ec3e09e">ComputeJunctionRoadConflicts</a>(map); <span class="comment">// 计算交叉口道路冲突</span></div>
<div class="line"><a id="l00068" name="l00068"></a><span class="lineno">   68</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af3773de062a9e9aec4310f024f19ba28">CheckSignalsOnRoads</a>(map); <span class="comment">// 检查道路上的信号</span></div>
<div class="line"><a id="l00069" name="l00069"></a><span class="lineno">   69</span> </div>
<div class="line"><a id="l00070" name="l00070"></a><span class="lineno">   70</span>    <span class="keywordflow">return</span> map; <span class="comment">// 返回构建的地图</span></div>
<div class="line"><a id="l00071" name="l00071"></a><span class="lineno">   71</span>  }</div>
<div class="line"><a id="l00072" name="l00072"></a><span class="lineno">   72</span> </div>
<div class="line"><a id="l00073" name="l00073"></a><span class="lineno">   73</span>  <span class="comment">// called from profiles parser</span></div>
<div class="line"><a id="l00074" name="l00074"></a><span class="lineno">   74</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a76ee768c427a5d1c0c7023a88c966f9e">MapBuilder::AddRoadElevationProfile</a>(</div>
<div class="line"><a id="l00075" name="l00075"></a><span class="lineno">   75</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road, <span class="comment">// 道路指针</span></div>
<div class="line"><a id="l00076" name="l00076"></a><span class="lineno">   76</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 路段位置</span></div>
<div class="line"><a id="l00077" name="l00077"></a><span class="lineno">   77</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> a, <span class="comment">// 高度参数a</span></div>
<div class="line"><a id="l00078" name="l00078"></a><span class="lineno">   78</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> b, <span class="comment">// 高度参数b</span></div>
<div class="line"><a id="l00079" name="l00079"></a><span class="lineno">   79</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> c, <span class="comment">// 高度参数c</span></div>
<div class="line"><a id="l00080" name="l00080"></a><span class="lineno">   80</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> d) { <span class="comment">// 高度参数d</span></div>
<div class="line"><a id="l00081" name="l00081"></a><span class="lineno">   81</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路不为空</span></div>
<div class="line"><a id="l00082" name="l00082"></a><span class="lineno">   82</span>    <span class="keyword">auto</span> elevation = std::make_unique&lt;RoadInfoElevation&gt;(s, a, b, c, d); <span class="comment">// 创建道路高度信息</span></div>
<div class="line"><a id="l00083" name="l00083"></a><span class="lineno">   83</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::move(elevation)); <span class="comment">// 添加到临时道路信息容器</span></div>
<div class="line"><a id="l00084" name="l00084"></a><span class="lineno">   84</span>  }</div>
<div class="line"><a id="l00085" name="l00085"></a><span class="lineno">   85</span> </div>
<div class="line"><a id="l00086" name="l00086"></a><span class="lineno">   86</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a5484346171a02a134007986113c30379">MapBuilder::AddRoadObjectCrosswalk</a>(</div>
<div class="line"><a id="l00087" name="l00087"></a><span class="lineno">   87</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road, <span class="comment">// 道路指针</span></div>
<div class="line"><a id="l00088" name="l00088"></a><span class="lineno">   88</span>      <span class="keyword">const</span> std::string name, <span class="comment">// 人行横道名称</span></div>
<div class="line"><a id="l00089" name="l00089"></a><span class="lineno">   89</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 路段位置</span></div>
<div class="line"><a id="l00090" name="l00090"></a><span class="lineno">   90</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> t, <span class="comment">// 路段横坐标</span></div>
<div class="line"><a id="l00091" name="l00091"></a><span class="lineno">   91</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> zOffset, <span class="comment">// 高度偏移</span></div>
<div class="line"><a id="l00092" name="l00092"></a><span class="lineno">   92</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg, <span class="comment">// 偏航角</span></div>
<div class="line"><a id="l00093" name="l00093"></a><span class="lineno">   93</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> pitch, <span class="comment">// 俯仰角</span></div>
<div class="line"><a id="l00094" name="l00094"></a><span class="lineno">   94</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> roll, <span class="comment">// 翻滚角</span></div>
<div class="line"><a id="l00095" name="l00095"></a><span class="lineno">   95</span>      <span class="keyword">const</span> std::string orientation, <span class="comment">// 定位方向</span></div>
<div class="line"><a id="l00096" name="l00096"></a><span class="lineno">   96</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> width, <span class="comment">// 宽度</span></div>
<div class="line"><a id="l00097" name="l00097"></a><span class="lineno">   97</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length, <span class="comment">// 长度</span></div>
<div class="line"><a id="l00098" name="l00098"></a><span class="lineno">   98</span>      <span class="keyword">const</span> std::vector&lt;road::element::CrosswalkPoint&gt; points) { <span class="comment">// 人行横道点集</span></div>
<div class="line"><a id="l00099" name="l00099"></a><span class="lineno">   99</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路不为空</span></div>
<div class="line"><a id="l00100" name="l00100"></a><span class="lineno">  100</span>    <span class="keyword">auto</span> cross = std::make_unique&lt;RoadInfoCrosswalk&gt;(s, name, t, zOffset, hdg, pitch, roll, std::move(orientation), width, length, std::move(points)); <span class="comment">// 创建人行横道信息</span></div>
<div class="line"><a id="l00101" name="l00101"></a><span class="lineno">  101</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::move(cross)); <span class="comment">// 添加到临时道路信息容器</span></div>
<div class="line"><a id="l00102" name="l00102"></a><span class="lineno">  102</span>  }</div>
<div class="line"><a id="l00103" name="l00103"></a><span class="lineno">  103</span> </div>
<div class="line"><a id="l00104" name="l00104"></a><span class="lineno">  104</span>  <span class="comment">// called from lane parser</span></div>
<div class="line"><a id="l00105" name="l00105"></a><span class="lineno">  105</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a514a195a88e36e8611fe69ca4ccd2c63">MapBuilder::CreateLaneAccess</a>(</div>
<div class="line"><a id="l00106" name="l00106"></a><span class="lineno">  106</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00107" name="l00107"></a><span class="lineno">  107</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00108" name="l00108"></a><span class="lineno">  108</span>      <span class="keyword">const</span> std::string restriction) { <span class="comment">// 限制条件</span></div>
<div class="line"><a id="l00109" name="l00109"></a><span class="lineno">  109</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00110" name="l00110"></a><span class="lineno">  110</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneAccess&gt;(s, restriction)); <span class="comment">// 创建车道访问信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00111" name="l00111"></a><span class="lineno">  111</span>  }</div>
<div class="line"><a id="l00112" name="l00112"></a><span class="lineno">  112</span> </div>
<div class="line"><a id="l00113" name="l00113"></a><span class="lineno">  113</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a611de6c7856168347fddf40228704128">MapBuilder::CreateLaneBorder</a>(</div>
<div class="line"><a id="l00114" name="l00114"></a><span class="lineno">  114</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00115" name="l00115"></a><span class="lineno">  115</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00116" name="l00116"></a><span class="lineno">  116</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> a, <span class="comment">// 边界参数a</span></div>
<div class="line"><a id="l00117" name="l00117"></a><span class="lineno">  117</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> b, <span class="comment">// 边界参数b</span></div>
<div class="line"><a id="l00118" name="l00118"></a><span class="lineno">  118</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> c, <span class="comment">// 边界参数c</span></div>
<div class="line"><a id="l00119" name="l00119"></a><span class="lineno">  119</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> d) { <span class="comment">// 边界参数d</span></div>
<div class="line"><a id="l00120" name="l00120"></a><span class="lineno">  120</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00121" name="l00121"></a><span class="lineno">  121</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneBorder&gt;(s, a, b, c, d)); <span class="comment">// 创建车道边界信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00122" name="l00122"></a><span class="lineno">  122</span>  }</div>
<div class="line"><a id="l00123" name="l00123"></a><span class="lineno">  123</span> </div>
<div class="line"><a id="l00124" name="l00124"></a><span class="lineno">  124</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a563fe0c1c965d2f01f10d4ba1aa55b9e">MapBuilder::CreateLaneHeight</a>(</div>
<div class="line"><a id="l00125" name="l00125"></a><span class="lineno">  125</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00126" name="l00126"></a><span class="lineno">  126</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00127" name="l00127"></a><span class="lineno">  127</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> inner, <span class="comment">// 内部高度</span></div>
<div class="line"><a id="l00128" name="l00128"></a><span class="lineno">  128</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> outer) { <span class="comment">// 外部高度</span></div>
<div class="line"><a id="l00129" name="l00129"></a><span class="lineno">  129</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00130" name="l00130"></a><span class="lineno">  130</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneHeight&gt;(s, inner, outer)); <span class="comment">// 创建车道高度信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00131" name="l00131"></a><span class="lineno">  131</span>  }</div>
<div class="line"><a id="l00132" name="l00132"></a><span class="lineno">  132</span> </div>
<div class="line"><a id="l00133" name="l00133"></a><span class="lineno">  133</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af1f3d98883d99feb88d4b94535b39f8b">MapBuilder::CreateLaneMaterial</a>(</div>
<div class="line"><a id="l00134" name="l00134"></a><span class="lineno">  134</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00135" name="l00135"></a><span class="lineno">  135</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00136" name="l00136"></a><span class="lineno">  136</span>      <span class="keyword">const</span> std::string surface, <span class="comment">// 表面材料</span></div>
<div class="line"><a id="l00137" name="l00137"></a><span class="lineno">  137</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> friction, <span class="comment">// 摩擦系数</span></div>
<div class="line"><a id="l00138" name="l00138"></a><span class="lineno">  138</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> roughness) { <span class="comment">// 粗糙度</span></div>
<div class="line"><a id="l00139" name="l00139"></a><span class="lineno">  139</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00140" name="l00140"></a><span class="lineno">  140</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneMaterial&gt;(s, surface, friction,</div>
<div class="line"><a id="l00141" name="l00141"></a><span class="lineno">  141</span>        roughness)); <span class="comment">// 创建车道材料信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00142" name="l00142"></a><span class="lineno">  142</span>  }</div>
<div class="line"><a id="l00143" name="l00143"></a><span class="lineno">  143</span> </div>
<div class="line"><a id="l00144" name="l00144"></a><span class="lineno">  144</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a720e10d05c31b993837d6446bf68b54a">MapBuilder::CreateLaneRule</a>(</div>
<div class="line"><a id="l00145" name="l00145"></a><span class="lineno">  145</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00146" name="l00146"></a><span class="lineno">  146</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00147" name="l00147"></a><span class="lineno">  147</span>      <span class="keyword">const</span> std::string value) { <span class="comment">// 规则值</span></div>
<div class="line"><a id="l00148" name="l00148"></a><span class="lineno">  148</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00149" name="l00149"></a><span class="lineno">  149</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneRule&gt;(s, value)); <span class="comment">// 创建车道规则信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00150" name="l00150"></a><span class="lineno">  150</span>  }</div>
<div class="line"><a id="l00151" name="l00151"></a><span class="lineno">  151</span> </div>
<div class="line"><a id="l00152" name="l00152"></a><span class="lineno">  152</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae13dbbe72540773614b4e89898582530">MapBuilder::CreateLaneVisibility</a>(</div>
<div class="line"><a id="l00153" name="l00153"></a><span class="lineno">  153</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00154" name="l00154"></a><span class="lineno">  154</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00155" name="l00155"></a><span class="lineno">  155</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> forward, <span class="comment">// 前方可见性</span></div>
<div class="line"><a id="l00156" name="l00156"></a><span class="lineno">  156</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> back, <span class="comment">// 后方可见性</span></div>
<div class="line"><a id="l00157" name="l00157"></a><span class="lineno">  157</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> left, <span class="comment">// 左侧可见性</span></div>
<div class="line"><a id="l00158" name="l00158"></a><span class="lineno">  158</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> right) { <span class="comment">// 右侧可见性</span></div>
<div class="line"><a id="l00159" name="l00159"></a><span class="lineno">  159</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00160" name="l00160"></a><span class="lineno">  160</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneVisibility&gt;(s, forward, back,</div>
<div class="line"><a id="l00161" name="l00161"></a><span class="lineno">  161</span>        left, right)); <span class="comment">// 创建车道可见性信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00162" name="l00162"></a><span class="lineno">  162</span>  }</div>
<div class="line"><a id="l00163" name="l00163"></a><span class="lineno">  163</span> </div>
<div class="line"><a id="l00164" name="l00164"></a><span class="lineno">  164</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#add044e6ce2e3342454af48e9db6a7876">MapBuilder::CreateLaneWidth</a>(</div>
<div class="line"><a id="l00165" name="l00165"></a><span class="lineno">  165</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00166" name="l00166"></a><span class="lineno">  166</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00167" name="l00167"></a><span class="lineno">  167</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> a, <span class="comment">// 宽度参数a</span></div>
<div class="line"><a id="l00168" name="l00168"></a><span class="lineno">  168</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> b, <span class="comment">// 宽度参数b</span></div>
<div class="line"><a id="l00169" name="l00169"></a><span class="lineno">  169</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> c, <span class="comment">// 宽度参数c</span></div>
<div class="line"><a id="l00170" name="l00170"></a><span class="lineno">  170</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> d) { <span class="comment">// 宽度参数d</span></div>
<div class="line"><a id="l00171" name="l00171"></a><span class="lineno">  171</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00172" name="l00172"></a><span class="lineno">  172</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoLaneWidth&gt;(s, a, b, c, d)); <span class="comment">// 创建车道宽度信息并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00173" name="l00173"></a><span class="lineno">  173</span>  }</div>
<div class="line"><a id="l00174" name="l00174"></a><span class="lineno">  174</span> </div>
<div class="line"><a id="l00175" name="l00175"></a><span class="lineno">  175</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ad4f4ecd2bf090c849e743302db8fde85">MapBuilder::CreateRoadMark</a>(</div>
<div class="line"><a id="l00176" name="l00176"></a><span class="lineno">  176</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane, <span class="comment">// 车道指针</span></div>
<div class="line"><a id="l00177" name="l00177"></a><span class="lineno">  177</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> road_mark_id, <span class="comment">// 道路标记ID</span></div>
<div class="line"><a id="l00178" name="l00178"></a><span class="lineno">  178</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s, <span class="comment">// 位置</span></div>
<div class="line"><a id="l00179" name="l00179"></a><span class="lineno">  179</span>      <span class="keyword">const</span> std::string type, <span class="comment">// 标记类型</span></div>
<div class="line"><a id="l00180" name="l00180"></a><span class="lineno">  180</span>      <span class="keyword">const</span> std::string weight, <span class="comment">// 标记重量</span></div>
<div class="line"><a id="l00181" name="l00181"></a><span class="lineno">  181</span>      <span class="keyword">const</span> std::string color, <span class="comment">// 标记颜色</span></div>
<div class="line"><a id="l00182" name="l00182"></a><span class="lineno">  182</span>      <span class="keyword">const</span> std::string material, <span class="comment">// 标记材料</span></div>
<div class="line"><a id="l00183" name="l00183"></a><span class="lineno">  183</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> width, <span class="comment">// 标记宽度</span></div>
<div class="line"><a id="l00184" name="l00184"></a><span class="lineno">  184</span>      std::string lane_change, <span class="comment">// 车道变更类型</span></div>
<div class="line"><a id="l00185" name="l00185"></a><span class="lineno">  185</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> height, <span class="comment">// 标记高度</span></div>
<div class="line"><a id="l00186" name="l00186"></a><span class="lineno">  186</span>      <span class="keyword">const</span> std::string type_name, <span class="comment">// 类型名称</span></div>
<div class="line"><a id="l00187" name="l00187"></a><span class="lineno">  187</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> type_width) { <span class="comment">// 类型宽度</span></div>
<div class="line"><a id="l00188" name="l00188"></a><span class="lineno">  188</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不为空</span></div>
<div class="line"><a id="l00189" name="l00189"></a><span class="lineno">  189</span>    <a class="code hl_enumeration" href="../../d1/df9/classcarla_1_1road_1_1element_1_1RoadInfoMarkRecord.html#a7ab9501c5086223a821a827e77edf7ec">RoadInfoMarkRecord::LaneChange</a> lc; <span class="comment">// 定义车道变更类型</span></div>
<div class="line"><a id="l00190" name="l00190"></a><span class="lineno">  190</span> </div>
<div class="line"><a id="l00191" name="l00191"></a><span class="lineno">  191</span>    <a class="code hl_function" href="../../de/d93/classcarla_1_1StringUtil.html#ada48ad70d7afa9a0cd6b3d68a1c292e8">StringUtil::ToLower</a>(lane_change); <span class="comment">// 将车道变更类型转换为小写</span></div>
<div class="line"><a id="l00192" name="l00192"></a><span class="lineno">  192</span> </div>
<div class="line"><a id="l00193" name="l00193"></a><span class="lineno">  193</span>    <span class="keywordflow">if</span> (lane_change == <span class="stringliteral">&quot;increase&quot;</span>) { <span class="comment">// 如果是增加</span></div>
<div class="line"><a id="l00194" name="l00194"></a><span class="lineno">  194</span>      lc = RoadInfoMarkRecord::LaneChange::Increase; <span class="comment">// 设置为增加</span></div>
<div class="line"><a id="l00195" name="l00195"></a><span class="lineno">  195</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lane_change == <span class="stringliteral">&quot;decrease&quot;</span>) { <span class="comment">// 如果是减少</span></div>
<div class="line"><a id="l00196" name="l00196"></a><span class="lineno">  196</span>      lc = RoadInfoMarkRecord::LaneChange::Decrease; <span class="comment">// 设置为减少</span></div>
<div class="line"><a id="l00197" name="l00197"></a><span class="lineno">  197</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (lane_change == <span class="stringliteral">&quot;none&quot;</span>) { <span class="comment">// 如果没有</span></div>
<div class="line"><a id="l00198" name="l00198"></a><span class="lineno">  198</span>      lc = RoadInfoMarkRecord::LaneChange::None; <span class="comment">// 设置为无</span></div>
<div class="line"><a id="l00199" name="l00199"></a><span class="lineno">  199</span>    } <span class="keywordflow">else</span> { <span class="comment">// 其他情况</span></div>
<div class="line"><a id="l00200" name="l00200"></a><span class="lineno">  200</span>      lc = RoadInfoMarkRecord::LaneChange::Both; <span class="comment">// 设置为双向</span></div>
<div class="line"><a id="l00201" name="l00201"></a><span class="lineno">  201</span>    }</div>
<div class="line"><a id="l00202" name="l00202"></a><span class="lineno">  202</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoMarkRecord&gt;(s, road_mark_id, type,</div>
<div class="line"><a id="l00203" name="l00203"></a><span class="lineno">  203</span>        weight, color,</div>
<div class="line"><a id="l00204" name="l00204"></a><span class="lineno">  204</span>        material, width, lc, height, type_name, type_width)); <span class="comment">// 创建道路标记记录并添加到临时车道信息容器</span></div>
<div class="line"><a id="l00205" name="l00205"></a><span class="lineno">  205</span>  }</div>
<div class="line"><a id="l00206" name="l00206"></a><span class="lineno">  206</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aa724a828b0aca026efbdc65855ee23c0">MapBuilder::CreateRoadMarkTypeLine</a>(</div>
<div class="line"><a id="l00207" name="l00207"></a><span class="lineno">  207</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane,  <span class="comment">// 道路车道指针</span></div>
<div class="line"><a id="l00208" name="l00208"></a><span class="lineno">  208</span>      <span class="keyword">const</span> <span class="keywordtype">int</span> road_mark_id,  <span class="comment">// 道路标记ID</span></div>
<div class="line"><a id="l00209" name="l00209"></a><span class="lineno">  209</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length,  <span class="comment">// 标记线长度</span></div>
<div class="line"><a id="l00210" name="l00210"></a><span class="lineno">  210</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> space,  <span class="comment">// 标记线间距</span></div>
<div class="line"><a id="l00211" name="l00211"></a><span class="lineno">  211</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> tOffset,  <span class="comment">// 垂直偏移量</span></div>
<div class="line"><a id="l00212" name="l00212"></a><span class="lineno">  212</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,  <span class="comment">// 纵向位置</span></div>
<div class="line"><a id="l00213" name="l00213"></a><span class="lineno">  213</span>      <span class="keyword">const</span> std::string rule,  <span class="comment">// 规则字符串</span></div>
<div class="line"><a id="l00214" name="l00214"></a><span class="lineno">  214</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> width) {  <span class="comment">// 标记线宽度</span></div>
<div class="line"><a id="l00215" name="l00215"></a><span class="lineno">  215</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>);  <span class="comment">// 确保车道指针不为空</span></div>
<div class="line"><a id="l00216" name="l00216"></a><span class="lineno">  216</span>    <span class="keyword">auto</span> it = MakeRoadInfoIterator&lt;RoadInfoMarkRecord&gt;(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane]);  <span class="comment">// 创建道路信息迭代器</span></div>
<div class="line"><a id="l00217" name="l00217"></a><span class="lineno">  217</span>    <span class="keywordflow">for</span> (; !it.IsAtEnd(); ++it) {  <span class="comment">// 遍历道路信息</span></div>
<div class="line"><a id="l00218" name="l00218"></a><span class="lineno">  218</span>      <span class="keywordflow">if</span> (it-&gt;GetRoadMarkId() == road_mark_id) {  <span class="comment">// 如果找到匹配的道路标记ID</span></div>
<div class="line"><a id="l00219" name="l00219"></a><span class="lineno">  219</span>        it-&gt;GetLines().emplace_back(std::make_unique&lt;RoadInfoMarkTypeLine&gt;(s, road_mark_id, length, space,</div>
<div class="line"><a id="l00220" name="l00220"></a><span class="lineno">  220</span>            tOffset, rule, width));  <span class="comment">// 添加新的标记线对象</span></div>
<div class="line"><a id="l00221" name="l00221"></a><span class="lineno">  221</span>        <span class="keywordflow">break</span>;  <span class="comment">// 跳出循环</span></div>
<div class="line"><a id="l00222" name="l00222"></a><span class="lineno">  222</span>      }</div>
<div class="line"><a id="l00223" name="l00223"></a><span class="lineno">  223</span>    }</div>
<div class="line"><a id="l00224" name="l00224"></a><span class="lineno">  224</span>}</div>
<div class="line"><a id="l00225" name="l00225"></a><span class="lineno">  225</span> </div>
<div class="line"><a id="l00226" name="l00226"></a><span class="lineno">  226</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a8562b5754037a8096bff3c51c84691ae">MapBuilder::CreateLaneSpeed</a>(</div>
<div class="line"><a id="l00227" name="l00227"></a><span class="lineno">  227</span>      <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane,  <span class="comment">// 道路车道指针</span></div>
<div class="line"><a id="l00228" name="l00228"></a><span class="lineno">  228</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,  <span class="comment">// 纵向位置</span></div>
<div class="line"><a id="l00229" name="l00229"></a><span class="lineno">  229</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> max,  <span class="comment">// 最大速度</span></div>
<div class="line"><a id="l00230" name="l00230"></a><span class="lineno">  230</span>      <span class="keyword">const</span> std::string <span class="comment">/*unit*/</span>) {  <span class="comment">// 单位（未使用）</span></div>
<div class="line"><a id="l00231" name="l00231"></a><span class="lineno">  231</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>);  <span class="comment">// 确保车道指针不为空</span></div>
<div class="line"><a id="l00232" name="l00232"></a><span class="lineno">  232</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">_temp_lane_info_container</a>[lane].emplace_back(std::make_unique&lt;RoadInfoSpeed&gt;(s, max));  <span class="comment">// 添加车道速度信息</span></div>
<div class="line"><a id="l00233" name="l00233"></a><span class="lineno">  233</span>}</div>
<div class="line"><a id="l00234" name="l00234"></a><span class="lineno">  234</span> </div>
<div class="line"><a id="l00235" name="l00235"></a><span class="lineno">  235</span><a class="code hl_class" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html">element::RoadInfoSignal</a>* <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ace2456563cabdf60c2c2e601c189bce5">MapBuilder::AddSignal</a>(</div>
<div class="line"><a id="l00236" name="l00236"></a><span class="lineno">  236</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a>* road,  <span class="comment">// 道路指针</span></div>
<div class="line"><a id="l00237" name="l00237"></a><span class="lineno">  237</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">SignId</a> signal_id,  <span class="comment">// 信号ID</span></div>
<div class="line"><a id="l00238" name="l00238"></a><span class="lineno">  238</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,  <span class="comment">// 纵向位置</span></div>
<div class="line"><a id="l00239" name="l00239"></a><span class="lineno">  239</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> t,  <span class="comment">// 横向位置</span></div>
<div class="line"><a id="l00240" name="l00240"></a><span class="lineno">  240</span>      <span class="keyword">const</span> std::string name,  <span class="comment">// 信号名称</span></div>
<div class="line"><a id="l00241" name="l00241"></a><span class="lineno">  241</span>      <span class="keyword">const</span> std::string dynamic,  <span class="comment">// 动态信息</span></div>
<div class="line"><a id="l00242" name="l00242"></a><span class="lineno">  242</span>      <span class="keyword">const</span> std::string orientation,  <span class="comment">// 方向</span></div>
<div class="line"><a id="l00243" name="l00243"></a><span class="lineno">  243</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> zOffset,  <span class="comment">// 高度偏移量</span></div>
<div class="line"><a id="l00244" name="l00244"></a><span class="lineno">  244</span>      <span class="keyword">const</span> std::string country,  <span class="comment">// 国家</span></div>
<div class="line"><a id="l00245" name="l00245"></a><span class="lineno">  245</span>      <span class="keyword">const</span> std::string type,  <span class="comment">// 信号类型</span></div>
<div class="line"><a id="l00246" name="l00246"></a><span class="lineno">  246</span>      <span class="keyword">const</span> std::string subtype,  <span class="comment">// 信号子类型</span></div>
<div class="line"><a id="l00247" name="l00247"></a><span class="lineno">  247</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> value,  <span class="comment">// 信号值</span></div>
<div class="line"><a id="l00248" name="l00248"></a><span class="lineno">  248</span>      <span class="keyword">const</span> std::string unit,  <span class="comment">// 单位</span></div>
<div class="line"><a id="l00249" name="l00249"></a><span class="lineno">  249</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> height,  <span class="comment">// 信号高度</span></div>
<div class="line"><a id="l00250" name="l00250"></a><span class="lineno">  250</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> width,  <span class="comment">// 信号宽度</span></div>
<div class="line"><a id="l00251" name="l00251"></a><span class="lineno">  251</span>      <span class="keyword">const</span> std::string text,  <span class="comment">// 文字内容</span></div>
<div class="line"><a id="l00252" name="l00252"></a><span class="lineno">  252</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hOffset,  <span class="comment">// 水平偏移量</span></div>
<div class="line"><a id="l00253" name="l00253"></a><span class="lineno">  253</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> pitch,  <span class="comment">// 俯仰角</span></div>
<div class="line"><a id="l00254" name="l00254"></a><span class="lineno">  254</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> roll) {  <span class="comment">// 横滚角</span></div>
<div class="line"><a id="l00255" name="l00255"></a><span class="lineno">  255</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>[signal_id] = std::make_unique&lt;Signal&gt;(  <span class="comment">// 创建信号对象并存储</span></div>
<div class="line"><a id="l00256" name="l00256"></a><span class="lineno">  256</span>        road-&gt;<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a5fbd6ce83670d0394b56a89f0b7be239">GetId</a>(),  <span class="comment">// 获取道路ID</span></div>
<div class="line"><a id="l00257" name="l00257"></a><span class="lineno">  257</span>        signal_id,  <span class="comment">// 信号ID</span></div>
<div class="line"><a id="l00258" name="l00258"></a><span class="lineno">  258</span>        s,  <span class="comment">// 纵向位置</span></div>
<div class="line"><a id="l00259" name="l00259"></a><span class="lineno">  259</span>        t,  <span class="comment">// 横向位置</span></div>
<div class="line"><a id="l00260" name="l00260"></a><span class="lineno">  260</span>        name,  <span class="comment">// 信号名称</span></div>
<div class="line"><a id="l00261" name="l00261"></a><span class="lineno">  261</span>        dynamic,  <span class="comment">// 动态信息</span></div>
<div class="line"><a id="l00262" name="l00262"></a><span class="lineno">  262</span>        orientation,  <span class="comment">// 方向</span></div>
<div class="line"><a id="l00263" name="l00263"></a><span class="lineno">  263</span>        zOffset,  <span class="comment">// 高度偏移量</span></div>
<div class="line"><a id="l00264" name="l00264"></a><span class="lineno">  264</span>        country,  <span class="comment">// 国家</span></div>
<div class="line"><a id="l00265" name="l00265"></a><span class="lineno">  265</span>        type,  <span class="comment">// 信号类型</span></div>
<div class="line"><a id="l00266" name="l00266"></a><span class="lineno">  266</span>        subtype,  <span class="comment">// 信号子类型</span></div>
<div class="line"><a id="l00267" name="l00267"></a><span class="lineno">  267</span>        value,  <span class="comment">// 信号值</span></div>
<div class="line"><a id="l00268" name="l00268"></a><span class="lineno">  268</span>        unit,  <span class="comment">// 单位</span></div>
<div class="line"><a id="l00269" name="l00269"></a><span class="lineno">  269</span>        height,  <span class="comment">// 信号高度</span></div>
<div class="line"><a id="l00270" name="l00270"></a><span class="lineno">  270</span>        width,  <span class="comment">// 信号宽度</span></div>
<div class="line"><a id="l00271" name="l00271"></a><span class="lineno">  271</span>        text,  <span class="comment">// 文字内容</span></div>
<div class="line"><a id="l00272" name="l00272"></a><span class="lineno">  272</span>        hOffset,  <span class="comment">// 水平偏移量</span></div>
<div class="line"><a id="l00273" name="l00273"></a><span class="lineno">  273</span>        pitch,  <span class="comment">// 俯仰角</span></div>
<div class="line"><a id="l00274" name="l00274"></a><span class="lineno">  274</span>        roll);  <span class="comment">// 横滚角</span></div>
<div class="line"><a id="l00275" name="l00275"></a><span class="lineno">  275</span> </div>
<div class="line"><a id="l00276" name="l00276"></a><span class="lineno">  276</span>    <span class="keywordflow">return</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab572d01d8dc4f2d4dbbecbc382b9e4ed">AddSignalReference</a>(road, signal_id, s, t, orientation);  <span class="comment">// 添加信号引用并返回</span></div>
<div class="line"><a id="l00277" name="l00277"></a><span class="lineno">  277</span>}</div>
<div class="line"><a id="l00278" name="l00278"></a><span class="lineno">  278</span> </div>
<div class="line"><a id="l00279" name="l00279"></a><span class="lineno">  279</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a28e5c8dd8b1100cc547ee3b1b7e41eb9">MapBuilder::AddSignalPositionInertial</a>(</div>
<div class="line"><a id="l00280" name="l00280"></a><span class="lineno">  280</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">SignId</a> signal_id,  <span class="comment">// 信号ID</span></div>
<div class="line"><a id="l00281" name="l00281"></a><span class="lineno">  281</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> x,  <span class="comment">// X坐标</span></div>
<div class="line"><a id="l00282" name="l00282"></a><span class="lineno">  282</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> y,  <span class="comment">// Y坐标</span></div>
<div class="line"><a id="l00283" name="l00283"></a><span class="lineno">  283</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> z,  <span class="comment">// Z坐标</span></div>
<div class="line"><a id="l00284" name="l00284"></a><span class="lineno">  284</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,  <span class="comment">// 航向角</span></div>
<div class="line"><a id="l00285" name="l00285"></a><span class="lineno">  285</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> pitch,  <span class="comment">// 俯仰角</span></div>
<div class="line"><a id="l00286" name="l00286"></a><span class="lineno">  286</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> roll) {  <span class="comment">// 横滚角</span></div>
<div class="line"><a id="l00287" name="l00287"></a><span class="lineno">  287</span>    std::unique_ptr&lt;Signal&gt; &amp;signal = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>[signal_id];  <span class="comment">// 获取信号对象引用</span></div>
<div class="line"><a id="l00288" name="l00288"></a><span class="lineno">  288</span>    signal-&gt;_using_inertial_position = <span class="keyword">true</span>;  <span class="comment">// 设置为使用惯性位置</span></div>
<div class="line"><a id="l00289" name="l00289"></a><span class="lineno">  289</span>    <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location = <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a>(x, -y, z);  <span class="comment">// 创建位置对象，注意Y轴取反</span></div>
<div class="line"><a id="l00290" name="l00290"></a><span class="lineno">  290</span>    signal-&gt;_transform = <a class="code hl_class" href="../../de/da4/classcarla_1_1geom_1_1Transform.html">geom::Transform</a>(location, <a class="code hl_class" href="../../d8/dba/classcarla_1_1geom_1_1Rotation.html">geom::Rotation</a>(  <span class="comment">// 创建变换对象</span></div>
<div class="line"><a id="l00291" name="l00291"></a><span class="lineno">  291</span>        <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(pitch)),  <span class="comment">// 俯仰角转换为度</span></div>
<div class="line"><a id="l00292" name="l00292"></a><span class="lineno">  292</span>        <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(-hdg)),  <span class="comment">// 航向角转换为度并取反</span></div>
<div class="line"><a id="l00293" name="l00293"></a><span class="lineno">  293</span>        <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(roll))));  <span class="comment">// 横滚角转换为度</span></div>
<div class="line"><a id="l00294" name="l00294"></a><span class="lineno">  294</span>}</div>
<div class="line"><a id="l00295" name="l00295"></a><span class="lineno">  295</span> </div>
<div class="line"><a id="l00296" name="l00296"></a><span class="lineno">  296</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a2144d72161716cdb85d3bf04f4d15534">MapBuilder::AddSignalPositionRoad</a>(</div>
<div class="line"><a id="l00297" name="l00297"></a><span class="lineno">  297</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">SignId</a> signal_id,  <span class="comment">// 信号ID</span></div>
<div class="line"><a id="l00298" name="l00298"></a><span class="lineno">  298</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id,  <span class="comment">// 道路ID</span></div>
<div class="line"><a id="l00299" name="l00299"></a><span class="lineno">  299</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,  <span class="comment">// 纵向位置</span></div>
<div class="line"><a id="l00300" name="l00300"></a><span class="lineno">  300</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> t,  <span class="comment">// 横向位置</span></div>
<div class="line"><a id="l00301" name="l00301"></a><span class="lineno">  301</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> zOffset,  <span class="comment">// 高度偏移量</span></div>
<div class="line"><a id="l00302" name="l00302"></a><span class="lineno">  302</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hOffset,  <span class="comment">// 水平偏移量</span></div>
<div class="line"><a id="l00303" name="l00303"></a><span class="lineno">  303</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> pitch,  <span class="comment">// 俯仰角</span></div>
<div class="line"><a id="l00304" name="l00304"></a><span class="lineno">  304</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> roll) {  <span class="comment">// 横滚角</span></div>
<div class="line"><a id="l00305" name="l00305"></a><span class="lineno">  305</span>    std::unique_ptr&lt;Signal&gt; &amp;signal = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>[signal_id];  <span class="comment">// 获取信号对象引用</span></div>
<div class="line"><a id="l00306" name="l00306"></a><span class="lineno">  306</span>    signal-&gt;_road_id = road_id;  <span class="comment">// 设置道路ID</span></div>
<div class="line"><a id="l00307" name="l00307"></a><span class="lineno">  307</span>    signal-&gt;_s = s;  <span class="comment">// 设置纵向位置</span></div>
<div class="line"><a id="l00308" name="l00308"></a><span class="lineno">  308</span>    signal-&gt;_t = t;  <span class="comment">// 设置横向位置</span></div>
<div class="line"><a id="l00309" name="l00309"></a><span class="lineno">  309</span>    signal-&gt;_zOffset = zOffset;  <span class="comment">// 设置高度偏移量</span></div>
<div class="line"><a id="l00310" name="l00310"></a><span class="lineno">  310</span>    signal-&gt;_hOffset = hOffset;  <span class="comment">// 设置水平偏移量</span></div>
<div class="line"><a id="l00311" name="l00311"></a><span class="lineno">  311</span>    signal-&gt;_pitch = pitch;  <span class="comment">// 设置俯仰角</span></div>
<div class="line"><a id="l00312" name="l00312"></a><span class="lineno">  312</span>    signal-&gt;_roll = roll;  <span class="comment">// 设置横滚角</span></div>
<div class="line"><a id="l00313" name="l00313"></a><span class="lineno">  313</span>}</div>
<div class="line"><a id="l00314" name="l00314"></a><span class="lineno">  314</span> </div>
<div class="line"><a id="l00315" name="l00315"></a><span class="lineno">  315</span>    <a class="code hl_class" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html">element::RoadInfoSignal</a>* <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab572d01d8dc4f2d4dbbecbc382b9e4ed">MapBuilder::AddSignalReference</a>(</div>
<div class="line"><a id="l00316" name="l00316"></a><span class="lineno">  316</span>        <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a>* road,</div>
<div class="line"><a id="l00317" name="l00317"></a><span class="lineno">  317</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">SignId</a> signal_id,</div>
<div class="line"><a id="l00318" name="l00318"></a><span class="lineno">  318</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> s_position,</div>
<div class="line"><a id="l00319" name="l00319"></a><span class="lineno">  319</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> t_position,</div>
<div class="line"><a id="l00320" name="l00320"></a><span class="lineno">  320</span>        <span class="keyword">const</span> std::string signal_reference_orientation) {</div>
<div class="line"><a id="l00321" name="l00321"></a><span class="lineno">  321</span> </div>
<div class="line"><a id="l00322" name="l00322"></a><span class="lineno">  322</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> epsilon = 0.00001; <span class="comment">// 定义一个极小值，用于比较</span></div>
<div class="line"><a id="l00323" name="l00323"></a><span class="lineno">  323</span>      <a class="code hl_define" href="../../d4/deb/Debug_8h.html#ad7812d0b01b83a7dfc80026d9eaff951">RELEASE_ASSERT</a>(s_position &gt;= 0.0); <span class="comment">// 确保s_position为非负数</span></div>
<div class="line"><a id="l00324" name="l00324"></a><span class="lineno">  324</span>      <span class="comment">// 防止s_position等于道路长度</span></div>
<div class="line"><a id="l00325" name="l00325"></a><span class="lineno">  325</span>      <span class="keywordtype">double</span> fixed_s = <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#a8f8eccc1a2bcc711250f2b47a21eb31f">geom::Math::Clamp</a>(s_position, 0.0, road-&gt;<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a11acd9741132199eb349204c1def107f">GetLength</a>() - epsilon);</div>
<div class="line"><a id="l00326" name="l00326"></a><span class="lineno">  326</span>      <span class="comment">// 在临时容器中创建一个RoadInfoSignal对象并存储</span></div>
<div class="line"><a id="l00327" name="l00327"></a><span class="lineno">  327</span>      <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::make_unique&lt;element::RoadInfoSignal&gt;(</div>
<div class="line"><a id="l00328" name="l00328"></a><span class="lineno">  328</span>          signal_id, road-&gt;<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a5fbd6ce83670d0394b56a89f0b7be239">GetId</a>(), fixed_s, t_position, signal_reference_orientation));</div>
<div class="line"><a id="l00329" name="l00329"></a><span class="lineno">  329</span>      <span class="comment">// 获取刚刚添加的信号引用</span></div>
<div class="line"><a id="l00330" name="l00330"></a><span class="lineno">  330</span>      <span class="keyword">auto</span> road_info_signal = <span class="keyword">static_cast&lt;</span><a class="code hl_class" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html">element::RoadInfoSignal</a>*<span class="keyword">&gt;</span>(</div>
<div class="line"><a id="l00331" name="l00331"></a><span class="lineno">  331</span>          <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].back().get());</div>
<div class="line"><a id="l00332" name="l00332"></a><span class="lineno">  332</span>      <span class="comment">// 将信号引用添加到临时信号参考容器中</span></div>
<div class="line"><a id="l00333" name="l00333"></a><span class="lineno">  333</span>      <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>.emplace_back(road_info_signal);</div>
<div class="line"><a id="l00334" name="l00334"></a><span class="lineno">  334</span>      <span class="keywordflow">return</span> road_info_signal; <span class="comment">// 返回信号引用</span></div>
<div class="line"><a id="l00335" name="l00335"></a><span class="lineno">  335</span>    }</div>
<div class="line"><a id="l00336" name="l00336"></a><span class="lineno">  336</span> </div>
<div class="line"><a id="l00337" name="l00337"></a><span class="lineno">  337</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">MapBuilder::AddValidityToSignalReference</a>(</div>
<div class="line"><a id="l00338" name="l00338"></a><span class="lineno">  338</span>        <a class="code hl_class" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html">element::RoadInfoSignal</a>* signal_reference,</div>
<div class="line"><a id="l00339" name="l00339"></a><span class="lineno">  339</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> from_lane,</div>
<div class="line"><a id="l00340" name="l00340"></a><span class="lineno">  340</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> to_lane) {</div>
<div class="line"><a id="l00341" name="l00341"></a><span class="lineno">  341</span>      <span class="comment">// 为信号引用添加有效性信息</span></div>
<div class="line"><a id="l00342" name="l00342"></a><span class="lineno">  342</span>      signal_reference-&gt;<a class="code hl_variable" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6a9f65e93420edc1f2cbe36fa1cacd39">_validities</a>.emplace_back(<a class="code hl_struct" href="../../d8/d71/structcarla_1_1road_1_1LaneValidity.html">LaneValidity</a>(from_lane, to_lane));</div>
<div class="line"><a id="l00343" name="l00343"></a><span class="lineno">  343</span>    }</div>
<div class="line"><a id="l00344" name="l00344"></a><span class="lineno">  344</span> </div>
<div class="line"><a id="l00345" name="l00345"></a><span class="lineno">  345</span>    <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a93ee14d452625ad1da2bc7a9716cebaf">MapBuilder::AddDependencyToSignal</a>(</div>
<div class="line"><a id="l00346" name="l00346"></a><span class="lineno">  346</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">SignId</a> signal_id,</div>
<div class="line"><a id="l00347" name="l00347"></a><span class="lineno">  347</span>        <span class="keyword">const</span> std::string dependency_id,</div>
<div class="line"><a id="l00348" name="l00348"></a><span class="lineno">  348</span>        <span class="keyword">const</span> std::string dependency_type) {</div>
<div class="line"><a id="l00349" name="l00349"></a><span class="lineno">  349</span>      <span class="comment">// 为信号添加依赖关系</span></div>
<div class="line"><a id="l00350" name="l00350"></a><span class="lineno">  350</span>      <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>[signal_id]-&gt;_dependencies.emplace_back(</div>
<div class="line"><a id="l00351" name="l00351"></a><span class="lineno">  351</span>          <a class="code hl_struct" href="../../d3/dd0/structcarla_1_1road_1_1SignalDependency.html">SignalDependency</a>(dependency_id, dependency_type));</div>
<div class="line"><a id="l00352" name="l00352"></a><span class="lineno">  352</span>    }</div>
<div class="line"><a id="l00353" name="l00353"></a><span class="lineno">  353</span> </div>
<div class="line"><a id="l00354" name="l00354"></a><span class="lineno">  354</span>    <span class="comment">// 构建道路对象</span></div>
<div class="line"><a id="l00355" name="l00355"></a><span class="lineno">  355</span>    <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">carla::road::Road</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a3bd8ae2f59e33c89d34144f003bd8e7b">MapBuilder::AddRoad</a>(</div>
<div class="line"><a id="l00356" name="l00356"></a><span class="lineno">  356</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id,</div>
<div class="line"><a id="l00357" name="l00357"></a><span class="lineno">  357</span>        <span class="keyword">const</span> std::string name,</div>
<div class="line"><a id="l00358" name="l00358"></a><span class="lineno">  358</span>        <span class="keyword">const</span> <span class="keywordtype">double</span> length,</div>
<div class="line"><a id="l00359" name="l00359"></a><span class="lineno">  359</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a> junction_id,</div>
<div class="line"><a id="l00360" name="l00360"></a><span class="lineno">  360</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> predecessor,</div>
<div class="line"><a id="l00361" name="l00361"></a><span class="lineno">  361</span>        <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> successor) {</div>
<div class="line"><a id="l00362" name="l00362"></a><span class="lineno">  362</span> </div>
<div class="line"><a id="l00363" name="l00363"></a><span class="lineno">  363</span>      <span class="comment">// 添加道路</span></div>
<div class="line"><a id="l00364" name="l00364"></a><span class="lineno">  364</span>      <span class="keyword">auto</span> road = &amp;(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a2be95bb0e432f3ecfa159924eb4c1c55">_roads</a>.emplace(road_id, <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a>()).first-&gt;second);</div>
<div class="line"><a id="l00365" name="l00365"></a><span class="lineno">  365</span> </div>
<div class="line"><a id="l00366" name="l00366"></a><span class="lineno">  366</span>      <span class="comment">// 设置道路数据</span></div>
<div class="line"><a id="l00367" name="l00367"></a><span class="lineno">  367</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a05fdfb37a163bded2d3614ee1cb3a818">_map_data</a> = &amp;<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>; <span class="comment">// 设置地图数据指针</span></div>
<div class="line"><a id="l00368" name="l00368"></a><span class="lineno">  368</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a4f76cd62723468f99e24723485d93d26">_id</a> = road_id; <span class="comment">// 设置道路ID</span></div>
<div class="line"><a id="l00369" name="l00369"></a><span class="lineno">  369</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#aebf343db3f93cbf9fda62a1eb4156751">_name</a> = name; <span class="comment">// 设置道路名称</span></div>
<div class="line"><a id="l00370" name="l00370"></a><span class="lineno">  370</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a364d48e04217afe4a0c57565002a13e7">_length</a> = length; <span class="comment">// 设置道路长度</span></div>
<div class="line"><a id="l00371" name="l00371"></a><span class="lineno">  371</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a3fea1511d0c5ceb2dca10090b23d616e">_junction_id</a> = junction_id; <span class="comment">// 设置交叉口ID</span></div>
<div class="line"><a id="l00372" name="l00372"></a><span class="lineno">  372</span>      (junction_id != -1) ? road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a88c0e4c9f38925e1e309a9d7adce06f7">_is_junction</a> = <span class="keyword">true</span> : road-&gt;_is_junction = <a class="code hl_variable" href="../../dd/d17/namespacecarla_1_1multigpu.html#ab43bb7f54aaed5c720effba0e848be1c">false</a>; <span class="comment">// 判断是否为交叉口</span></div>
<div class="line"><a id="l00373" name="l00373"></a><span class="lineno">  373</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#ad82403b75d7d9fd7a16bfbd36977854e">_successor</a> = successor; <span class="comment">// 设置后继道路</span></div>
<div class="line"><a id="l00374" name="l00374"></a><span class="lineno">  374</span>      road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#af0d9106ed41000c139ac8038cddf3530">_predecessor</a> = predecessor; <span class="comment">// 设置前驱道路</span></div>
<div class="line"><a id="l00375" name="l00375"></a><span class="lineno">  375</span> </div>
<div class="line"><a id="l00376" name="l00376"></a><span class="lineno">  376</span>      <span class="keywordflow">return</span> road; <span class="comment">// 返回道路对象</span></div>
<div class="line"><a id="l00377" name="l00377"></a><span class="lineno">  377</span>  }</div>
<div class="line"><a id="l00378" name="l00378"></a><span class="lineno">  378</span> </div>
<div class="line"><a id="l00379" name="l00379"></a><span class="lineno">  379</span>  <a class="code hl_class" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">carla::road::LaneSection</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a4c51ad576d6a0f4078594d571b64a4d4">MapBuilder::AddRoadSection</a>(</div>
<div class="line"><a id="l00380" name="l00380"></a><span class="lineno">  380</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road,</div>
<div class="line"><a id="l00381" name="l00381"></a><span class="lineno">  381</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a0eafa3a966293c70fdfd033a0b961ca3">SectionId</a> <span class="keywordtype">id</span>,</div>
<div class="line"><a id="l00382" name="l00382"></a><span class="lineno">  382</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s) {</div>
<div class="line"><a id="l00383" name="l00383"></a><span class="lineno">  383</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路不为空</span></div>
<div class="line"><a id="l00384" name="l00384"></a><span class="lineno">  384</span>    <a class="code hl_class" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">carla::road::LaneSection</a> &amp;sec = road-&gt;<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a51794196f4af00d66d8543c9b30aef2c">_lane_sections</a>.<a class="code hl_function" href="../../d9/dab/classcarla_1_1road_1_1LaneSectionMap.html#af96afc2630e1b2dc30735e097f4abe4b">Emplace</a>(<span class="keywordtype">id</span>, s); <span class="comment">// 在道路中添加车道段</span></div>
<div class="line"><a id="l00385" name="l00385"></a><span class="lineno">  385</span>    sec.<a class="code hl_variable" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a36c10c9afb439bc2a2ee5247ff89c423">_road</a> = road; <span class="comment">// 设置车道段所属道路</span></div>
<div class="line"><a id="l00386" name="l00386"></a><span class="lineno">  386</span>    <span class="keywordflow">return</span> &amp;sec; <span class="comment">// 返回车道段对象</span></div>
<div class="line"><a id="l00387" name="l00387"></a><span class="lineno">  387</span>  }</div>
<div class="line"><a id="l00388" name="l00388"></a><span class="lineno">  388</span> </div>
<div class="line"><a id="l00389" name="l00389"></a><span class="lineno">  389</span>  <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">carla::road::Lane</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a1484f5063da0a24cdc1e3d1f9560186d">MapBuilder::AddRoadSectionLane</a>(</div>
<div class="line"><a id="l00390" name="l00390"></a><span class="lineno">  390</span>      <a class="code hl_class" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">carla::road::LaneSection</a> *section,</div>
<div class="line"><a id="l00391" name="l00391"></a><span class="lineno">  391</span>      <span class="keyword">const</span> int32_t lane_id,</div>
<div class="line"><a id="l00392" name="l00392"></a><span class="lineno">  392</span>      <span class="keyword">const</span> uint32_t lane_type,</div>
<div class="line"><a id="l00393" name="l00393"></a><span class="lineno">  393</span>      <span class="keyword">const</span> <span class="keywordtype">bool</span> lane_level,</div>
<div class="line"><a id="l00394" name="l00394"></a><span class="lineno">  394</span>      <span class="keyword">const</span> int32_t predecessor,</div>
<div class="line"><a id="l00395" name="l00395"></a><span class="lineno">  395</span>      <span class="keyword">const</span> int32_t successor) {</div>
<div class="line"><a id="l00396" name="l00396"></a><span class="lineno">  396</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(section != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道段不为空</span></div>
<div class="line"><a id="l00397" name="l00397"></a><span class="lineno">  397</span> </div>
<div class="line"><a id="l00398" name="l00398"></a><span class="lineno">  398</span>    <span class="comment">// 添加车道</span></div>
<div class="line"><a id="l00399" name="l00399"></a><span class="lineno">  399</span>    <span class="keyword">auto</span> *lane = &amp;((section-&gt;<a class="code hl_variable" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#ab2c069f270a0f6c6fbf7613a6d84dcab">_lanes</a>.emplace(lane_id, <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a>()).first)-&gt;second);</div>
<div class="line"><a id="l00400" name="l00400"></a><span class="lineno">  400</span> </div>
<div class="line"><a id="l00401" name="l00401"></a><span class="lineno">  401</span>    <span class="comment">// 设置车道数据</span></div>
<div class="line"><a id="l00402" name="l00402"></a><span class="lineno">  402</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ad9e10990b5e4376cc0dd99bd4bfe88da">_id</a> = lane_id; <span class="comment">// 设置车道ID</span></div>
<div class="line"><a id="l00403" name="l00403"></a><span class="lineno">  403</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ad5d915a4e8c4939939bbc3bfeb393503">_lane_section</a> = section; <span class="comment">// 设置所属车道段</span></div>
<div class="line"><a id="l00404" name="l00404"></a><span class="lineno">  404</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#af5d883c72d6c8efb71c0647128f79690">_level</a> = lane_level; <span class="comment">// 设置车道等级</span></div>
<div class="line"><a id="l00405" name="l00405"></a><span class="lineno">  405</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#af60a3fdc211996954bc388100d4a228c">_type</a> = <span class="keyword">static_cast&lt;</span><a class="code hl_enumeration" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247">carla::road::Lane::LaneType</a><span class="keyword">&gt;</span>(lane_type); <span class="comment">// 设置车道类型</span></div>
<div class="line"><a id="l00406" name="l00406"></a><span class="lineno">  406</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a1f7bbd63d1568c63cc15966ab380d3f5">_successor</a> = successor; <span class="comment">// 设置后继车道</span></div>
<div class="line"><a id="l00407" name="l00407"></a><span class="lineno">  407</span>    lane-&gt;<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a5faf5a805240e75a109b5ce23eb533bf">_predecessor</a> = predecessor; <span class="comment">// 设置前驱车道</span></div>
<div class="line"><a id="l00408" name="l00408"></a><span class="lineno">  408</span> </div>
<div class="line"><a id="l00409" name="l00409"></a><span class="lineno">  409</span>    <span class="keywordflow">return</span> lane; <span class="comment">// 返回车道对象</span></div>
<div class="line"><a id="l00410" name="l00410"></a><span class="lineno">  410</span>  }</div>
<div class="line"><a id="l00411" name="l00411"></a><span class="lineno">  411</span> </div>
<div class="line"><a id="l00412" name="l00412"></a><span class="lineno">  412</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af6ed1543d744e5674f4421f8278991ba">MapBuilder::AddRoadGeometryLine</a>(</div>
<div class="line"><a id="l00413" name="l00413"></a><span class="lineno">  413</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road,</div>
<div class="line"><a id="l00414" name="l00414"></a><span class="lineno">  414</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00415" name="l00415"></a><span class="lineno">  415</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> x,</div>
<div class="line"><a id="l00416" name="l00416"></a><span class="lineno">  416</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> y,</div>
<div class="line"><a id="l00417" name="l00417"></a><span class="lineno">  417</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,</div>
<div class="line"><a id="l00418" name="l00418"></a><span class="lineno">  418</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length) {</div>
<div class="line"><a id="l00419" name="l00419"></a><span class="lineno">  419</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路不为空</span></div>
<div class="line"><a id="l00420" name="l00420"></a><span class="lineno">  420</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y), 0.0f); <span class="comment">// 创建位置对象</span></div>
<div class="line"><a id="l00421" name="l00421"></a><span class="lineno">  421</span>    <span class="comment">// 创建几何线对象</span></div>
<div class="line"><a id="l00422" name="l00422"></a><span class="lineno">  422</span>    <span class="keyword">auto</span> line_geometry = std::make_unique&lt;GeometryLine&gt;(</div>
<div class="line"><a id="l00423" name="l00423"></a><span class="lineno">  423</span>        s,</div>
<div class="line"><a id="l00424" name="l00424"></a><span class="lineno">  424</span>        length,</div>
<div class="line"><a id="l00425" name="l00425"></a><span class="lineno">  425</span>        hdg,</div>
<div class="line"><a id="l00426" name="l00426"></a><span class="lineno">  426</span>        location);</div>
<div class="line"><a id="l00427" name="l00427"></a><span class="lineno">  427</span> </div>
<div class="line"><a id="l00428" name="l00428"></a><span class="lineno">  428</span>    <span class="comment">// 将新的道路几何信息添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00429" name="l00429"></a><span class="lineno">  429</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::move(elevation));</div>
<div class="line"><a id="l00430" name="l00430"></a><span class="lineno">  430</span>  }</div>
<div class="line"><a id="l00431" name="l00431"></a><span class="lineno">  431</span> </div>
<div class="line"><a id="l00432" name="l00432"></a><span class="lineno">  432</span><span class="comment">// 创建道路速度信息</span></div>
<div class="line"><a id="l00433" name="l00433"></a><span class="lineno">  433</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a290e593d53d5a58895c542e3db1012f6">MapBuilder::CreateRoadSpeed</a>(</div>
<div class="line"><a id="l00434" name="l00434"></a><span class="lineno">  434</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road,</div>
<div class="line"><a id="l00435" name="l00435"></a><span class="lineno">  435</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00436" name="l00436"></a><span class="lineno">  436</span>      <span class="keyword">const</span> std::string <span class="comment">/*type*/</span>,</div>
<div class="line"><a id="l00437" name="l00437"></a><span class="lineno">  437</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> max,</div>
<div class="line"><a id="l00438" name="l00438"></a><span class="lineno">  438</span>      <span class="keyword">const</span> std::string <span class="comment">/*unit*/</span>) {</div>
<div class="line"><a id="l00439" name="l00439"></a><span class="lineno">  439</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路指针不为nullptr</span></div>
<div class="line"><a id="l00440" name="l00440"></a><span class="lineno">  440</span>    <span class="comment">// 将新的速度信息添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00441" name="l00441"></a><span class="lineno">  441</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::make_unique&lt;RoadInfoSpeed&gt;(s, max));</div>
<div class="line"><a id="l00442" name="l00442"></a><span class="lineno">  442</span>  }</div>
<div class="line"><a id="l00443" name="l00443"></a><span class="lineno">  443</span> </div>
<div class="line"><a id="l00444" name="l00444"></a><span class="lineno">  444</span><span class="comment">// 创建道路段偏移信息</span></div>
<div class="line"><a id="l00445" name="l00445"></a><span class="lineno">  445</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a42bde86ce9e8116ad27afcf8a10cc839">MapBuilder::CreateSectionOffset</a>(</div>
<div class="line"><a id="l00446" name="l00446"></a><span class="lineno">  446</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road,</div>
<div class="line"><a id="l00447" name="l00447"></a><span class="lineno">  447</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00448" name="l00448"></a><span class="lineno">  448</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> a,</div>
<div class="line"><a id="l00449" name="l00449"></a><span class="lineno">  449</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> b,</div>
<div class="line"><a id="l00450" name="l00450"></a><span class="lineno">  450</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> c,</div>
<div class="line"><a id="l00451" name="l00451"></a><span class="lineno">  451</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> d) {</div>
<div class="line"><a id="l00452" name="l00452"></a><span class="lineno">  452</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路指针不为nullptr</span></div>
<div class="line"><a id="l00453" name="l00453"></a><span class="lineno">  453</span>    <span class="comment">// 将新的车道偏移信息添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00454" name="l00454"></a><span class="lineno">  454</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::make_unique&lt;RoadInfoLaneOffset&gt;(s, a, b, c, d));</div>
<div class="line"><a id="l00455" name="l00455"></a><span class="lineno">  455</span>  }</div>
<div class="line"><a id="l00456" name="l00456"></a><span class="lineno">  456</span> </div>
<div class="line"><a id="l00457" name="l00457"></a><span class="lineno">  457</span><span class="comment">// 添加道路几何弧形信息</span></div>
<div class="line"><a id="l00458" name="l00458"></a><span class="lineno">  458</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a082a04a1e6e5f896b5acf13c075c3fba">MapBuilder::AddRoadGeometryArc</a>(</div>
<div class="line"><a id="l00459" name="l00459"></a><span class="lineno">  459</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *road,</div>
<div class="line"><a id="l00460" name="l00460"></a><span class="lineno">  460</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00461" name="l00461"></a><span class="lineno">  461</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> x,</div>
<div class="line"><a id="l00462" name="l00462"></a><span class="lineno">  462</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> y,</div>
<div class="line"><a id="l00463" name="l00463"></a><span class="lineno">  463</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,</div>
<div class="line"><a id="l00464" name="l00464"></a><span class="lineno">  464</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length,</div>
<div class="line"><a id="l00465" name="l00465"></a><span class="lineno">  465</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> curvature) {</div>
<div class="line"><a id="l00466" name="l00466"></a><span class="lineno">  466</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路指针不为nullptr</span></div>
<div class="line"><a id="l00467" name="l00467"></a><span class="lineno">  467</span>    <span class="comment">// 创建位置对象</span></div>
<div class="line"><a id="l00468" name="l00468"></a><span class="lineno">  468</span>  <span class="comment">//创建一个位置对象，表示弧形的起始点</span></div>
<div class="line"><a id="l00469" name="l00469"></a><span class="lineno">  469</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y), 0.0f);</div>
<div class="line"><a id="l00470" name="l00470"></a><span class="lineno">  470</span>    <span class="comment">// 创建弧形几何对象</span></div>
<div class="line"><a id="l00471" name="l00471"></a><span class="lineno">  471</span>    <span class="keyword">auto</span> arc_geometry = std::make_unique&lt;GeometryArc&gt;(</div>
<div class="line"><a id="l00472" name="l00472"></a><span class="lineno">  472</span>        s,</div>
<div class="line"><a id="l00473" name="l00473"></a><span class="lineno">  473</span>        length,</div>
<div class="line"><a id="l00474" name="l00474"></a><span class="lineno">  474</span>        hdg,</div>
<div class="line"><a id="l00475" name="l00475"></a><span class="lineno">  475</span>        location,</div>
<div class="line"><a id="l00476" name="l00476"></a><span class="lineno">  476</span>        curvature);</div>
<div class="line"><a id="l00477" name="l00477"></a><span class="lineno">  477</span> </div>
<div class="line"><a id="l00478" name="l00478"></a><span class="lineno">  478</span>    <span class="comment">// 将新的道路几何信息（弧形）添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00479" name="l00479"></a><span class="lineno">  479</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::unique_ptr&lt;RoadInfo&gt;(<span class="keyword">new</span> <a class="code hl_class" href="../../d4/dcb/classcarla_1_1road_1_1element_1_1RoadInfoGeometry.html">RoadInfoGeometry</a>(s,</div>
<div class="line"><a id="l00480" name="l00480"></a><span class="lineno">  480</span>        std::move(arc_geometry))));</div>
<div class="line"><a id="l00481" name="l00481"></a><span class="lineno">  481</span>  }</div>
<div class="line"><a id="l00482" name="l00482"></a><span class="lineno">  482</span> </div>
<div class="line"><a id="l00483" name="l00483"></a><span class="lineno">  483</span><span class="comment">// 添加道路几何螺旋形信息</span></div>
<div class="line"><a id="l00484" name="l00484"></a><span class="lineno">  484</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af435a180c70620b9d7ddc9f3f921356b">MapBuilder::AddRoadGeometrySpiral</a>(</div>
<div class="line"><a id="l00485" name="l00485"></a><span class="lineno">  485</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> * road,</div>
<div class="line"><a id="l00486" name="l00486"></a><span class="lineno">  486</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00487" name="l00487"></a><span class="lineno">  487</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> x,</div>
<div class="line"><a id="l00488" name="l00488"></a><span class="lineno">  488</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> y,</div>
<div class="line"><a id="l00489" name="l00489"></a><span class="lineno">  489</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,</div>
<div class="line"><a id="l00490" name="l00490"></a><span class="lineno">  490</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length,</div>
<div class="line"><a id="l00491" name="l00491"></a><span class="lineno">  491</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> curvStart,</div>
<div class="line"><a id="l00492" name="l00492"></a><span class="lineno">  492</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> curvEnd) {</div>
<div class="line"><a id="l00493" name="l00493"></a><span class="lineno">  493</span>    <span class="comment">// throw_exception(std::runtime_error(&quot;geometry spiral not supported&quot;));</span></div>
<div class="line"><a id="l00494" name="l00494"></a><span class="lineno">  494</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>); <span class="comment">// 确保道路指针不为nullptr</span></div>
<div class="line"><a id="l00495" name="l00495"></a><span class="lineno">  495</span>    <span class="comment">// 创建位置对象</span></div>
<div class="line"><a id="l00496" name="l00496"></a><span class="lineno">  496</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y), 0.0f);</div>
<div class="line"><a id="l00497" name="l00497"></a><span class="lineno">  497</span>    <span class="comment">// 创建螺旋几何对象</span></div>
<div class="line"><a id="l00498" name="l00498"></a><span class="lineno">  498</span>    <span class="keyword">auto</span> spiral_geometry = std::make_unique&lt;GeometrySpiral&gt;(</div>
<div class="line"><a id="l00499" name="l00499"></a><span class="lineno">  499</span>        s,</div>
<div class="line"><a id="l00500" name="l00500"></a><span class="lineno">  500</span>        length,</div>
<div class="line"><a id="l00501" name="l00501"></a><span class="lineno">  501</span>        hdg,</div>
<div class="line"><a id="l00502" name="l00502"></a><span class="lineno">  502</span>        location,</div>
<div class="line"><a id="l00503" name="l00503"></a><span class="lineno">  503</span>        curvStart,</div>
<div class="line"><a id="l00504" name="l00504"></a><span class="lineno">  504</span>        curvEnd);</div>
<div class="line"><a id="l00505" name="l00505"></a><span class="lineno">  505</span> </div>
<div class="line"><a id="l00506" name="l00506"></a><span class="lineno">  506</span>    <span class="comment">// 将新的道路几何信息（螺旋）添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00507" name="l00507"></a><span class="lineno">  507</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::unique_ptr&lt;RoadInfo&gt;(<span class="keyword">new</span> <a class="code hl_class" href="../../d4/dcb/classcarla_1_1road_1_1element_1_1RoadInfoGeometry.html">RoadInfoGeometry</a>(s,</div>
<div class="line"><a id="l00508" name="l00508"></a><span class="lineno">  508</span>        std::move(spiral_geometry))));</div>
<div class="line"><a id="l00509" name="l00509"></a><span class="lineno">  509</span>  }</div>
<div class="line"><a id="l00510" name="l00510"></a><span class="lineno">  510</span> </div>
<div class="line"><a id="l00511" name="l00511"></a><span class="lineno">  511</span><span class="comment">// 添加道路几何三次多项式信息</span></div>
<div class="line"><a id="l00512" name="l00512"></a><span class="lineno">  512</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ac11b2606c1d84fb1a606aba760cf93e6">MapBuilder::AddRoadGeometryPoly3</a>(</div>
<div class="line"><a id="l00513" name="l00513"></a><span class="lineno">  513</span>      <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> * road,</div>
<div class="line"><a id="l00514" name="l00514"></a><span class="lineno">  514</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s,</div>
<div class="line"><a id="l00515" name="l00515"></a><span class="lineno">  515</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> x,</div>
<div class="line"><a id="l00516" name="l00516"></a><span class="lineno">  516</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> y,</div>
<div class="line"><a id="l00517" name="l00517"></a><span class="lineno">  517</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,</div>
<div class="line"><a id="l00518" name="l00518"></a><span class="lineno">  518</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> length,</div>
<div class="line"><a id="l00519" name="l00519"></a><span class="lineno">  519</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> a,</div>
<div class="line"><a id="l00520" name="l00520"></a><span class="lineno">  520</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> b,</div>
<div class="line"><a id="l00521" name="l00521"></a><span class="lineno">  521</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> c,</div>
<div class="line"><a id="l00522" name="l00522"></a><span class="lineno">  522</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> d) {</div>
<div class="line"><a id="l00523" name="l00523"></a><span class="lineno">  523</span>    <span class="comment">// throw_exception(std::runtime_error(&quot;geometry poly3 not supported&quot;));</span></div>
<div class="line"><a id="l00524" name="l00524"></a><span class="lineno">  524</span>   <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>);  <span class="comment">// 确保 road 指针不为空</span></div>
<div class="line"><a id="l00525" name="l00525"></a><span class="lineno">  525</span><span class="keyword">const</span> <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y), 0.0f);  <span class="comment">// 创建一个位置对象，坐标为 (x, y)，高度为 0.0f</span></div>
<div class="line"><a id="l00526" name="l00526"></a><span class="lineno">  526</span><span class="keyword">auto</span> poly3_geometry = std::make_unique&lt;GeometryPoly3&gt;(  <span class="comment">// 创建一个 GeometryPoly3 对象的智能指针</span></div>
<div class="line"><a id="l00527" name="l00527"></a><span class="lineno">  527</span>    s,</div>
<div class="line"><a id="l00528" name="l00528"></a><span class="lineno">  528</span>    length,</div>
<div class="line"><a id="l00529" name="l00529"></a><span class="lineno">  529</span>    hdg,</div>
<div class="line"><a id="l00530" name="l00530"></a><span class="lineno">  530</span>    location,</div>
<div class="line"><a id="l00531" name="l00531"></a><span class="lineno">  531</span>    a,</div>
<div class="line"><a id="l00532" name="l00532"></a><span class="lineno">  532</span>    b,</div>
<div class="line"><a id="l00533" name="l00533"></a><span class="lineno">  533</span>    c,</div>
<div class="line"><a id="l00534" name="l00534"></a><span class="lineno">  534</span>    d);</div>
<div class="line"><a id="l00535" name="l00535"></a><span class="lineno">  535</span><a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::unique_ptr&lt;RoadInfo&gt;(<span class="keyword">new</span> <a class="code hl_class" href="../../d4/dcb/classcarla_1_1road_1_1element_1_1RoadInfoGeometry.html">RoadInfoGeometry</a>(s,  <span class="comment">// 将 RoadInfoGeometry 对象添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00536" name="l00536"></a><span class="lineno">  536</span>    std::move(poly3_geometry))));  <span class="comment">// 移动 poly3_geometry 智能指针</span></div>
<div class="line"><a id="l00537" name="l00537"></a><span class="lineno">  537</span> </div>
<div class="line"><a id="l00538" name="l00538"></a><span class="lineno">  538</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a9ab60d9b8784f35b90893fbc32f703d2">MapBuilder::AddRoadGeometryParamPoly3</a>(  <span class="comment">// 定义一个函数，用于添加参数化的三次曲线道路几何信息</span></div>
<div class="line"><a id="l00539" name="l00539"></a><span class="lineno">  539</span>    <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> * road,  <span class="comment">// 道路指针</span></div>
<div class="line"><a id="l00540" name="l00540"></a><span class="lineno">  540</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> s,  <span class="comment">// 曲线长度</span></div>
<div class="line"><a id="l00541" name="l00541"></a><span class="lineno">  541</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> x,  <span class="comment">// x 坐标</span></div>
<div class="line"><a id="l00542" name="l00542"></a><span class="lineno">  542</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> y,  <span class="comment">// y 坐标</span></div>
<div class="line"><a id="l00543" name="l00543"></a><span class="lineno">  543</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> hdg,  <span class="comment">// 航向角</span></div>
<div class="line"><a id="l00544" name="l00544"></a><span class="lineno">  544</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> length,  <span class="comment">// 道路长度</span></div>
<div class="line"><a id="l00545" name="l00545"></a><span class="lineno">  545</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> aU,  <span class="comment">// 参数 U 的系数 a</span></div>
<div class="line"><a id="l00546" name="l00546"></a><span class="lineno">  546</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> bU,  <span class="comment">// 参数 U 的系数 b</span></div>
<div class="line"><a id="l00547" name="l00547"></a><span class="lineno">  547</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> cU,  <span class="comment">// 参数 U 的系数 c</span></div>
<div class="line"><a id="l00548" name="l00548"></a><span class="lineno">  548</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> dU,  <span class="comment">// 参数 U 的系数 d</span></div>
<div class="line"><a id="l00549" name="l00549"></a><span class="lineno">  549</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> aV,  <span class="comment">// 参数 V 的系数 a</span></div>
<div class="line"><a id="l00550" name="l00550"></a><span class="lineno">  550</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> bV,  <span class="comment">// 参数 V 的系数 b</span></div>
<div class="line"><a id="l00551" name="l00551"></a><span class="lineno">  551</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> cV,  <span class="comment">// 参数 V 的系数 c</span></div>
<div class="line"><a id="l00552" name="l00552"></a><span class="lineno">  552</span>    <span class="keyword">const</span> <span class="keywordtype">double</span> dV,  <span class="comment">// 参数 V 的系数 d</span></div>
<div class="line"><a id="l00553" name="l00553"></a><span class="lineno">  553</span>    <span class="keyword">const</span> std::string p_range) {  <span class="comment">// 参数范围类型</span></div>
<div class="line"><a id="l00554" name="l00554"></a><span class="lineno">  554</span>    <span class="comment">//throw_exception(std::runtime_error(&quot;geometry poly3 not supported&quot;));  // 抛出异常，表示不支持三次曲线几何（已注释）</span></div>
<div class="line"><a id="l00555" name="l00555"></a><span class="lineno">  555</span>    <span class="keywordtype">bool</span> arcLength;  <span class="comment">// 声明一个布尔变量，用于判断弧长</span></div>
<div class="line"><a id="l00556" name="l00556"></a><span class="lineno">  556</span>    <span class="keywordflow">if</span>(p_range == <span class="stringliteral">&quot;arcLength&quot;</span>){  <span class="comment">// 如果参数范围是弧长</span></div>
<div class="line"><a id="l00557" name="l00557"></a><span class="lineno">  557</span>      arcLength = <span class="keyword">true</span>;  <span class="comment">// 设置 arcLength 为 true</span></div>
<div class="line"><a id="l00558" name="l00558"></a><span class="lineno">  558</span>    }<span class="keywordflow">else</span>{  <span class="comment">// 否则</span></div>
<div class="line"><a id="l00559" name="l00559"></a><span class="lineno">  559</span>      arcLength = <span class="keyword">false</span>;  <span class="comment">// 设置 arcLength 为 false</span></div>
<div class="line"><a id="l00560" name="l00560"></a><span class="lineno">  560</span>    }</div>
<div class="line"><a id="l00561" name="l00561"></a><span class="lineno">  561</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(road != <span class="keyword">nullptr</span>);  <span class="comment">// 确保 road 指针不为空</span></div>
<div class="line"><a id="l00562" name="l00562"></a><span class="lineno">  562</span>    <span class="keyword">const</span> <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> location(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(x), <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(y), 0.0f);  <span class="comment">// 创建一个位置对象</span></div>
<div class="line"><a id="l00563" name="l00563"></a><span class="lineno">  563</span>    <span class="keyword">auto</span> parampoly3_geometry = std::make_unique&lt;GeometryParamPoly3&gt;(  <span class="comment">// 创建一个 GeometryParamPoly3 对象的智能指针</span></div>
<div class="line"><a id="l00564" name="l00564"></a><span class="lineno">  564</span>        s,</div>
<div class="line"><a id="l00565" name="l00565"></a><span class="lineno">  565</span>        length,</div>
<div class="line"><a id="l00566" name="l00566"></a><span class="lineno">  566</span>        hdg,</div>
<div class="line"><a id="l00567" name="l00567"></a><span class="lineno">  567</span>        location,</div>
<div class="line"><a id="l00568" name="l00568"></a><span class="lineno">  568</span>        aU,</div>
<div class="line"><a id="l00569" name="l00569"></a><span class="lineno">  569</span>        bU,</div>
<div class="line"><a id="l00570" name="l00570"></a><span class="lineno">  570</span>        cU,</div>
<div class="line"><a id="l00571" name="l00571"></a><span class="lineno">  571</span>        dU,</div>
<div class="line"><a id="l00572" name="l00572"></a><span class="lineno">  572</span>        aV,</div>
<div class="line"><a id="l00573" name="l00573"></a><span class="lineno">  573</span>        bV,</div>
<div class="line"><a id="l00574" name="l00574"></a><span class="lineno">  574</span>        cV,</div>
<div class="line"><a id="l00575" name="l00575"></a><span class="lineno">  575</span>        dV,</div>
<div class="line"><a id="l00576" name="l00576"></a><span class="lineno">  576</span>        arcLength);  <span class="comment">// 将 arcLength 作为参数传入</span></div>
<div class="line"><a id="l00577" name="l00577"></a><span class="lineno">  577</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[road].emplace_back(std::unique_ptr&lt;RoadInfo&gt;(<span class="keyword">new</span> <a class="code hl_class" href="../../d4/dcb/classcarla_1_1road_1_1element_1_1RoadInfoGeometry.html">RoadInfoGeometry</a>(s,  <span class="comment">// 将 RoadInfoGeometry 对象添加到临时道路信息容器中</span></div>
<div class="line"><a id="l00578" name="l00578"></a><span class="lineno">  578</span>        std::move(parampoly3_geometry))));  <span class="comment">// 移动 parampoly3_geometry 智能指针</span></div>
<div class="line"><a id="l00579" name="l00579"></a><span class="lineno">  579</span> </div>
<div class="line"><a id="l00580" name="l00580"></a><span class="lineno">  580</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a7ca3a4005f3f53fdca75465b7782696b">MapBuilder::AddJunction</a>(<span class="keyword">const</span> int32_t <span class="keywordtype">id</span>, <span class="keyword">const</span> std::string name) {  <span class="comment">// 定义一个函数，用于添加交叉口</span></div>
<div class="line"><a id="l00581" name="l00581"></a><span class="lineno">  581</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#ada1ec7c5f6908e9b4cebc302aa4ec466">GetJunctions</a>().emplace(<span class="keywordtype">id</span>, <a class="code hl_class" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html">Junction</a>(<span class="keywordtype">id</span>, name));  <span class="comment">// 在地图数据中添加交叉口</span></div>
<div class="line"><a id="l00582" name="l00582"></a><span class="lineno">  582</span>}</div>
<div class="line"><a id="l00583" name="l00583"></a><span class="lineno">  583</span> </div>
<div class="line"><a id="l00584" name="l00584"></a><span class="lineno">  584</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aca70ccf621b7b40053014478bb934410">MapBuilder::AddConnection</a>(  <span class="comment">// 定义一个函数，用于添加交叉口连接</span></div>
<div class="line"><a id="l00585" name="l00585"></a><span class="lineno">  585</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a> junction_id,  <span class="comment">// 交叉口 ID</span></div>
<div class="line"><a id="l00586" name="l00586"></a><span class="lineno">  586</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#af1e9b9c042c2ad1550d15f607e3c5f05">ConId</a> connection_id,  <span class="comment">// 连接 ID</span></div>
<div class="line"><a id="l00587" name="l00587"></a><span class="lineno">  587</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> incoming_road,  <span class="comment">// 输入道路 ID</span></div>
<div class="line"><a id="l00588" name="l00588"></a><span class="lineno">  588</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> connecting_road) {  <span class="comment">// 连接道路 ID</span></div>
<div class="line"><a id="l00589" name="l00589"></a><span class="lineno">  589</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id) != <span class="keyword">nullptr</span>);  <span class="comment">// 确保交叉口存在</span></div>
<div class="line"><a id="l00590" name="l00590"></a><span class="lineno">  590</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id)-&gt;<a class="code hl_function" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#abedc91af2eee0d254ed59a43f2a37744">GetConnections</a>().emplace(connection_id,  <span class="comment">// 在交叉口中添加连接</span></div>
<div class="line"><a id="l00591" name="l00591"></a><span class="lineno">  591</span>        <a class="code hl_struct" href="../../d1/d9e/structcarla_1_1road_1_1Junction_1_1Connection.html">Junction::Connection</a>(connection_id, incoming_road, connecting_road));  <span class="comment">// 创建连接对象并添加</span></div>
<div class="line"><a id="l00592" name="l00592"></a><span class="lineno">  592</span>}</div>
<div class="line"><a id="l00593" name="l00593"></a><span class="lineno">  593</span> </div>
<div class="line"><a id="l00594" name="l00594"></a><span class="lineno">  594</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a8a75b8af56314c29891cb5c91a7fd00d">MapBuilder::AddLaneLink</a>(  <span class="comment">// 定义一个函数，用于添加车道链接</span></div>
<div class="line"><a id="l00595" name="l00595"></a><span class="lineno">  595</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a> junction_id,  <span class="comment">// 交叉口 ID</span></div>
<div class="line"><a id="l00596" name="l00596"></a><span class="lineno">  596</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#af1e9b9c042c2ad1550d15f607e3c5f05">ConId</a> connection_id,  <span class="comment">// 连接 ID</span></div>
<div class="line"><a id="l00597" name="l00597"></a><span class="lineno">  597</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> from,  <span class="comment">// 起始车道 ID</span></div>
<div class="line"><a id="l00598" name="l00598"></a><span class="lineno">  598</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> to) {  <span class="comment">// 目标车道 ID</span></div>
<div class="line"><a id="l00599" name="l00599"></a><span class="lineno">  599</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id) != <span class="keyword">nullptr</span>);  <span class="comment">// 确保交叉口存在</span></div>
<div class="line"><a id="l00600" name="l00600"></a><span class="lineno">  600</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id)-&gt;<a class="code hl_function" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a9f491d0ae7799de3471ea4fb4656c5a4">GetConnection</a>(connection_id)-&gt;<a class="code hl_function" href="../../d1/d9e/structcarla_1_1road_1_1Junction_1_1Connection.html#a06d553f83562d5a8576fb5cb96ae4fd0">AddLaneLink</a>(from, to);  <span class="comment">// 添加车道链接</span></div>
<div class="line"><a id="l00601" name="l00601"></a><span class="lineno">  601</span>}</div>
<div class="line"><a id="l00602" name="l00602"></a><span class="lineno">  602</span> </div>
<div class="line"><a id="l00603" name="l00603"></a><span class="lineno">  603</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a43256ab478dc6251af976c7b466b0c45">MapBuilder::AddJunctionController</a>(  <span class="comment">// 定义一个函数，用于添加交叉口控制器</span></div>
<div class="line"><a id="l00604" name="l00604"></a><span class="lineno">  604</span>    <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a> junction_id,  <span class="comment">// 交叉口 ID</span></div>
<div class="line"><a id="l00605" name="l00605"></a><span class="lineno">  605</span>    std::set&lt;road::ContId&gt;&amp;&amp; controllers) {  <span class="comment">// 控制器集合</span></div>
<div class="line"><a id="l00606" name="l00606"></a><span class="lineno">  606</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id) != <span class="keyword">nullptr</span>);  <span class="comment">// 确保交叉口存在</span></div>
<div class="line"><a id="l00607" name="l00607"></a><span class="lineno">  607</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id)-&gt;<a class="code hl_variable" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#ab2259731367df6d09a58035805ab9438">_controllers</a> = std::move(controllers);  <span class="comment">// 移动控制器集合到交叉口</span></div>
<div class="line"><a id="l00608" name="l00608"></a><span class="lineno">  608</span>}</div>
<div class="line"><a id="l00609" name="l00609"></a><span class="lineno">  609</span> </div>
<div class="line"><a id="l00610" name="l00610"></a><span class="lineno">  610</span><a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a60adfc4b42c04342acfea8b0acd67516">MapBuilder::GetLane</a>(</div>
<div class="line"><a id="l00611" name="l00611"></a><span class="lineno">  611</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id,</div>
<div class="line"><a id="l00612" name="l00612"></a><span class="lineno">  612</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> lane_id,</div>
<div class="line"><a id="l00613" name="l00613"></a><span class="lineno">  613</span>      <span class="keyword">const</span> <span class="keywordtype">double</span> s) {</div>
<div class="line"><a id="l00614" name="l00614"></a><span class="lineno">  614</span>    <span class="comment">// 根据给定的道路ID、车道ID和距离s，获取车道的指针</span></div>
<div class="line"><a id="l00615" name="l00615"></a><span class="lineno">  615</span>    <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">GetRoad</a>(road_id).<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#aa50c6bda434b04c6adb0fca5a26df4a9">GetLaneByDistance</a>(s, lane_id);</div>
<div class="line"><a id="l00616" name="l00616"></a><span class="lineno">  616</span>}</div>
<div class="line"><a id="l00617" name="l00617"></a><span class="lineno">  617</span> </div>
<div class="line"><a id="l00618" name="l00618"></a><span class="lineno">  618</span><a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae78c5880d7bd9edde4764d054037164d">MapBuilder::GetRoad</a>(</div>
<div class="line"><a id="l00619" name="l00619"></a><span class="lineno">  619</span>      <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id) {</div>
<div class="line"><a id="l00620" name="l00620"></a><span class="lineno">  620</span>    <span class="comment">// 根据道路ID获取道路的指针</span></div>
<div class="line"><a id="l00621" name="l00621"></a><span class="lineno">  621</span>    <span class="keywordflow">return</span> &amp;<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">GetRoad</a>(road_id);</div>
<div class="line"><a id="l00622" name="l00622"></a><span class="lineno">  622</span>}</div>
<div class="line"><a id="l00623" name="l00623"></a><span class="lineno">  623</span> </div>
<div class="line"><a id="l00624" name="l00624"></a><span class="lineno">  624</span><span class="comment">// 返回车道对象的指针</span></div>
<div class="line"><a id="l00625" name="l00625"></a><span class="lineno">  625</span><a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af7818fa90e4281abc159f08e31a9fb00">MapBuilder::GetEdgeLanePointer</a>(<a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id, <span class="keywordtype">bool</span> from_start, <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> lane_id) {</div>
<div class="line"><a id="l00626" name="l00626"></a><span class="lineno">  626</span> </div>
<div class="line"><a id="l00627" name="l00627"></a><span class="lineno">  627</span>    <span class="comment">// 检查地图数据中是否包含给定的道路ID</span></div>
<div class="line"><a id="l00628" name="l00628"></a><span class="lineno">  628</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#acc4bd7e8be09ba14390e504be5216d3f">ContainsRoad</a>(road_id)) {</div>
<div class="line"><a id="l00629" name="l00629"></a><span class="lineno">  629</span>      <span class="keywordflow">return</span> <span class="keyword">nullptr</span>; <span class="comment">// 如果不包含，返回空指针</span></div>
<div class="line"><a id="l00630" name="l00630"></a><span class="lineno">  630</span>    }</div>
<div class="line"><a id="l00631" name="l00631"></a><span class="lineno">  631</span>    <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> &amp;road = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">GetRoad</a>(road_id); <span class="comment">// 获取对应的道路</span></div>
<div class="line"><a id="l00632" name="l00632"></a><span class="lineno">  632</span> </div>
<div class="line"><a id="l00633" name="l00633"></a><span class="lineno">  633</span>    <span class="comment">// 获取车道段</span></div>
<div class="line"><a id="l00634" name="l00634"></a><span class="lineno">  634</span>    <a class="code hl_class" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">LaneSection</a> *section;</div>
<div class="line"><a id="l00635" name="l00635"></a><span class="lineno">  635</span>    <span class="keywordflow">if</span> (from_start) {</div>
<div class="line"><a id="l00636" name="l00636"></a><span class="lineno">  636</span>      section = road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a6c90082d65eb8e2fbb8d9db51136563a">GetStartSection</a>(lane_id); <span class="comment">// 从起点获取车道段</span></div>
<div class="line"><a id="l00637" name="l00637"></a><span class="lineno">  637</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00638" name="l00638"></a><span class="lineno">  638</span>      section = road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#ae4e3c1ad71021067f9a444b98f78b335">GetEndSection</a>(lane_id); <span class="comment">// 从终点获取车道段</span></div>
<div class="line"><a id="l00639" name="l00639"></a><span class="lineno">  639</span>    }</div>
<div class="line"><a id="l00640" name="l00640"></a><span class="lineno">  640</span> </div>
<div class="line"><a id="l00641" name="l00641"></a><span class="lineno">  641</span>    <span class="comment">// 获取车道</span></div>
<div class="line"><a id="l00642" name="l00642"></a><span class="lineno">  642</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(section != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道段不是空指针</span></div>
<div class="line"><a id="l00643" name="l00643"></a><span class="lineno">  643</span>    <span class="keywordflow">return</span> section-&gt;<a class="code hl_function" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a44408c7b07c60926a0bd77731ee7b723">GetLane</a>(lane_id); <span class="comment">// 返回车道的指针</span></div>
<div class="line"><a id="l00644" name="l00644"></a><span class="lineno">  644</span>}</div>
<div class="line"><a id="l00645" name="l00645"></a><span class="lineno">  645</span> </div>
<div class="line"><a id="l00646" name="l00646"></a><span class="lineno">  646</span><span class="comment">// 返回从指定车道出发的所有后续车道的指针列表（使用道路和交叉口信息）</span></div>
<div class="line"><a id="l00647" name="l00647"></a><span class="lineno">  647</span>std::vector&lt;Lane *&gt; <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ad84a5423baee8d92269aab9d8723c68a">MapBuilder::GetLaneNext</a>(</div>
<div class="line"><a id="l00648" name="l00648"></a><span class="lineno">  648</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id,</div>
<div class="line"><a id="l00649" name="l00649"></a><span class="lineno">  649</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a0eafa3a966293c70fdfd033a0b961ca3">SectionId</a> section_id,</div>
<div class="line"><a id="l00650" name="l00650"></a><span class="lineno">  650</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> lane_id) {</div>
<div class="line"><a id="l00651" name="l00651"></a><span class="lineno">  651</span>    std::vector&lt;Lane *&gt; result; <span class="comment">// 存储结果的向量</span></div>
<div class="line"><a id="l00652" name="l00652"></a><span class="lineno">  652</span> </div>
<div class="line"><a id="l00653" name="l00653"></a><span class="lineno">  653</span>    <span class="comment">// 检查地图数据中是否包含给定的道路ID</span></div>
<div class="line"><a id="l00654" name="l00654"></a><span class="lineno">  654</span>    <span class="keywordflow">if</span> (!<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#acc4bd7e8be09ba14390e504be5216d3f">ContainsRoad</a>(road_id)) {</div>
<div class="line"><a id="l00655" name="l00655"></a><span class="lineno">  655</span>      <span class="keywordflow">return</span> result; <span class="comment">// 如果不包含，返回空列表</span></div>
<div class="line"><a id="l00656" name="l00656"></a><span class="lineno">  656</span>    }</div>
<div class="line"><a id="l00657" name="l00657"></a><span class="lineno">  657</span>    <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a> &amp;road = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">GetRoad</a>(road_id); <span class="comment">// 获取对应的道路</span></div>
<div class="line"><a id="l00658" name="l00658"></a><span class="lineno">  658</span> </div>
<div class="line"><a id="l00659" name="l00659"></a><span class="lineno">  659</span>    <span class="comment">// 获取车道段</span></div>
<div class="line"><a id="l00660" name="l00660"></a><span class="lineno">  660</span>    <a class="code hl_class" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">LaneSection</a> &amp;section = road.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a51794196f4af00d66d8543c9b30aef2c">_lane_sections</a>.<a class="code hl_function" href="../../d9/dab/classcarla_1_1road_1_1LaneSectionMap.html#afd0eebe15809491819f1335b7c7157e9">GetById</a>(section_id);</div>
<div class="line"><a id="l00661" name="l00661"></a><span class="lineno">  661</span> </div>
<div class="line"><a id="l00662" name="l00662"></a><span class="lineno">  662</span>    <span class="comment">// 获取车道</span></div>
<div class="line"><a id="l00663" name="l00663"></a><span class="lineno">  663</span>    <a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a> *lane = section.<a class="code hl_function" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a44408c7b07c60926a0bd77731ee7b723">GetLane</a>(lane_id);</div>
<div class="line"><a id="l00664" name="l00664"></a><span class="lineno">  664</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保车道不是空指针</span></div>
<div class="line"><a id="l00665" name="l00665"></a><span class="lineno">  665</span> </div>
<div class="line"><a id="l00666" name="l00666"></a><span class="lineno">  666</span>    <span class="comment">// 获取后继和前驱（道路和车道）</span></div>
<div class="line"><a id="l00667" name="l00667"></a><span class="lineno">  667</span>    <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> next;</div>
<div class="line"><a id="l00668" name="l00668"></a><span class="lineno">  668</span>    <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> next_road;</div>
<div class="line"><a id="l00669" name="l00669"></a><span class="lineno">  669</span>    <span class="keywordflow">if</span> (lane_id &lt;= 0) {</div>
<div class="line"><a id="l00670" name="l00670"></a><span class="lineno">  670</span>      next_road = road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a56ce24902d4e496e30f9260718d4a376">GetSuccessor</a>(); <span class="comment">// 获取后继道路ID</span></div>
<div class="line"><a id="l00671" name="l00671"></a><span class="lineno">  671</span>      next = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#aac55d0ad269a34c3ed1bc80795fa36cc">GetSuccessor</a>(); <span class="comment">// 获取后继车道ID</span></div>
<div class="line"><a id="l00672" name="l00672"></a><span class="lineno">  672</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00673" name="l00673"></a><span class="lineno">  673</span>      next_road = road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a0d4daeed04d8276c84e7db24a36dbff6">GetPredecessor</a>(); <span class="comment">// 获取前驱道路ID</span></div>
<div class="line"><a id="l00674" name="l00674"></a><span class="lineno">  674</span>      next = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a80044b7e6e4d0412983b1a1208ff14a2">GetPredecessor</a>(); <span class="comment">// 获取前驱车道ID</span></div>
<div class="line"><a id="l00675" name="l00675"></a><span class="lineno">  675</span>    }</div>
<div class="line"><a id="l00676" name="l00676"></a><span class="lineno">  676</span> </div>
<div class="line"><a id="l00677" name="l00677"></a><span class="lineno">  677</span>    <span class="comment">// 检查后继是否是道路或交叉口</span></div>
<div class="line"><a id="l00678" name="l00678"></a><span class="lineno">  678</span>    <span class="keywordtype">bool</span> next_is_junction = !<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#acc4bd7e8be09ba14390e504be5216d3f">ContainsRoad</a>(next_road);</div>
<div class="line"><a id="l00679" name="l00679"></a><span class="lineno">  679</span>    <span class="keywordtype">double</span> s = section.<a class="code hl_function" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a2a83bca663a2b7b6388daebed95704a9">GetDistance</a>(); <span class="comment">// 获取车道段的距离</span></div>
<div class="line"><a id="l00680" name="l00680"></a><span class="lineno">  680</span> </div>
<div class="line"><a id="l00681" name="l00681"></a><span class="lineno">  681</span>    <span class="comment">// 检查是否在中间的车道段</span></div>
<div class="line"><a id="l00682" name="l00682"></a><span class="lineno">  682</span>    <span class="keywordflow">if</span> ((lane_id &gt; 0 &amp;&amp; s &gt; 0) ||</div>
<div class="line"><a id="l00683" name="l00683"></a><span class="lineno">  683</span>        (lane_id &lt;= 0 &amp;&amp; road.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a51794196f4af00d66d8543c9b30aef2c">_lane_sections</a>.upper_bound(s) != road.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a51794196f4af00d66d8543c9b30aef2c">_lane_sections</a>.end())) {</div>
<div class="line"><a id="l00684" name="l00684"></a><span class="lineno">  684</span>      <span class="comment">// 检查车道是否有后继链接（如果没有，说明它在中间段结束）</span></div>
<div class="line"><a id="l00685" name="l00685"></a><span class="lineno">  685</span>      <span class="keywordflow">if</span> (next != 0 || (lane_id == 0 &amp;&amp; next == 0)) {</div>
<div class="line"><a id="l00686" name="l00686"></a><span class="lineno">  686</span>        <span class="comment">// 切换到下一个/上一个车道段</span></div>
<div class="line"><a id="l00687" name="l00687"></a><span class="lineno">  687</span>        <span class="keywordflow">if</span> (lane_id &lt;= 0) {</div>
<div class="line"><a id="l00688" name="l00688"></a><span class="lineno">  688</span>          result.push_back(road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a7e9150dc29a3ab8b9a529ffb11205980">GetNextLane</a>(s, next)); <span class="comment">// 获取下一个车道</span></div>
<div class="line"><a id="l00689" name="l00689"></a><span class="lineno">  689</span>        } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00690" name="l00690"></a><span class="lineno">  690</span>          result.push_back(road.<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a242d8d41927bee937a2ac46247a78c5c">GetPrevLane</a>(s, next)); <span class="comment">// 获取上一个车道</span></div>
<div class="line"><a id="l00691" name="l00691"></a><span class="lineno">  691</span>        }</div>
<div class="line"><a id="l00692" name="l00692"></a><span class="lineno">  692</span>      }</div>
<div class="line"><a id="l00693" name="l00693"></a><span class="lineno">  693</span>    } <span class="keywordflow">else</span> <span class="keywordflow">if</span> (!next_is_junction) {</div>
<div class="line"><a id="l00694" name="l00694"></a><span class="lineno">  694</span>      <span class="comment">// 切换到另一条道路/交叉口</span></div>
<div class="line"><a id="l00695" name="l00695"></a><span class="lineno">  695</span>      <span class="keywordflow">if</span> (next != 0 || (lane_id == 0 &amp;&amp; next == 0)) {</div>
<div class="line"><a id="l00696" name="l00696"></a><span class="lineno">  696</span>        <span class="comment">// 单一路段</span></div>
<div class="line"><a id="l00697" name="l00697"></a><span class="lineno">  697</span>        result.push_back(<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af7818fa90e4281abc159f08e31a9fb00">GetEdgeLanePointer</a>(next_road, (next &lt;= 0), next)); <span class="comment">// 获取边缘车道指针</span></div>
<div class="line"><a id="l00698" name="l00698"></a><span class="lineno">  698</span>      }</div>
<div class="line"><a id="l00699" name="l00699"></a><span class="lineno">  699</span>    } <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l00700" name="l00700"></a><span class="lineno">  700</span>      <span class="comment">// 多条道路（交叉口）</span></div>
<div class="line"><a id="l00701" name="l00701"></a><span class="lineno">  701</span><span class="comment"></span> </div>
<div class="line"><a id="l00702" name="l00702"></a><span class="lineno">  702</span><span class="comment">      /// @todo 是否正确使用道路ID作为段ID？（NS: 我只是添加了这个强制转换以避免编译器警告）。</span></div>
<div class="line"><a id="l00703" name="l00703"></a><span class="lineno">  703</span><span class="comment"></span>      <span class="keyword">auto</span> next_road_as_junction = <span class="keyword">static_cast&lt;</span><a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a><span class="keyword">&gt;</span>(next_road);</div>
<div class="line"><a id="l00704" name="l00704"></a><span class="lineno">  704</span>      <span class="keyword">auto</span> options = <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a9f7acb42642bed1a1bf1a21c2b1c9931">GetJunctionLanes</a>(next_road_as_junction, road_id, lane_id); <span class="comment">// 获取交叉口车道</span></div>
<div class="line"><a id="l00705" name="l00705"></a><span class="lineno">  705</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> opt : options) {</div>
<div class="line"><a id="l00706" name="l00706"></a><span class="lineno">  706</span>        result.push_back(<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af7818fa90e4281abc159f08e31a9fb00">GetEdgeLanePointer</a>(opt.first, (opt.second &lt;= 0), opt.second)); <span class="comment">// 将选项添加到结果中</span></div>
<div class="line"><a id="l00707" name="l00707"></a><span class="lineno">  707</span>      }</div>
<div class="line"><a id="l00708" name="l00708"></a><span class="lineno">  708</span>    }</div>
<div class="line"><a id="l00709" name="l00709"></a><span class="lineno">  709</span> </div>
<div class="line"><a id="l00710" name="l00710"></a><span class="lineno">  710</span>    <span class="keywordflow">return</span> result; <span class="comment">// 返回车道指针列表</span></div>
<div class="line"><a id="l00711" name="l00711"></a><span class="lineno">  711</span>}</div>
<div class="line"><a id="l00712" name="l00712"></a><span class="lineno">  712</span> </div>
<div class="line"><a id="l00713" name="l00713"></a><span class="lineno">  713</span>std::vector&lt;std::pair&lt;RoadId, LaneId&gt;&gt; <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a9f7acb42642bed1a1bf1a21c2b1c9931">MapBuilder::GetJunctionLanes</a>(</div>
<div class="line"><a id="l00714" name="l00714"></a><span class="lineno">  714</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">JuncId</a> junction_id,</div>
<div class="line"><a id="l00715" name="l00715"></a><span class="lineno">  715</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">RoadId</a> road_id,</div>
<div class="line"><a id="l00716" name="l00716"></a><span class="lineno">  716</span>      <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> lane_id) {</div>
<div class="line"><a id="l00717" name="l00717"></a><span class="lineno">  717</span>    std::vector&lt;std::pair&lt;RoadId, LaneId&gt;&gt; result; <span class="comment">// 存储结果的向量</span></div>
<div class="line"><a id="l00718" name="l00718"></a><span class="lineno">  718</span> </div>
<div class="line"><a id="l00719" name="l00719"></a><span class="lineno">  719</span>    <span class="comment">// 获取交叉口（具体实现未显示）</span></div>
<div class="line"><a id="l00720" name="l00720"></a><span class="lineno">  720</span>   <a class="code hl_class" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html">Junction</a> *junction = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">GetJunction</a>(junction_id); <span class="comment">// 根据 junction_id 获取交叉口指针</span></div>
<div class="line"><a id="l00721" name="l00721"></a><span class="lineno">  721</span><span class="keywordflow">if</span> (junction == <span class="keyword">nullptr</span>) { <span class="comment">// 检查交叉口是否为空</span></div>
<div class="line"><a id="l00722" name="l00722"></a><span class="lineno">  722</span>  <span class="keywordflow">return</span> result; <span class="comment">// 如果为空，返回结果</span></div>
<div class="line"><a id="l00723" name="l00723"></a><span class="lineno">  723</span>}</div>
<div class="line"><a id="l00724" name="l00724"></a><span class="lineno">  724</span> </div>
<div class="line"><a id="l00725" name="l00725"></a><span class="lineno">  725</span><span class="comment">// 检查所有连接</span></div>
<div class="line"><a id="l00726" name="l00726"></a><span class="lineno">  726</span><span class="keywordflow">for</span> (<span class="keyword">auto</span> con : junction-&gt;_connections) { <span class="comment">// 遍历交叉口的所有连接</span></div>
<div class="line"><a id="l00727" name="l00727"></a><span class="lineno">  727</span>  <span class="comment">// 仅处理与我们道路相关的连接</span></div>
<div class="line"><a id="l00728" name="l00728"></a><span class="lineno">  728</span>  <span class="keywordflow">if</span> (con.second.incoming_road == road_id) { <span class="comment">// 如果 incoming_road 与 road_id 匹配</span></div>
<div class="line"><a id="l00729" name="l00729"></a><span class="lineno">  729</span>    <span class="comment">// 对于中心车道，连接车道 ID 始终为 0，不需要搜索，因为它不在交叉口中</span></div>
<div class="line"><a id="l00730" name="l00730"></a><span class="lineno">  730</span>    <span class="keywordflow">if</span> (lane_id == 0) { <span class="comment">// 如果车道 ID 为 0</span></div>
<div class="line"><a id="l00731" name="l00731"></a><span class="lineno">  731</span>      result.push_back(std::make_pair(con.second.connecting_road, 0)); <span class="comment">// 将连接的道路和车道 ID 0 添加到结果中</span></div>
<div class="line"><a id="l00732" name="l00732"></a><span class="lineno">  732</span>    } <span class="keywordflow">else</span> { <span class="comment">// 如果车道 ID 不为 0</span></div>
<div class="line"><a id="l00733" name="l00733"></a><span class="lineno">  733</span>      <span class="comment">// 检查所有车道链接</span></div>
<div class="line"><a id="l00734" name="l00734"></a><span class="lineno">  734</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> link : con.second.lane_links) { <span class="comment">// 遍历连接的车道链接</span></div>
<div class="line"><a id="l00735" name="l00735"></a><span class="lineno">  735</span>        <span class="comment">// 是否是我们的车道 ID？</span></div>
<div class="line"><a id="l00736" name="l00736"></a><span class="lineno">  736</span>        <span class="keywordflow">if</span> (link.from == lane_id) { <span class="comment">// 如果链接的起始车道等于当前车道 ID</span></div>
<div class="line"><a id="l00737" name="l00737"></a><span class="lineno">  737</span>          <span class="comment">// 添加为选项</span></div>
<div class="line"><a id="l00738" name="l00738"></a><span class="lineno">  738</span>          result.push_back(std::make_pair(con.second.connecting_road, link.to)); <span class="comment">// 将连接的道路和目标车道添加到结果中</span></div>
<div class="line"><a id="l00739" name="l00739"></a><span class="lineno">  739</span>        }</div>
<div class="line"><a id="l00740" name="l00740"></a><span class="lineno">  740</span>      }</div>
<div class="line"><a id="l00741" name="l00741"></a><span class="lineno">  741</span>    }</div>
<div class="line"><a id="l00742" name="l00742"></a><span class="lineno">  742</span>  }</div>
<div class="line"><a id="l00743" name="l00743"></a><span class="lineno">  743</span>}</div>
<div class="line"><a id="l00744" name="l00744"></a><span class="lineno">  744</span> </div>
<div class="line"><a id="l00745" name="l00745"></a><span class="lineno">  745</span><span class="keywordflow">return</span> result; <span class="comment">// 返回结果</span></div>
<div class="line"><a id="l00746" name="l00746"></a><span class="lineno">  746</span>}</div>
<div class="line"><a id="l00747" name="l00747"></a><span class="lineno">  747</span> </div>
<div class="line"><a id="l00748" name="l00748"></a><span class="lineno">  748</span><span class="comment">// 为下一个车道分配指针</span></div>
<div class="line"><a id="l00749" name="l00749"></a><span class="lineno">  749</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae3f4192b6f1b0737a5d12923fc8da239">MapBuilder::CreatePointersBetweenRoadSegments</a>(<span class="keywordtype">void</span>) {</div>
<div class="line"><a id="l00750" name="l00750"></a><span class="lineno">  750</span>  <span class="comment">// 处理每个车道以定义其下一个车道</span></div>
<div class="line"><a id="l00751" name="l00751"></a><span class="lineno">  751</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;road : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>._roads) { <span class="comment">// 遍历地图数据中的所有道路</span></div>
<div class="line"><a id="l00752" name="l00752"></a><span class="lineno">  752</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;section : road.second._lane_sections) { <span class="comment">// 遍历每条道路的车道段</span></div>
<div class="line"><a id="l00753" name="l00753"></a><span class="lineno">  753</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;lane : section.second._lanes) { <span class="comment">// 遍历每个车道</span></div>
<div class="line"><a id="l00754" name="l00754"></a><span class="lineno">  754</span> </div>
<div class="line"><a id="l00755" name="l00755"></a><span class="lineno">  755</span>        <span class="comment">// 分配下一个车道指针</span></div>
<div class="line"><a id="l00756" name="l00756"></a><span class="lineno">  756</span>        lane.second.<a class="code hl_variable" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a24c2344469c5dbcae990bd1212462a5a">_next_lanes</a> = <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ad84a5423baee8d92269aab9d8723c68a">GetLaneNext</a>(road.first, section.second.<a class="code hl_variable" href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#adbb28d9d213f5f9adbdb30fd20dee17f">_id</a>, lane.first); <span class="comment">// 获取下一个车道</span></div>
<div class="line"><a id="l00757" name="l00757"></a><span class="lineno">  757</span> </div>
<div class="line"><a id="l00758" name="l00758"></a><span class="lineno">  758</span>        <span class="comment">// 将找到的每个车道添加为其前驱</span></div>
<div class="line"><a id="l00759" name="l00759"></a><span class="lineno">  759</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> next_lane : lane.second._next_lanes) { <span class="comment">// 遍历下一个车道</span></div>
<div class="line"><a id="l00760" name="l00760"></a><span class="lineno">  760</span>          <span class="comment">// 添加为前驱</span></div>
<div class="line"><a id="l00761" name="l00761"></a><span class="lineno">  761</span>          <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(next_lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保下一个车道不为空</span></div>
<div class="line"><a id="l00762" name="l00762"></a><span class="lineno">  762</span>          next_lane-&gt;_prev_lanes.push_back(&amp;lane.second); <span class="comment">// 将当前车道添加到下一个车道的前驱列表中</span></div>
<div class="line"><a id="l00763" name="l00763"></a><span class="lineno">  763</span>        }</div>
<div class="line"><a id="l00764" name="l00764"></a><span class="lineno">  764</span> </div>
<div class="line"><a id="l00765" name="l00765"></a><span class="lineno">  765</span>      }</div>
<div class="line"><a id="l00766" name="l00766"></a><span class="lineno">  766</span>    }</div>
<div class="line"><a id="l00767" name="l00767"></a><span class="lineno">  767</span>  }</div>
<div class="line"><a id="l00768" name="l00768"></a><span class="lineno">  768</span> </div>
<div class="line"><a id="l00769" name="l00769"></a><span class="lineno">  769</span>  <span class="comment">// 处理每个车道以定义其下一个车道</span></div>
<div class="line"><a id="l00770" name="l00770"></a><span class="lineno">  770</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;road : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>._roads) { <span class="comment">// 遍历地图数据中的所有道路</span></div>
<div class="line"><a id="l00771" name="l00771"></a><span class="lineno">  771</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;section : road.second._lane_sections) { <span class="comment">// 遍历每条道路的车道段</span></div>
<div class="line"><a id="l00772" name="l00772"></a><span class="lineno">  772</span>      <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;lane : section.second._lanes) { <span class="comment">// 遍历每个车道</span></div>
<div class="line"><a id="l00773" name="l00773"></a><span class="lineno">  773</span> </div>
<div class="line"><a id="l00774" name="l00774"></a><span class="lineno">  774</span>        <span class="comment">// 添加下一个道路</span></div>
<div class="line"><a id="l00775" name="l00775"></a><span class="lineno">  775</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> next_lane : lane.second._next_lanes) { <span class="comment">// 遍历下一个车道</span></div>
<div class="line"><a id="l00776" name="l00776"></a><span class="lineno">  776</span>          <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(next_lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保下一个车道不为空</span></div>
<div class="line"><a id="l00777" name="l00777"></a><span class="lineno">  777</span>          <span class="comment">// 避免同一路径</span></div>
<div class="line"><a id="l00778" name="l00778"></a><span class="lineno">  778</span>          <span class="keywordflow">if</span> (next_lane-&gt;GetRoad() != &amp;road.second) { <span class="comment">// 如果下一个车道的道路不是当前道路</span></div>
<div class="line"><a id="l00779" name="l00779"></a><span class="lineno">  779</span>            <span class="keywordflow">if</span> (std::find(road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a57e376489ef0d7fe752a310a18adf0c8">_nexts</a>.begin(), road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a57e376489ef0d7fe752a310a18adf0c8">_nexts</a>.end(),</div>
<div class="line"><a id="l00780" name="l00780"></a><span class="lineno">  780</span>                next_lane-&gt;GetRoad()) == road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a57e376489ef0d7fe752a310a18adf0c8">_nexts</a>.end()) { <span class="comment">// 检查下一个道路是否已经存在于列表中</span></div>
<div class="line"><a id="l00781" name="l00781"></a><span class="lineno">  781</span>              road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a57e376489ef0d7fe752a310a18adf0c8">_nexts</a>.push_back(next_lane-&gt;GetRoad()); <span class="comment">// 添加下一个道路</span></div>
<div class="line"><a id="l00782" name="l00782"></a><span class="lineno">  782</span>            }</div>
<div class="line"><a id="l00783" name="l00783"></a><span class="lineno">  783</span>          }</div>
<div class="line"><a id="l00784" name="l00784"></a><span class="lineno">  784</span>        }</div>
<div class="line"><a id="l00785" name="l00785"></a><span class="lineno">  785</span> </div>
<div class="line"><a id="l00786" name="l00786"></a><span class="lineno">  786</span>        <span class="comment">// 添加前驱道路</span></div>
<div class="line"><a id="l00787" name="l00787"></a><span class="lineno">  787</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> prev_lane : lane.second._prev_lanes) { <span class="comment">// 遍历前驱车道</span></div>
<div class="line"><a id="l00788" name="l00788"></a><span class="lineno">  788</span>          <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(prev_lane != <span class="keyword">nullptr</span>); <span class="comment">// 确保前驱车道不为空</span></div>
<div class="line"><a id="l00789" name="l00789"></a><span class="lineno">  789</span>          <span class="comment">// 避免同一路径</span></div>
<div class="line"><a id="l00790" name="l00790"></a><span class="lineno">  790</span>          <span class="keywordflow">if</span> (prev_lane-&gt;GetRoad() != &amp;road.second) { <span class="comment">// 如果前驱车道的道路不是当前道路</span></div>
<div class="line"><a id="l00791" name="l00791"></a><span class="lineno">  791</span>            <span class="keywordflow">if</span> (std::find(road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a58e44ae16af1a84e2d68de7d64a4085c">_prevs</a>.begin(), road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a58e44ae16af1a84e2d68de7d64a4085c">_prevs</a>.end(),</div>
<div class="line"><a id="l00792" name="l00792"></a><span class="lineno">  792</span>                prev_lane-&gt;GetRoad()) == road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a58e44ae16af1a84e2d68de7d64a4085c">_prevs</a>.end()) { <span class="comment">// 检查前驱道路是否已经存在于列表中</span></div>
<div class="line"><a id="l00793" name="l00793"></a><span class="lineno">  793</span>              road.second.<a class="code hl_variable" href="../../dd/de6/classcarla_1_1road_1_1Road.html#a58e44ae16af1a84e2d68de7d64a4085c">_prevs</a>.push_back(prev_lane-&gt;GetRoad()); <span class="comment">// 添加前驱道路</span></div>
<div class="line"><a id="l00794" name="l00794"></a><span class="lineno">  794</span>            }</div>
<div class="line"><a id="l00795" name="l00795"></a><span class="lineno">  795</span>          }</div>
<div class="line"><a id="l00796" name="l00796"></a><span class="lineno">  796</span>        }</div>
<div class="line"><a id="l00797" name="l00797"></a><span class="lineno">  797</span> </div>
<div class="line"><a id="l00798" name="l00798"></a><span class="lineno">  798</span>      }</div>
<div class="line"><a id="l00799" name="l00799"></a><span class="lineno">  799</span>    }</div>
<div class="line"><a id="l00800" name="l00800"></a><span class="lineno">  800</span>  }</div>
<div class="line"><a id="l00801" name="l00801"></a><span class="lineno">  801</span>}</div>
<div class="line"><a id="l00802" name="l00802"></a><span class="lineno">  802</span> </div>
<div class="line"><a id="l00803" name="l00803"></a><span class="lineno">  803</span><a class="code hl_class" href="../../de/da4/classcarla_1_1geom_1_1Transform.html">geom::Transform</a> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a59c3796375f1ca76276763f94b923afc">MapBuilder::ComputeSignalTransform</a>(std::unique_ptr&lt;Signal&gt; &amp;signal, <a class="code hl_class" href="../../da/d3b/classcarla_1_1road_1_1MapData.html">MapData</a> &amp;data) {</div>
<div class="line"><a id="l00804" name="l00804"></a><span class="lineno">  804</span>  <a class="code hl_struct" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html">DirectedPoint</a> point = data.<a class="code hl_function" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">GetRoad</a>(signal-&gt;_road_id).<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#add5e8cae755c9981a715426d29f14887">GetDirectedPointInNoLaneOffset</a>(signal-&gt;_s); <span class="comment">// 获取指定道路上的导向点</span></div>
<div class="line"><a id="l00805" name="l00805"></a><span class="lineno">  805</span>  point.<a class="code hl_function" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a058ad3be7f22229ea802e569ab0e8b7e">ApplyLateralOffset</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(-signal-&gt;_t)); <span class="comment">// 应用横向偏移</span></div>
<div class="line"><a id="l00806" name="l00806"></a><span class="lineno">  806</span>  point.<a class="code hl_variable" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a4b9f9bf824ad3ffaca1a52ecb1918ad3">location</a>.<a class="code hl_variable" href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html#a5ca01ca36e9be8d143731da42df9ac1c">y</a> *= -1; <span class="comment">// Unreal Y 轴修正</span></div>
<div class="line"><a id="l00807" name="l00807"></a><span class="lineno">  807</span>  point.<a class="code hl_variable" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a4b9f9bf824ad3ffaca1a52ecb1918ad3">location</a>.<a class="code hl_variable" href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html#ab319cb76841047b082bce5047a6da98a">z</a> += <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(signal-&gt;_zOffset); <span class="comment">// 应用 Z 轴偏移</span></div>
<div class="line"><a id="l00808" name="l00808"></a><span class="lineno">  808</span>  <a class="code hl_class" href="../../de/da4/classcarla_1_1geom_1_1Transform.html">geom::Transform</a> transform(point.<a class="code hl_variable" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a4b9f9bf824ad3ffaca1a52ecb1918ad3">location</a>, <a class="code hl_class" href="../../d8/dba/classcarla_1_1geom_1_1Rotation.html">geom::Rotation</a>( <span class="comment">// 创建变换对象</span></div>
<div class="line"><a id="l00809" name="l00809"></a><span class="lineno">  809</span>      <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(signal-&gt;_pitch)), <span class="comment">// 转换并应用俯仰角</span></div>
<div class="line"><a id="l00810" name="l00810"></a><span class="lineno">  810</span>      <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(-(point.<a class="code hl_variable" href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a7591ba833bf3d06ba311914d6631757d">tangent</a> + signal-&gt;_hOffset))), <span class="comment">// 转换并应用偏航角</span></div>
<div class="line"><a id="l00811" name="l00811"></a><span class="lineno">  811</span>      <a class="code hl_function" href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">geom::Math::ToDegrees</a>(<span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(signal-&gt;_roll)))); <span class="comment">// 转换并应用滚转角</span></div>
<div class="line"><a id="l00812" name="l00812"></a><span class="lineno">  812</span>  <span class="keywordflow">return</span> transform; <span class="comment">// 返回变换对象</span></div>
<div class="line"><a id="l00813" name="l00813"></a><span class="lineno">  813</span>}</div>
<div class="line"><a id="l00814" name="l00814"></a><span class="lineno">  814</span> </div>
<div class="line"><a id="l00815" name="l00815"></a><span class="lineno">  815</span>  <span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae08e6f0bdd3b6efe2e30ca19effd3a97">MapBuilder::SolveSignalReferencesAndTransforms</a>() {</div>
<div class="line"><a id="l00816" name="l00816"></a><span class="lineno">  816</span>    <span class="comment">// 遍历临时信号引用容器</span></div>
<div class="line"><a id="l00817" name="l00817"></a><span class="lineno">  817</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span> signal_reference : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>){</div>
<div class="line"><a id="l00818" name="l00818"></a><span class="lineno">  818</span>        <span class="comment">// 将信号引用的信号指针设置为临时信号容器中的信号</span></div>
<div class="line"><a id="l00819" name="l00819"></a><span class="lineno">  819</span>        signal_reference-&gt;<a class="code hl_variable" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ac3a2a7ee39de73cfce80b50c9af8ff1f">_signal</a> =</div>
<div class="line"><a id="l00820" name="l00820"></a><span class="lineno">  820</span>            <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>[signal_reference-&gt;<a class="code hl_variable" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#acf4c1bb47ec1a4fac2505022dc551fcd">_signal_id</a>].get();</div>
<div class="line"><a id="l00821" name="l00821"></a><span class="lineno">  821</span>    }</div>
<div class="line"><a id="l00822" name="l00822"></a><span class="lineno">  822</span> </div>
<div class="line"><a id="l00823" name="l00823"></a><span class="lineno">  823</span>    <span class="comment">// 遍历临时信号容器</span></div>
<div class="line"><a id="l00824" name="l00824"></a><span class="lineno">  824</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span>&amp; signal_pair : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>) {</div>
<div class="line"><a id="l00825" name="l00825"></a><span class="lineno">  825</span>        <span class="keyword">auto</span>&amp; signal = signal_pair.second; <span class="comment">// 获取信号对象</span></div>
<div class="line"><a id="l00826" name="l00826"></a><span class="lineno">  826</span>        <span class="keywordflow">if</span> (signal-&gt;_using_inertial_position) { <span class="comment">// 如果使用惯性位置则跳过</span></div>
<div class="line"><a id="l00827" name="l00827"></a><span class="lineno">  827</span>            <span class="keywordflow">continue</span>;</div>
<div class="line"><a id="l00828" name="l00828"></a><span class="lineno">  828</span>        }</div>
<div class="line"><a id="l00829" name="l00829"></a><span class="lineno">  829</span>        <span class="comment">// 计算信号变换</span></div>
<div class="line"><a id="l00830" name="l00830"></a><span class="lineno">  830</span>        <span class="keyword">auto</span> transform = <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a59c3796375f1ca76276763f94b923afc">ComputeSignalTransform</a>(signal, <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>);</div>
<div class="line"><a id="l00831" name="l00831"></a><span class="lineno">  831</span>        <span class="comment">// 如果信号类型是交通灯</span></div>
<div class="line"><a id="l00832" name="l00832"></a><span class="lineno">  832</span>        <span class="keywordflow">if</span> (<a class="code hl_function" href="../../db/d47/classcarla_1_1road_1_1SignalType.html#aa4bab3287ce92cf7e1ba04767775ebf0">SignalType::IsTrafficLight</a>(signal-&gt;GetType())) {</div>
<div class="line"><a id="l00833" name="l00833"></a><span class="lineno">  833</span>            <span class="comment">// 调整交通灯位置</span></div>
<div class="line"><a id="l00834" name="l00834"></a><span class="lineno">  834</span>            transform.location = transform.location +</div>
<div class="line"><a id="l00835" name="l00835"></a><span class="lineno">  835</span>                <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a>(transform.GetForwardVector()*0.25);</div>
<div class="line"><a id="l00836" name="l00836"></a><span class="lineno">  836</span>        }</div>
<div class="line"><a id="l00837" name="l00837"></a><span class="lineno">  837</span>        <span class="comment">// 设置信号的变换属性</span></div>
<div class="line"><a id="l00838" name="l00838"></a><span class="lineno">  838</span>        signal-&gt;_transform = transform;</div>
<div class="line"><a id="l00839" name="l00839"></a><span class="lineno">  839</span>    }</div>
<div class="line"><a id="l00840" name="l00840"></a><span class="lineno">  840</span> </div>
<div class="line"><a id="l00841" name="l00841"></a><span class="lineno">  841</span>    <span class="comment">// 移动临时信号容器到地图数据中</span></div>
<div class="line"><a id="l00842" name="l00842"></a><span class="lineno">  842</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#afb261aeb79a5c2784d44abf7cfa1326c">_signals</a> = std::move(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">_temp_signal_container</a>);</div>
<div class="line"><a id="l00843" name="l00843"></a><span class="lineno">  843</span> </div>
<div class="line"><a id="l00844" name="l00844"></a><span class="lineno">  844</span>    <span class="comment">// 生成信号引用的默认有效性</span></div>
<div class="line"><a id="l00845" name="l00845"></a><span class="lineno">  845</span>    <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ac5ab2aea311a2bb6e43258c73bd57b49">GenerateDefaultValiditiesForSignalReferences</a>();</div>
<div class="line"><a id="l00846" name="l00846"></a><span class="lineno">  846</span>}</div>
<div class="line"><a id="l00847" name="l00847"></a><span class="lineno">  847</span> </div>
<div class="line"><a id="l00848" name="l00848"></a><span class="lineno">  848</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a76406231d5de92bdeda1b869d0da7eab">MapBuilder::SolveControllerAndJuntionReferences</a>() {</div>
<div class="line"><a id="l00849" name="l00849"></a><span class="lineno">  849</span>    <span class="comment">// 遍历地图数据中的所有交叉口</span></div>
<div class="line"><a id="l00850" name="l00850"></a><span class="lineno">  850</span>    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; junction : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>._junctions) {</div>
<div class="line"><a id="l00851" name="l00851"></a><span class="lineno">  851</span>        <span class="comment">// 遍历每个交叉口的控制器</span></div>
<div class="line"><a id="l00852" name="l00852"></a><span class="lineno">  852</span>        <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span>&amp; controller : junction.second._controllers) {</div>
<div class="line"><a id="l00853" name="l00853"></a><span class="lineno">  853</span>            <span class="comment">// 在地图数据中查找控制器</span></div>
<div class="line"><a id="l00854" name="l00854"></a><span class="lineno">  854</span>            <span class="keyword">auto</span> it = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a98e1b8ce8d1bd034acd4aace4d2dd8b4">_controllers</a>.find(controller);</div>
<div class="line"><a id="l00855" name="l00855"></a><span class="lineno">  855</span>            <span class="keywordflow">if</span>(it != <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a98e1b8ce8d1bd034acd4aace4d2dd8b4">_controllers</a>.end()){ <span class="comment">// 如果找到了控制器</span></div>
<div class="line"><a id="l00856" name="l00856"></a><span class="lineno">  856</span>                <span class="keywordflow">if</span>( it-&gt;second != <span class="keyword">nullptr</span> ){ <span class="comment">// 确保控制器不为空</span></div>
<div class="line"><a id="l00857" name="l00857"></a><span class="lineno">  857</span>                    <span class="comment">// 将交叉口添加到控制器的交叉口集合中</span></div>
<div class="line"><a id="l00858" name="l00858"></a><span class="lineno">  858</span>                    it-&gt;second-&gt;_junctions.insert(junction.first);</div>
<div class="line"><a id="l00859" name="l00859"></a><span class="lineno">  859</span>                    <span class="comment">// 遍历控制器管理的信号</span></div>
<div class="line"><a id="l00860" name="l00860"></a><span class="lineno">  860</span>                    <span class="keywordflow">for</span>(<span class="keyword">const</span> <span class="keyword">auto</span> &amp; signal : it-&gt;second-&gt;_signals) {</div>
<div class="line"><a id="l00861" name="l00861"></a><span class="lineno">  861</span>                        <span class="comment">// 查找信号在地图数据中的位置</span></div>
<div class="line"><a id="l00862" name="l00862"></a><span class="lineno">  862</span>                        <span class="keyword">auto</span> signal_it = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#afb261aeb79a5c2784d44abf7cfa1326c">_signals</a>.find(signal);</div>
<div class="line"><a id="l00863" name="l00863"></a><span class="lineno">  863</span>                        <span class="keywordflow">if</span>( signal_it-&gt;second != <span class="keyword">nullptr</span> ){ <span class="comment">// 确保信号不为空</span></div>
<div class="line"><a id="l00864" name="l00864"></a><span class="lineno">  864</span>                            <span class="comment">// 将控制器添加到信号的控制器集合中</span></div>
<div class="line"><a id="l00865" name="l00865"></a><span class="lineno">  865</span>                            signal_it-&gt;second-&gt;_controllers.insert(controller);</div>
<div class="line"><a id="l00866" name="l00866"></a><span class="lineno">  866</span>                        }</div>
<div class="line"><a id="l00867" name="l00867"></a><span class="lineno">  867</span>                    }</div>
<div class="line"><a id="l00868" name="l00868"></a><span class="lineno">  868</span>                }</div>
<div class="line"><a id="l00869" name="l00869"></a><span class="lineno">  869</span>            }</div>
<div class="line"><a id="l00870" name="l00870"></a><span class="lineno">  870</span>        }</div>
<div class="line"><a id="l00871" name="l00871"></a><span class="lineno">  871</span>    }</div>
<div class="line"><a id="l00872" name="l00872"></a><span class="lineno">  872</span>}</div>
<div class="line"><a id="l00873" name="l00873"></a><span class="lineno">  873</span> </div>
<div class="line"><a id="l00874" name="l00874"></a><span class="lineno">  874</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab0d9fe008defb1501769cf62f8cadf14">MapBuilder::CreateJunctionBoundingBoxes</a>(<a class="code hl_class" href="../../d7/db0/classMap.html">Map</a> &amp;map) {</div>
<div class="line"><a id="l00875" name="l00875"></a><span class="lineno">  875</span>    <span class="comment">// 遍历地图中的所有交叉口</span></div>
<div class="line"><a id="l00876" name="l00876"></a><span class="lineno">  876</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;junctionpair : map._data.GetJunctions()) {</div>
<div class="line"><a id="l00877" name="l00877"></a><span class="lineno">  877</span>        <span class="keyword">auto</span>* junction = map.GetJunction(junctionpair.first); <span class="comment">// 获取交叉口对象</span></div>
<div class="line"><a id="l00878" name="l00878"></a><span class="lineno">  878</span>        <span class="keyword">auto</span> waypoints = map.GetJunctionWaypoints(junction-&gt;<a class="code hl_function" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a736aa443c045123306d0368512af278a">GetId</a>(), <a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247aed36a1ef76a59ee3f15180e0441188ad">Lane::LaneType::Any</a>); <span class="comment">// 获取交叉口的路径点</span></div>
<div class="line"><a id="l00879" name="l00879"></a><span class="lineno">  879</span>        <span class="keyword">const</span> <span class="keywordtype">int</span> number_intervals = 10; <span class="comment">// 定义分段数量</span></div>
<div class="line"><a id="l00880" name="l00880"></a><span class="lineno">  880</span> </div>
<div class="line"><a id="l00881" name="l00881"></a><span class="lineno">  881</span>        <span class="comment">// 初始化最小和最大坐标</span></div>
<div class="line"><a id="l00882" name="l00882"></a><span class="lineno">  882</span>        <span class="keywordtype">float</span> minx = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00883" name="l00883"></a><span class="lineno">  883</span>        <span class="keywordtype">float</span> miny = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00884" name="l00884"></a><span class="lineno">  884</span>        <span class="keywordtype">float</span> minz = std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00885" name="l00885"></a><span class="lineno">  885</span>        <span class="keywordtype">float</span> maxx = -std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00886" name="l00886"></a><span class="lineno">  886</span>        <span class="keywordtype">float</span> maxy = -std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00887" name="l00887"></a><span class="lineno">  887</span>        <span class="keywordtype">float</span> maxz = -std::numeric_limits&lt;float&gt;::max();</div>
<div class="line"><a id="l00888" name="l00888"></a><span class="lineno">  888</span> </div>
<div class="line"><a id="l00889" name="l00889"></a><span class="lineno">  889</span>        <span class="comment">// 定义获取最小和最大坐标的Lambda函数</span></div>
<div class="line"><a id="l00890" name="l00890"></a><span class="lineno">  890</span>        <span class="keyword">auto</span> get_min_max = [&amp;](<a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">geom::Location</a> position) {</div>
<div class="line"><a id="l00891" name="l00891"></a><span class="lineno">  891</span>            <span class="comment">// 更新最小坐标</span></div>
<div class="line"><a id="l00892" name="l00892"></a><span class="lineno">  892</span>            <span class="keywordflow">if</span> (position.x &lt; minx) {</div>
<div class="line"><a id="l00893" name="l00893"></a><span class="lineno">  893</span>                minx = position.x;</div>
<div class="line"><a id="l00894" name="l00894"></a><span class="lineno">  894</span>            }</div>
<div class="line"><a id="l00895" name="l00895"></a><span class="lineno">  895</span>            <span class="keywordflow">if</span> (position.y &lt; miny) {</div>
<div class="line"><a id="l00896" name="l00896"></a><span class="lineno">  896</span>                miny = position.y;</div>
<div class="line"><a id="l00897" name="l00897"></a><span class="lineno">  897</span>            }</div>
<div class="line"><a id="l00898" name="l00898"></a><span class="lineno">  898</span>            <span class="keywordflow">if</span> (position.z &lt; minz) {</div>
<div class="line"><a id="l00899" name="l00899"></a><span class="lineno">  899</span>                minz = position.z;</div>
<div class="line"><a id="l00900" name="l00900"></a><span class="lineno">  900</span>            }</div>
<div class="line"><a id="l00901" name="l00901"></a><span class="lineno">  901</span> </div>
<div class="line"><a id="l00902" name="l00902"></a><span class="lineno">  902</span>            <span class="comment">// 更新最大坐标</span></div>
<div class="line"><a id="l00903" name="l00903"></a><span class="lineno">  903</span>            <span class="keywordflow">if</span> (position.x &gt; maxx) {</div>
<div class="line"><a id="l00904" name="l00904"></a><span class="lineno">  904</span>                maxx = position.x;</div>
<div class="line"><a id="l00905" name="l00905"></a><span class="lineno">  905</span>            }</div>
<div class="line"><a id="l00906" name="l00906"></a><span class="lineno">  906</span>            <span class="keywordflow">if</span> (position.y &gt; maxy) {</div>
<div class="line"><a id="l00907" name="l00907"></a><span class="lineno">  907</span>                maxy = position.y;</div>
<div class="line"><a id="l00908" name="l00908"></a><span class="lineno">  908</span>            }</div>
<div class="line"><a id="l00909" name="l00909"></a><span class="lineno">  909</span>            <span class="keywordflow">if</span> (position.z &gt; maxz) {</div>
<div class="line"><a id="l00910" name="l00910"></a><span class="lineno">  910</span>                maxz = position.z;</div>
<div class="line"><a id="l00911" name="l00911"></a><span class="lineno">  911</span>            }</div>
<div class="line"><a id="l00912" name="l00912"></a><span class="lineno">  912</span>        };</div>
<div class="line"><a id="l00913" name="l00913"></a><span class="lineno">  913</span> </div>
<div class="line"><a id="l00914" name="l00914"></a><span class="lineno">  914</span>        <span class="comment">// 遍历所有路径点</span></div>
<div class="line"><a id="l00915" name="l00915"></a><span class="lineno">  915</span>        <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;waypoint_p : waypoints) {</div>
<div class="line"><a id="l00916" name="l00916"></a><span class="lineno">  916</span>            <span class="keyword">auto</span> &amp;waypoint_start = waypoint_p.first; <span class="comment">// 起始路径点</span></div>
<div class="line"><a id="l00917" name="l00917"></a><span class="lineno">  917</span>            <span class="keyword">auto</span> &amp;waypoint_end = waypoint_p.second; <span class="comment">// 结束路径点</span></div>
<div class="line"><a id="l00918" name="l00918"></a><span class="lineno">  918</span>            <span class="keywordtype">double</span> interval = (waypoint_end.s - waypoint_start.s) / <span class="keyword">static_cast&lt;</span><span class="keywordtype">double</span><span class="keyword">&gt;</span>(number_intervals); <span class="comment">// 计算间隔</span></div>
<div class="line"><a id="l00919" name="l00919"></a><span class="lineno">  919</span>            <span class="keyword">auto</span> next_wp = waypoint_end; <span class="comment">// 下一个路径点</span></div>
<div class="line"><a id="l00920" name="l00920"></a><span class="lineno">  920</span>            <span class="keyword">auto</span> location = map.ComputeTransform(next_wp).location; <span class="comment">// 获取位置</span></div>
<div class="line"><a id="l00921" name="l00921"></a><span class="lineno">  921</span> </div>
<div class="line"><a id="l00922" name="l00922"></a><span class="lineno">  922</span>            <span class="comment">// 更新最小和最大坐标</span></div>
<div class="line"><a id="l00923" name="l00923"></a><span class="lineno">  923</span>            get_min_max(location);</div>
<div class="line"><a id="l00924" name="l00924"></a><span class="lineno">  924</span> </div>
<div class="line"><a id="l00925" name="l00925"></a><span class="lineno">  925</span>            next_wp = waypoint_start; <span class="comment">// 重置下一个路径点</span></div>
<div class="line"><a id="l00926" name="l00926"></a><span class="lineno">  926</span>            location = map.ComputeTransform(next_wp).location; <span class="comment">// 获取位置</span></div>
<div class="line"><a id="l00927" name="l00927"></a><span class="lineno">  927</span> </div>
<div class="line"><a id="l00928" name="l00928"></a><span class="lineno">  928</span>            <span class="comment">// 更新最小和最大坐标</span></div>
<div class="line"><a id="l00929" name="l00929"></a><span class="lineno">  929</span>            get_min_max(location);</div>
<div class="line"><a id="l00930" name="l00930"></a><span class="lineno">  930</span> </div>
<div class="line"><a id="l00931" name="l00931"></a><span class="lineno">  931</span>            <span class="comment">// 遍历分段</span></div>
<div class="line"><a id="l00932" name="l00932"></a><span class="lineno">  932</span>            <span class="keywordflow">for</span> (<span class="keywordtype">int</span> i = 0; i &lt; number_intervals; ++i) {</div>
<div class="line"><a id="l00933" name="l00933"></a><span class="lineno">  933</span>                <span class="keywordflow">if</span> (interval &lt; std::numeric_limits&lt;double&gt;::epsilon()) <span class="comment">// 如果间隔很小则跳出</span></div>
<div class="line"><a id="l00934" name="l00934"></a><span class="lineno">  934</span>                    <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l00935" name="l00935"></a><span class="lineno">  935</span>                <span class="keyword">auto</span> next = map.GetNext(next_wp, interval); <span class="comment">// 获取下一个路径点</span></div>
<div class="line"><a id="l00936" name="l00936"></a><span class="lineno">  936</span>                <span class="keywordflow">if</span>(next.size()){ <span class="comment">// 如果找到了下一个路径点</span></div>
<div class="line"><a id="l00937" name="l00937"></a><span class="lineno">  937</span>                    next_wp = next.back(); <span class="comment">// 更新下一个路径点</span></div>
<div class="line"><a id="l00938" name="l00938"></a><span class="lineno">  938</span>                }</div>
<div class="line"><a id="l00939" name="l00939"></a><span class="lineno">  939</span> </div>
<div class="line"><a id="l00940" name="l00940"></a><span class="lineno">  940</span>                location = map.ComputeTransform(next_wp).location; <span class="comment">// 获取位置</span></div>
<div class="line"><a id="l00941" name="l00941"></a><span class="lineno">  941</span>                get_min_max(location); <span class="comment">// 更新最小和最大坐标</span></div>
<div class="line"><a id="l00942" name="l00942"></a><span class="lineno">  942</span>            }</div>
<div class="line"><a id="l00943" name="l00943"></a><span class="lineno">  943</span>        }</div>
<div class="line"><a id="l00944" name="l00944"></a><span class="lineno">  944</span>        <span class="comment">// 计算交叉口的中心位置和范围</span></div>
<div class="line"><a id="l00945" name="l00945"></a><span class="lineno">  945</span>        <a class="code hl_class" href="../../de/d23/classcarla_1_1geom_1_1Location.html">carla::geom::Location</a> location(0.5f * (maxx + minx), 0.5f * (maxy + miny), 0.5f * (maxz + minz));</div>
<div class="line"><a id="l00946" name="l00946"></a><span class="lineno">  946</span>        <a class="code hl_class" href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html">carla::geom::Vector3D</a> extent(0.5f * (maxx - minx), 0.5f * (maxy - miny), 0.5f * (maxz - minz));</div>
<div class="line"><a id="l00947" name="l00947"></a><span class="lineno">  947</span> </div>
<div class="line"><a id="l00948" name="l00948"></a><span class="lineno">  948</span>        <span class="comment">// 设置交叉口的边界框</span></div>
<div class="line"><a id="l00949" name="l00949"></a><span class="lineno">  949</span>        junction-&gt;<a class="code hl_variable" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a0c75525298b7d58b2a2ac44bf65613d2">_bounding_box</a> = <a class="code hl_class" href="../../d8/d68/classcarla_1_1geom_1_1BoundingBox.html">carla::geom::BoundingBox</a>(location, extent);</div>
<div class="line"><a id="l00950" name="l00950"></a><span class="lineno">  950</span>    }</div>
<div class="line"><a id="l00951" name="l00951"></a><span class="lineno">  951</span>}</div>
<div class="line"><a id="l00952" name="l00952"></a><span class="lineno">  952</span> </div>
<div class="line"><a id="l00953" name="l00953"></a><span class="lineno">  953</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a1431466dd1dff00318a1de6ee3fa2e6f">MapBuilder::CreateController</a>(</div>
<div class="line"><a id="l00954" name="l00954"></a><span class="lineno">  954</span>  <span class="keyword">const</span> <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a2a6871c9b73093b94512acd5d7e5faa4">ContId</a> controller_id, <span class="comment">// 控制器ID</span></div>
<div class="line"><a id="l00955" name="l00955"></a><span class="lineno">  955</span>  <span class="keyword">const</span> std::string controller_name, <span class="comment">// 控制器名称</span></div>
<div class="line"><a id="l00956" name="l00956"></a><span class="lineno">  956</span>  <span class="keyword">const</span> uint32_t controller_sequence, <span class="comment">// 控制器序列</span></div>
<div class="line"><a id="l00957" name="l00957"></a><span class="lineno">  957</span>  <span class="keyword">const</span> std::set&lt;road::SignId&gt;&amp;&amp; signals) { <span class="comment">// 控制器管理的信号集合</span></div>
<div class="line"><a id="l00958" name="l00958"></a><span class="lineno">  958</span> </div>
<div class="line"><a id="l00959" name="l00959"></a><span class="lineno">  959</span>    <span class="comment">// 将控制器添加到地图数据中</span></div>
<div class="line"><a id="l00960" name="l00960"></a><span class="lineno">  960</span>    <span class="keyword">auto</span> controller_pair = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a98e1b8ce8d1bd034acd4aace4d2dd8b4">_controllers</a>.emplace(</div>
<div class="line"><a id="l00961" name="l00961"></a><span class="lineno">  961</span>      std::make_pair(</div>
<div class="line"><a id="l00962" name="l00962"></a><span class="lineno">  962</span>          controller_id,</div>
<div class="line"><a id="l00963" name="l00963"></a><span class="lineno">  963</span>          std::make_unique&lt;Controller&gt;(controller_id, controller_name, controller_sequence)));</div>
<div class="line"><a id="l00964" name="l00964"></a><span class="lineno">  964</span> </div>
<div class="line"><a id="l00965" name="l00965"></a><span class="lineno">  965</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(controller_pair.first != <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a98e1b8ce8d1bd034acd4aace4d2dd8b4">_controllers</a>.end()); <span class="comment">// 确保控制器成功添加</span></div>
<div class="line"><a id="l00966" name="l00966"></a><span class="lineno">  966</span>    <a class="code hl_define" href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a>(controller_pair.first-&gt;second); <span class="comment">// 确保控制器对象不为空</span></div>
<div class="line"><a id="l00967" name="l00967"></a><span class="lineno">  967</span> </div>
<div class="line"><a id="l00968" name="l00968"></a><span class="lineno">  968</span>    <span class="comment">// 添加控制器管理的信号</span></div>
<div class="line"><a id="l00969" name="l00969"></a><span class="lineno">  969</span>    controller_pair.first-&gt;second-&gt;_signals = std::move(signals);</div>
<div class="line"><a id="l00970" name="l00970"></a><span class="lineno">  970</span> </div>
<div class="line"><a id="l00971" name="l00971"></a><span class="lineno">  971</span>    <span class="comment">// 将控制器ID添加到该控制器管理的信号中</span></div>
<div class="line"><a id="l00972" name="l00972"></a><span class="lineno">  972</span>    <span class="keyword">auto</span>&amp; signals_map = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">_map_data</a>.<a class="code hl_variable" href="../../da/d3b/classcarla_1_1road_1_1MapData.html#afb261aeb79a5c2784d44abf7cfa1326c">_signals</a>; <span class="comment">// 获取信号映射</span></div>
<div class="line"><a id="l00973" name="l00973"></a><span class="lineno">  973</span>    <span class="keywordflow">for</span>(<span class="keyword">auto</span> signal: signals) { <span class="comment">// 遍历信号集合</span></div>
<div class="line"><a id="l00974" name="l00974"></a><span class="lineno">  974</span>      <span class="keyword">auto</span> it = signals_map.find(signal); <span class="comment">// 查找信号</span></div>
<div class="line"><a id="l00975" name="l00975"></a><span class="lineno">  975</span>      <span class="keywordflow">if</span>(it != signals_map.end()) { <span class="comment">// 如果找到信号</span></div>
<div class="line"><a id="l00976" name="l00976"></a><span class="lineno">  976</span>        it-&gt;second-&gt;_controllers.insert(controller_id); <span class="comment">// 将控制器添加到信号的控制器集合中</span></div>
<div class="line"><a id="l00977" name="l00977"></a><span class="lineno">  977</span>      }</div>
<div class="line"><a id="l00978" name="l00978"></a><span class="lineno">  978</span>    }</div>
<div class="line"><a id="l00979" name="l00979"></a><span class="lineno">  979</span>}</div>
<div class="line"><a id="l00980" name="l00980"></a><span class="lineno">  980</span><span class="comment">// 计算交叉口的道路冲突</span></div>
<div class="line"><a id="l00981" name="l00981"></a><span class="lineno">  981</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a681b6b968d9fc6a9477dca966ec3e09e">MapBuilder::ComputeJunctionRoadConflicts</a>(<a class="code hl_class" href="../../d7/db0/classMap.html">Map</a> &amp;map) {</div>
<div class="line"><a id="l00982" name="l00982"></a><span class="lineno">  982</span>    <span class="comment">// 遍历地图中的所有交叉口</span></div>
<div class="line"><a id="l00983" name="l00983"></a><span class="lineno">  983</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp;junctionpair : map._data.GetJunctions()) {</div>
<div class="line"><a id="l00984" name="l00984"></a><span class="lineno">  984</span>      <span class="keyword">auto</span>&amp; junction = junctionpair.second; <span class="comment">// 获取交叉口对象</span></div>
<div class="line"><a id="l00985" name="l00985"></a><span class="lineno">  985</span>      <span class="comment">// 储存在交叉口对象的_road_conflicts 属性中</span></div>
<div class="line"><a id="l00986" name="l00986"></a><span class="lineno">  986</span>      junction.<a class="code hl_variable" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a8a6c824ebacfdbecaeaa68ff7476213e">_road_conflicts</a> = (map.ComputeJunctionConflicts(junction.<a class="code hl_function" href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a736aa443c045123306d0368512af278a">GetId</a>())); <span class="comment">// 计算交叉口的道路冲突</span></div>
<div class="line"><a id="l00987" name="l00987"></a><span class="lineno">  987</span>    }</div>
<div class="line"><a id="l00988" name="l00988"></a><span class="lineno">  988</span>}</div>
<div class="line"><a id="l00989" name="l00989"></a><span class="lineno">  989</span><span class="comment">// 为信号参考生成默认的有效性</span></div>
<div class="line"><a id="l00990" name="l00990"></a><span class="lineno">  990</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ac5ab2aea311a2bb6e43258c73bd57b49">MapBuilder::GenerateDefaultValiditiesForSignalReferences</a>() {</div>
<div class="line"><a id="l00991" name="l00991"></a><span class="lineno">  991</span>    <span class="comment">// 遍历临时信号引用容器</span></div>
<div class="line"><a id="l00992" name="l00992"></a><span class="lineno">  992</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> * signal_reference : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>) {</div>
<div class="line"><a id="l00993" name="l00993"></a><span class="lineno">  993</span>      <span class="keywordflow">if</span> (signal_reference-&gt;<a class="code hl_variable" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6a9f65e93420edc1f2cbe36fa1cacd39">_validities</a>.size() == 0) { <span class="comment">//检查信号参考是否有有效性</span></div>
<div class="line"><a id="l00994" name="l00994"></a><span class="lineno">  994</span>        <span class="comment">// 如果信号引用没有有效性</span></div>
<div class="line"><a id="l00995" name="l00995"></a><span class="lineno">  995</span>        <a class="code hl_class" href="../../dd/de6/classcarla_1_1road_1_1Road.html">Road</a>* road = <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae78c5880d7bd9edde4764d054037164d">GetRoad</a>(signal_reference-&gt;<a class="code hl_function" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ae8ba47fa9b90f5e36e8e9fb56039366d">GetRoadId</a>()); <span class="comment">// 获取信号引用所在的道路</span></div>
<div class="line"><a id="l00996" name="l00996"></a><span class="lineno">  996</span>        <span class="keyword">auto</span> lanes = road-&gt;<a class="code hl_function" href="../../dd/de6/classcarla_1_1road_1_1Road.html#acbea6fe4d600f5f2a84d7ae16390aee3">GetLanesByDistance</a>(signal_reference-&gt;<a class="code hl_function" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6f1bd6d09eb77d84b3b6ec31b1aff6cc">GetS</a>()); <span class="comment">// 根据距离获取车道</span></div>
<div class="line"><a id="l00997" name="l00997"></a><span class="lineno">  997</span>        <span class="keywordflow">switch</span> (signal_reference-&gt;<a class="code hl_function" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ae33c044a531e19f153ce80c16e531397">GetOrientation</a>()) { <span class="comment">// 根据信号的朝向进行处理</span></div>
<div class="line"><a id="l00998" name="l00998"></a><span class="lineno">  998</span>          <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a7a8cfd44e6ff56176312681582613f42">SignalOrientation::Positive</a>: { <span class="comment">// 正向信号</span></div>
<div class="line"><a id="l00999" name="l00999"></a><span class="lineno">  999</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> min_lane = 1; <span class="comment">// 最小车道ID初始化为1</span></div>
<div class="line"><a id="l01000" name="l01000"></a><span class="lineno"> 1000</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> max_lane = 0; <span class="comment">// 最大车道ID初始化为0</span></div>
<div class="line"><a id="l01001" name="l01001"></a><span class="lineno"> 1001</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* lane : lanes) { <span class="comment">// 遍历车道</span></div>
<div class="line"><a id="l01002" name="l01002"></a><span class="lineno"> 1002</span>              <span class="keyword">auto</span> lane_id = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ae1a5f15925f91fca2b5d759fb53901f3">GetId</a>(); <span class="comment">// 获取车道ID</span></div>
<div class="line"><a id="l01003" name="l01003"></a><span class="lineno"> 1003</span>              <span class="keywordflow">if</span>(lane_id &gt; max_lane) { <span class="comment">// 更新最大车道ID</span></div>
<div class="line"><a id="l01004" name="l01004"></a><span class="lineno"> 1004</span>                max_lane = lane_id;</div>
<div class="line"><a id="l01005" name="l01005"></a><span class="lineno"> 1005</span>              }</div>
<div class="line"><a id="l01006" name="l01006"></a><span class="lineno"> 1006</span>            }</div>
<div class="line"><a id="l01007" name="l01007"></a><span class="lineno"> 1007</span>            <span class="keywordflow">if</span>(min_lane &lt;= max_lane) { <span class="comment">// 如果最小车道ID小于等于最大车道ID</span></div>
<div class="line"><a id="l01008" name="l01008"></a><span class="lineno"> 1008</span>              <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">AddValidityToSignalReference</a>(signal_reference, min_lane, max_lane); <span class="comment">// 添加有效性</span></div>
<div class="line"><a id="l01009" name="l01009"></a><span class="lineno"> 1009</span>            }</div>
<div class="line"><a id="l01010" name="l01010"></a><span class="lineno"> 1010</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01011" name="l01011"></a><span class="lineno"> 1011</span>          }</div>
<div class="line"><a id="l01012" name="l01012"></a><span class="lineno"> 1012</span>          <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a81dda9bac0450f020afb784dc5fb0196">SignalOrientation::Negative</a>: { <span class="comment">// 反向信号</span></div>
<div class="line"><a id="l01013" name="l01013"></a><span class="lineno"> 1013</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> min_lane = 0; <span class="comment">// 最小车道ID初始化为0</span></div>
<div class="line"><a id="l01014" name="l01014"></a><span class="lineno"> 1014</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> max_lane = -1; <span class="comment">// 最大车道ID初始化为-1</span></div>
<div class="line"><a id="l01015" name="l01015"></a><span class="lineno"> 1015</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* lane : lanes) { <span class="comment">// 遍历车道</span></div>
<div class="line"><a id="l01016" name="l01016"></a><span class="lineno"> 1016</span>              <span class="keyword">auto</span> lane_id = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ae1a5f15925f91fca2b5d759fb53901f3">GetId</a>(); <span class="comment">// 获取车道ID</span></div>
<div class="line"><a id="l01017" name="l01017"></a><span class="lineno"> 1017</span>              <span class="keywordflow">if</span>(lane_id &lt; min_lane) { <span class="comment">// 更新最小车道ID</span></div>
<div class="line"><a id="l01018" name="l01018"></a><span class="lineno"> 1018</span>                min_lane = lane_id;</div>
<div class="line"><a id="l01019" name="l01019"></a><span class="lineno"> 1019</span>              }</div>
<div class="line"><a id="l01020" name="l01020"></a><span class="lineno"> 1020</span>            }</div>
<div class="line"><a id="l01021" name="l01021"></a><span class="lineno"> 1021</span>            <span class="keywordflow">if</span>(min_lane &lt;= max_lane) { <span class="comment">// 如果最小车道ID小于等于最大车道ID</span></div>
<div class="line"><a id="l01022" name="l01022"></a><span class="lineno"> 1022</span>              <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">AddValidityToSignalReference</a>(signal_reference, min_lane, max_lane); <span class="comment">// 添加有效性</span></div>
<div class="line"><a id="l01023" name="l01023"></a><span class="lineno"> 1023</span>            }</div>
<div class="line"><a id="l01024" name="l01024"></a><span class="lineno"> 1024</span>            <span class="keywordflow">break</span>;</div>
<div class="line"><a id="l01025" name="l01025"></a><span class="lineno"> 1025</span>          }</div>
<div class="line"><a id="l01026" name="l01026"></a><span class="lineno"> 1026</span>          <span class="keywordflow">case</span> <a class="code hl_enumvalue" href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a5721181d37fddc4cadf9db2a90249669">SignalOrientation::Both</a>: { <span class="comment">// 双向信号</span></div>
<div class="line"><a id="l01027" name="l01027"></a><span class="lineno"> 1027</span>            <span class="comment">// 获取正向车道</span></div>
<div class="line"><a id="l01028" name="l01028"></a><span class="lineno"> 1028</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> min_lane = 1; <span class="comment">// 最小车道ID初始化为1</span></div>
<div class="line"><a id="l01029" name="l01029"></a><span class="lineno"> 1029</span>            <a class="code hl_typedef" href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">LaneId</a> max_lane = 0; <span class="comment">// 最大车道ID初始化为0</span></div>
<div class="line"><a id="l01030" name="l01030"></a><span class="lineno"> 1030</span>            <span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* lane : lanes) { <span class="comment">// 遍历车道</span></div>
<div class="line"><a id="l01031" name="l01031"></a><span class="lineno"> 1031</span>              <span class="keyword">auto</span> lane_id = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ae1a5f15925f91fca2b5d759fb53901f3">GetId</a>(); <span class="comment">// 获取车道ID</span></div>
<div class="line"><a id="l01032" name="l01032"></a><span class="lineno"> 1032</span>              <span class="keywordflow">if</span>(lane_id &gt; max_lane) { <span class="comment">// 更新最大车道ID</span></div>
<div class="line"><a id="l01033" name="l01033"></a><span class="lineno"> 1033</span>                max_lane = lane_id;</div>
<div class="line"><a id="l01034" name="l01034"></a><span class="lineno"> 1034</span>              }</div>
<div class="line"><a id="l01035" name="l01035"></a><span class="lineno"> 1035</span>            }</div>
<div class="line"><a id="l01036" name="l01036"></a><span class="lineno"> 1036</span>            <span class="keywordflow">if</span>(min_lane &lt;= max_lane) { <span class="comment">// 如果最小车道ID小于等于最大车道ID</span></div>
<div class="line"><a id="l01037" name="l01037"></a><span class="lineno"> 1037</span>              <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">AddValidityToSignalReference</a>(signal_reference, min_lane, max_lane); <span class="comment">// 添加有效性</span></div>
<div class="line"><a id="l01038" name="l01038"></a><span class="lineno"> 1038</span>            }</div>
<div class="line"><a id="l01039" name="l01039"></a><span class="lineno"> 1039</span> </div>
<div class="line"><a id="l01040" name="l01040"></a><span class="lineno"> 1040</span>            <span class="comment">// 获取反向车道</span></div>
<div class="line"><a id="l01041" name="l01041"></a><span class="lineno"> 1041</span>        min_lane = 0; <span class="comment">// 初始化最小车道 ID 为 0</span></div>
<div class="line"><a id="l01042" name="l01042"></a><span class="lineno"> 1042</span>max_lane = -1; <span class="comment">// 初始化最大车道 ID 为 -1</span></div>
<div class="line"><a id="l01043" name="l01043"></a><span class="lineno"> 1043</span> </div>
<div class="line"><a id="l01044" name="l01044"></a><span class="lineno"> 1044</span><span class="keywordflow">for</span> (<span class="keyword">const</span> <span class="keyword">auto</span>* lane : lanes) { <span class="comment">// 遍历所有车道</span></div>
<div class="line"><a id="l01045" name="l01045"></a><span class="lineno"> 1045</span>  <span class="keyword">auto</span> lane_id = lane-&gt;<a class="code hl_function" href="../../df/d85/classcarla_1_1road_1_1Lane.html#ae1a5f15925f91fca2b5d759fb53901f3">GetId</a>(); <span class="comment">// 获取当前车道的 ID</span></div>
<div class="line"><a id="l01046" name="l01046"></a><span class="lineno"> 1046</span>  <span class="keywordflow">if</span>(lane_id &lt; min_lane) { <span class="comment">// 如果当前车道 ID 小于最小车道 ID</span></div>
<div class="line"><a id="l01047" name="l01047"></a><span class="lineno"> 1047</span>    min_lane = lane_id; <span class="comment">// 更新最小车道 ID</span></div>
<div class="line"><a id="l01048" name="l01048"></a><span class="lineno"> 1048</span>  }</div>
<div class="line"><a id="l01049" name="l01049"></a><span class="lineno"> 1049</span>}</div>
<div class="line"><a id="l01050" name="l01050"></a><span class="lineno"> 1050</span> </div>
<div class="line"><a id="l01051" name="l01051"></a><span class="lineno"> 1051</span><span class="keywordflow">if</span>(min_lane &lt;= max_lane) { <span class="comment">// 如果最小车道 ID 小于等于最大车道 ID</span></div>
<div class="line"><a id="l01052" name="l01052"></a><span class="lineno"> 1052</span>  <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">AddValidityToSignalReference</a>(signal_reference, min_lane, max_lane); <span class="comment">// 添加信号参考的有效性</span></div>
<div class="line"><a id="l01053" name="l01053"></a><span class="lineno"> 1053</span>}</div>
<div class="line"><a id="l01054" name="l01054"></a><span class="lineno"> 1054</span><span class="keywordflow">break</span>; <span class="comment">// 跳出当前循环</span></div>
<div class="line"><a id="l01055" name="l01055"></a><span class="lineno"> 1055</span>}</div>
<div class="line"><a id="l01056" name="l01056"></a><span class="lineno"> 1056</span>}</div>
<div class="line"><a id="l01057" name="l01057"></a><span class="lineno"> 1057</span>}</div>
<div class="line"><a id="l01058" name="l01058"></a><span class="lineno"> 1058</span> </div>
<div class="line"><a id="l01059" name="l01059"></a><span class="lineno"> 1059</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aa01b79061fa5fc167617bc32272a2bb7">MapBuilder::RemoveZeroLaneValiditySignalReferences</a>() { <span class="comment">// 定义移除零车道有效性信号引用的函数</span></div>
<div class="line"><a id="l01060" name="l01060"></a><span class="lineno"> 1060</span>  std::vector&lt;element::RoadInfoSignal*&gt; elements_to_remove; <span class="comment">// 存储待移除的信号元素</span></div>
<div class="line"><a id="l01061" name="l01061"></a><span class="lineno"> 1061</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span> * signal_reference : <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>) { <span class="comment">// 遍历临时信号引用容器</span></div>
<div class="line"><a id="l01062" name="l01062"></a><span class="lineno"> 1062</span>    <span class="keywordtype">bool</span> should_remove = <span class="keyword">true</span>; <span class="comment">// 标记是否应移除</span></div>
<div class="line"><a id="l01063" name="l01063"></a><span class="lineno"> 1063</span>    <span class="keywordflow">for</span> (<span class="keyword">auto</span> &amp; lane_validity : signal_reference-&gt;_validities) { <span class="comment">// 遍历信号引用的有效性</span></div>
<div class="line"><a id="l01064" name="l01064"></a><span class="lineno"> 1064</span>      <span class="keywordflow">if</span> ( (lane_validity._from_lane != 0) || <span class="comment">// 如果起始车道不为 0</span></div>
<div class="line"><a id="l01065" name="l01065"></a><span class="lineno"> 1065</span>           (lane_validity._to_lane != 0)) { <span class="comment">// 或者结束车道不为 0</span></div>
<div class="line"><a id="l01066" name="l01066"></a><span class="lineno"> 1066</span>        should_remove = <span class="keyword">false</span>; <span class="comment">// 不应移除</span></div>
<div class="line"><a id="l01067" name="l01067"></a><span class="lineno"> 1067</span>        <span class="keywordflow">break</span>; <span class="comment">// 跳出当前循环</span></div>
<div class="line"><a id="l01068" name="l01068"></a><span class="lineno"> 1068</span>      }</div>
<div class="line"><a id="l01069" name="l01069"></a><span class="lineno"> 1069</span>    }</div>
<div class="line"><a id="l01070" name="l01070"></a><span class="lineno"> 1070</span>    <span class="keywordflow">if</span> (signal_reference-&gt;<a class="code hl_variable" href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6a9f65e93420edc1f2cbe36fa1cacd39">_validities</a>.size() == 0) { <span class="comment">// 如果有效性列表为空</span></div>
<div class="line"><a id="l01071" name="l01071"></a><span class="lineno"> 1071</span>      should_remove = <span class="keyword">false</span>; <span class="comment">// 不应移除</span></div>
<div class="line"><a id="l01072" name="l01072"></a><span class="lineno"> 1072</span>    }</div>
<div class="line"><a id="l01073" name="l01073"></a><span class="lineno"> 1073</span> </div>
<div class="line"><a id="l01074" name="l01074"></a><span class="lineno"> 1074</span>    <span class="keywordflow">if</span> (should_remove) { <span class="comment">// 如果标记为应移除</span></div>
<div class="line"><a id="l01075" name="l01075"></a><span class="lineno"> 1075</span>      elements_to_remove.push_back(signal_reference); <span class="comment">// 添加到待移除列表</span></div>
<div class="line"><a id="l01076" name="l01076"></a><span class="lineno"> 1076</span>    }</div>
<div class="line"><a id="l01077" name="l01077"></a><span class="lineno"> 1077</span>  }</div>
<div class="line"><a id="l01078" name="l01078"></a><span class="lineno"> 1078</span> </div>
<div class="line"><a id="l01079" name="l01079"></a><span class="lineno"> 1079</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>* element : elements_to_remove) { <span class="comment">// 遍历待移除的元素</span></div>
<div class="line"><a id="l01080" name="l01080"></a><span class="lineno"> 1080</span>    <span class="keyword">auto</span> road_id = element-&gt;GetRoadId(); <span class="comment">// 获取道路 ID</span></div>
<div class="line"><a id="l01081" name="l01081"></a><span class="lineno"> 1081</span>    <span class="keyword">auto</span>&amp; road_info = <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">_temp_road_info_container</a>[<a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae78c5880d7bd9edde4764d054037164d">GetRoad</a>(road_id)]; <span class="comment">// 获取与该道路相关的信息</span></div>
<div class="line"><a id="l01082" name="l01082"></a><span class="lineno"> 1082</span>    road_info.erase(std::remove_if(road_info.begin(), road_info.end(), <span class="comment">// 移除信号元素</span></div>
<div class="line"><a id="l01083" name="l01083"></a><span class="lineno"> 1083</span>        [=] (<span class="keyword">auto</span>&amp; info_ptr) {</div>
<div class="line"><a id="l01084" name="l01084"></a><span class="lineno"> 1084</span>          return (info_ptr.get() == element); <span class="comment">// 如果指针指向当前元素，则移除</span></div>
<div class="line"><a id="l01085" name="l01085"></a><span class="lineno"> 1085</span>        }), road_info.end());</div>
<div class="line"><a id="l01086" name="l01086"></a><span class="lineno"> 1086</span>    <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>.erase(std::remove(<a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>.begin(), <span class="comment">// 从临时信号引用容器中移除</span></div>
<div class="line"><a id="l01087" name="l01087"></a><span class="lineno"> 1087</span>        <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>.end(), element),</div>
<div class="line"><a id="l01088" name="l01088"></a><span class="lineno"> 1088</span>        <a class="code hl_variable" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">_temp_signal_reference_container</a>.end());</div>
<div class="line"><a id="l01089" name="l01089"></a><span class="lineno"> 1089</span>  }</div>
<div class="line"><a id="l01090" name="l01090"></a><span class="lineno"> 1090</span>}</div>
<div class="line"><a id="l01091" name="l01091"></a><span class="lineno"> 1091</span> </div>
<div class="line"><a id="l01092" name="l01092"></a><span class="lineno"> 1092</span><span class="keywordtype">void</span> <a class="code hl_function" href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af3773de062a9e9aec4310f024f19ba28">MapBuilder::CheckSignalsOnRoads</a>(<a class="code hl_class" href="../../d7/db0/classMap.html">Map</a> &amp;map) { <span class="comment">// 定义检查道路上信号的函数</span></div>
<div class="line"><a id="l01093" name="l01093"></a><span class="lineno"> 1093</span>  <span class="keywordflow">for</span> (<span class="keyword">auto</span>&amp; signal_pair : map._data._signals) { <span class="comment">// 遍历地图中的所有信号</span></div>
<div class="line"><a id="l01094" name="l01094"></a><span class="lineno"> 1094</span>    <span class="keyword">auto</span>&amp; signal = signal_pair.second; <span class="comment">// 获取信号对象</span></div>
<div class="line"><a id="l01095" name="l01095"></a><span class="lineno"> 1095</span>    <span class="keyword">auto</span> signal_position = signal-&gt;GetTransform().location; <span class="comment">// 获取信号的位置</span></div>
<div class="line"><a id="l01096" name="l01096"></a><span class="lineno"> 1096</span>    <span class="keyword">auto</span> signal_rotation = signal-&gt;GetTransform().rotation; <span class="comment">// 获取信号的旋转信息</span></div>
<div class="line"><a id="l01097" name="l01097"></a><span class="lineno"> 1097</span>    <span class="keyword">auto</span> closest_waypoint_to_signal = <span class="comment">// 获取离信号最近的路点</span></div>
<div class="line"><a id="l01098" name="l01098"></a><span class="lineno"> 1098</span>        map.GetClosestWaypointOnRoad(signal_position,</div>
<div class="line"><a id="l01099" name="l01099"></a><span class="lineno"> 1099</span>        <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a83cb4c144b3d6ee1a847bee51a44b933">carla::road::Lane::LaneType::Shoulder</a>) |  <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723">carla::road::Lane::LaneType::Driving</a>));</div>
<div class="line"><a id="l01100" name="l01100"></a><span class="lineno"> 1100</span> </div>
<div class="line"><a id="l01101" name="l01101"></a><span class="lineno"> 1101</span>    <span class="comment">// 工作绕过以避免移动 stencil stop</span></div>
<div class="line"><a id="l01102" name="l01102"></a><span class="lineno"> 1102</span>    <span class="keywordflow">if</span> (</div>
<div class="line"><a id="l01103" name="l01103"></a><span class="lineno"> 1103</span>        signal-&gt;GetName().find(<span class="stringliteral">&quot;Stencil_STOP&quot;</span>) != std::string::npos || <span class="comment">// 如果信号名称包含 &quot;Stencil_STOP&quot;</span></div>
<div class="line"><a id="l01104" name="l01104"></a><span class="lineno"> 1104</span>        signal-&gt;GetName().find(<span class="stringliteral">&quot;STATIC&quot;</span>) != std::string::npos || <span class="comment">// 或者包含 &quot;STATIC&quot;</span></div>
<div class="line"><a id="l01105" name="l01105"></a><span class="lineno"> 1105</span>        signal-&gt;_using_inertial_position) { <span class="comment">// 或使用惯性位置</span></div>
<div class="line"><a id="l01106" name="l01106"></a><span class="lineno"> 1106</span>      <span class="keywordflow">continue</span>; <span class="comment">// 跳过此次循环</span></div>
<div class="line"><a id="l01107" name="l01107"></a><span class="lineno"> 1107</span>    }</div>
<div class="line"><a id="l01108" name="l01108"></a><span class="lineno"> 1108</span> </div>
<div class="line"><a id="l01109" name="l01109"></a><span class="lineno"> 1109</span>    <span class="keywordflow">if</span>(closest_waypoint_to_signal) { <span class="comment">// 如果找到了最近的路点</span></div>
<div class="line"><a id="l01110" name="l01110"></a><span class="lineno"> 1110</span>      <span class="keyword">auto</span> road_transform = map.ComputeTransform(closest_waypoint_to_signal.get()); <span class="comment">// 计算路点的变换</span></div>
<div class="line"><a id="l01111" name="l01111"></a><span class="lineno"> 1111</span>      <span class="keyword">auto</span> distance_to_road = (road_transform.location - signal_position).Length(); <span class="comment">// 计算信号与路的距离</span></div>
<div class="line"><a id="l01112" name="l01112"></a><span class="lineno"> 1112</span>      <span class="keywordtype">double</span> lane_width = map.GetLaneWidth(closest_waypoint_to_signal.get()); <span class="comment">// 获取车道宽度</span></div>
<div class="line"><a id="l01113" name="l01113"></a><span class="lineno"> 1113</span>      <span class="keywordtype">int</span> displacement_direction = 1; <span class="comment">// 初始化位移方向为 1</span></div>
<div class="line"><a id="l01114" name="l01114"></a><span class="lineno"> 1114</span>      <span class="keywordtype">int</span> iter = 0; <span class="comment">// 初始化迭代次数</span></div>
<div class="line"><a id="l01115" name="l01115"></a><span class="lineno"> 1115</span>      <span class="keywordtype">int</span> MaxIter = 10; <span class="comment">// 设置最大迭代次数为 10</span></div>
<div class="line"><a id="l01116" name="l01116"></a><span class="lineno"> 1116</span> </div>
<div class="line"><a id="l01117" name="l01117"></a><span class="lineno"> 1117</span>      <span class="comment">// 移动信号直到找到合适的位置</span></div>
<div class="line"><a id="l01118" name="l01118"></a><span class="lineno"> 1118</span>      <span class="keywordflow">while</span>(distance_to_road &lt; (lane_width * 0.7) &amp;&amp; iter &lt; MaxIter &amp;&amp; displacement_direction != 0) {</div>
<div class="line"><a id="l01119" name="l01119"></a><span class="lineno"> 1119</span>        <span class="keywordflow">if</span>(iter == 0) { <span class="comment">// 如果是第一次迭代</span></div>
<div class="line"><a id="l01120" name="l01120"></a><span class="lineno"> 1120</span>          <a class="code hl_function" href="../../d9/d36/namespacecarla.html#afb6ca911605d1ec35bdf563de2814dba">log_debug</a>(<span class="stringliteral">&quot;Traffic sign&quot;</span>, <span class="comment">// 记录调试信息</span></div>
<div class="line"><a id="l01121" name="l01121"></a><span class="lineno"> 1121</span>              signal-&gt;GetSignalId(),</div>
<div class="line"><a id="l01122" name="l01122"></a><span class="lineno"> 1122</span>              <span class="stringliteral">&quot;overlaps a driving lane. Moving out of the road...&quot;</span>);</div>
<div class="line"><a id="l01123" name="l01123"></a><span class="lineno"> 1123</span>        }</div>
<div class="line"><a id="l01124" name="l01124"></a><span class="lineno"> 1124</span> </div>
<div class="line"><a id="l01125" name="l01125"></a><span class="lineno"> 1125</span>          <span class="keyword">auto</span> right_waypoint = map.GetRight(closest_waypoint_to_signal.get()); <span class="comment">// 获取信号右侧的路点</span></div>
<div class="line"><a id="l01126" name="l01126"></a><span class="lineno"> 1126</span><span class="keyword">auto</span> right_lane_type = (right_waypoint) ?</div>
<div class="line"><a id="l01127" name="l01127"></a><span class="lineno"> 1127</span> map.GetLaneType(right_waypoint.get()) :</div>
<div class="line"><a id="l01128" name="l01128"></a><span class="lineno"> 1128</span> <a class="code hl_namespace" href="../../d9/d36/namespacecarla.html">carla</a>::road::<a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a>::LaneType::<a class="code hl_enumvalue" href="../../de/d6c/namespacecarla_1_1rpc.html#a64d9aac1c2a1d8e7ff5056054f80b42ba6adf97f83acf6453d4a6a4b1070f3754">None</a>; <span class="comment">// 获取右侧车道类型，如果没有路点则为 None</span></div>
<div class="line"><a id="l01129" name="l01129"></a><span class="lineno"> 1129</span> </div>
<div class="line"><a id="l01130" name="l01130"></a><span class="lineno"> 1130</span><span class="keyword">auto</span> left_waypoint = map.GetLeft(closest_waypoint_to_signal.get()); <span class="comment">// 获取信号左侧的路点</span></div>
<div class="line"><a id="l01131" name="l01131"></a><span class="lineno"> 1131</span><span class="keyword">auto</span> left_lane_type = (left_waypoint) ?</div>
<div class="line"><a id="l01132" name="l01132"></a><span class="lineno"> 1132</span> map.GetLaneType(left_waypoint.get()) :</div>
<div class="line"><a id="l01133" name="l01133"></a><span class="lineno"> 1133</span> <a class="code hl_namespace" href="../../d9/d36/namespacecarla.html">carla</a>::road::<a class="code hl_class" href="../../df/d85/classcarla_1_1road_1_1Lane.html">Lane</a>::LaneType::<a class="code hl_enumvalue" href="../../de/d6c/namespacecarla_1_1rpc.html#a64d9aac1c2a1d8e7ff5056054f80b42ba6adf97f83acf6453d4a6a4b1070f3754">None</a>; <span class="comment">// 获取左侧车道类型，如果没有路点则为 None</span></div>
<div class="line"><a id="l01134" name="l01134"></a><span class="lineno"> 1134</span> </div>
<div class="line"><a id="l01135" name="l01135"></a><span class="lineno"> 1135</span><span class="keywordflow">if</span> (right_lane_type != <a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723">carla::road::Lane::LaneType::Driving</a>) { <span class="comment">// 如果右侧车道不是行驶车道</span></div>
<div class="line"><a id="l01136" name="l01136"></a><span class="lineno"> 1136</span>  displacement_direction = 1; <span class="comment">// 设置位移方向为 1（向右）</span></div>
<div class="line"><a id="l01137" name="l01137"></a><span class="lineno"> 1137</span>} <span class="keywordflow">else</span> <span class="keywordflow">if</span> (left_lane_type != <a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723">carla::road::Lane::LaneType::Driving</a>) { <span class="comment">// 如果左侧车道不是行驶车道</span></div>
<div class="line"><a id="l01138" name="l01138"></a><span class="lineno"> 1138</span>  displacement_direction = -1; <span class="comment">// 设置位移方向为 -1（向左）</span></div>
<div class="line"><a id="l01139" name="l01139"></a><span class="lineno"> 1139</span>} <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01140" name="l01140"></a><span class="lineno"> 1140</span>  displacement_direction = 0; <span class="comment">// 如果两侧都是行驶车道，设置位移方向为 0（不移动）</span></div>
<div class="line"><a id="l01141" name="l01141"></a><span class="lineno"> 1141</span>}</div>
<div class="line"><a id="l01142" name="l01142"></a><span class="lineno"> 1142</span> </div>
<div class="line"><a id="l01143" name="l01143"></a><span class="lineno"> 1143</span><a class="code hl_class" href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html">geom::Vector3D</a> displacement = 1.f*(road_transform.GetRightVector()) * <span class="comment">// 计算位移向量</span></div>
<div class="line"><a id="l01144" name="l01144"></a><span class="lineno"> 1144</span>    <span class="keyword">static_cast&lt;</span><span class="keywordtype">float</span><span class="keyword">&gt;</span>(abs(lane_width)) * 0.2f; <span class="comment">// 使用车道宽度的绝对值乘以 0.2</span></div>
<div class="line"><a id="l01145" name="l01145"></a><span class="lineno"> 1145</span> </div>
<div class="line"><a id="l01146" name="l01146"></a><span class="lineno"> 1146</span>signal_position += (displacement * displacement_direction); <span class="comment">// 根据位移方向更新信号的位置</span></div>
<div class="line"><a id="l01147" name="l01147"></a><span class="lineno"> 1147</span>signal_rotation = road_transform.rotation; <span class="comment">// 更新信号的旋转信息为道路的旋转信息</span></div>
<div class="line"><a id="l01148" name="l01148"></a><span class="lineno"> 1148</span>closest_waypoint_to_signal = <span class="comment">// 获取更新后信号位置最近的路点</span></div>
<div class="line"><a id="l01149" name="l01149"></a><span class="lineno"> 1149</span>    map.GetClosestWaypointOnRoad(signal_position,</div>
<div class="line"><a id="l01150" name="l01150"></a><span class="lineno"> 1150</span>    <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a83cb4c144b3d6ee1a847bee51a44b933">carla::road::Lane::LaneType::Shoulder</a>) |  <span class="keyword">static_cast&lt;</span>int32_t<span class="keyword">&gt;</span>(<a class="code hl_enumvalue" href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723">carla::road::Lane::LaneType::Driving</a>));</div>
<div class="line"><a id="l01151" name="l01151"></a><span class="lineno"> 1151</span> </div>
<div class="line"><a id="l01152" name="l01152"></a><span class="lineno"> 1152</span>distance_to_road = <span class="comment">// 计算信号与最近路点之间的距离</span></div>
<div class="line"><a id="l01153" name="l01153"></a><span class="lineno"> 1153</span>    (map.ComputeTransform(closest_waypoint_to_signal.get()).location -</div>
<div class="line"><a id="l01154" name="l01154"></a><span class="lineno"> 1154</span>    signal_position).Length(); <span class="comment">// 计算两者间的长度</span></div>
<div class="line"><a id="l01155" name="l01155"></a><span class="lineno"> 1155</span>lane_width = map.GetLaneWidth(closest_waypoint_to_signal.get()); <span class="comment">// 获取最近路点所在车道的宽度</span></div>
<div class="line"><a id="l01156" name="l01156"></a><span class="lineno"> 1156</span>iter++; <span class="comment">// 增加迭代次数</span></div>
<div class="line"><a id="l01157" name="l01157"></a><span class="lineno"> 1157</span>}</div>
<div class="line"><a id="l01158" name="l01158"></a><span class="lineno"> 1158</span> </div>
<div class="line"><a id="l01159" name="l01159"></a><span class="lineno"> 1159</span><span class="keywordflow">if</span>(iter == MaxIter) { <span class="comment">// 如果达到最大迭代次数</span></div>
<div class="line"><a id="l01160" name="l01160"></a><span class="lineno"> 1160</span>  <a class="code hl_function" href="../../d9/d36/namespacecarla.html#afb6ca911605d1ec35bdf563de2814dba">log_debug</a>(<span class="stringliteral">&quot;Failed to find suitable place for signal.&quot;</span>); <span class="comment">// 记录无法找到合适位置的调试信息</span></div>
<div class="line"><a id="l01161" name="l01161"></a><span class="lineno"> 1161</span>} <span class="keywordflow">else</span> {</div>
<div class="line"><a id="l01162" name="l01162"></a><span class="lineno"> 1162</span>  <span class="comment">// 只有在找到合适位置时才进行位移</span></div>
<div class="line"><a id="l01163" name="l01163"></a><span class="lineno"> 1163</span>  signal-&gt;_transform.location = signal_position; <span class="comment">// 更新信号的位置</span></div>
<div class="line"><a id="l01164" name="l01164"></a><span class="lineno"> 1164</span>  signal-&gt;_transform.rotation = signal_rotation; <span class="comment">// 更新信号的旋转信息</span></div>
<div class="line"><a id="l01165" name="l01165"></a><span class="lineno"> 1165</span>        }</div>
<div class="line"><a id="l01166" name="l01166"></a><span class="lineno"> 1166</span>      }</div>
<div class="line"><a id="l01167" name="l01167"></a><span class="lineno"> 1167</span>    }</div>
<div class="line"><a id="l01168" name="l01168"></a><span class="lineno"> 1168</span>  }</div>
<div class="line"><a id="l01169" name="l01169"></a><span class="lineno"> 1169</span> </div>
<div class="line"><a id="l01170" name="l01170"></a><span class="lineno"> 1170</span>} <span class="comment">// namespace road</span></div>
<div class="line"><a id="l01171" name="l01171"></a><span class="lineno"> 1171</span>} <span class="comment">// namespace carla</span></div>
<div class="ttc" id="aDebug_8h_html_a0480185f78b4135a9d05ec24bccef047"><div class="ttname"><a href="../../d4/deb/Debug_8h.html#a0480185f78b4135a9d05ec24bccef047">DEBUG_ASSERT</a></div><div class="ttdeci">#define DEBUG_ASSERT(predicate)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/deb/Debug_8h_source.html#l00068">Debug.h:68</a></div></div>
<div class="ttc" id="aDebug_8h_html_ad7812d0b01b83a7dfc80026d9eaff951"><div class="ttname"><a href="../../d4/deb/Debug_8h.html#ad7812d0b01b83a7dfc80026d9eaff951">RELEASE_ASSERT</a></div><div class="ttdeci">#define RELEASE_ASSERT(pred)</div><div class="ttdef"><b>Definition</b> <a href="../../d4/deb/Debug_8h_source.html#l00094">Debug.h:94</a></div></div>
<div class="ttc" id="aInformationSet_8h_html"><div class="ttname"><a href="../../d2/d56/InformationSet_8h.html">InformationSet.h</a></div></div>
<div class="ttc" id="aMapBuilder_8h_html"><div class="ttname"><a href="../../de/d3b/MapBuilder_8h.html">MapBuilder.h</a></div></div>
<div class="ttc" id="aRoadInfoCrosswalk_8h_html"><div class="ttname"><a href="../../da/dd7/RoadInfoCrosswalk_8h.html">RoadInfoCrosswalk.h</a></div></div>
<div class="ttc" id="aRoadInfoElevation_8h_html"><div class="ttname"><a href="../../d7/d90/RoadInfoElevation_8h.html">RoadInfoElevation.h</a></div></div>
<div class="ttc" id="aRoadInfoGeometry_8h_html"><div class="ttname"><a href="../../d0/d8e/RoadInfoGeometry_8h.html">RoadInfoGeometry.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneAccess_8h_html"><div class="ttname"><a href="../../da/d4c/RoadInfoLaneAccess_8h.html">RoadInfoLaneAccess.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneBorder_8h_html"><div class="ttname"><a href="../../d5/dfa/RoadInfoLaneBorder_8h.html">RoadInfoLaneBorder.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneHeight_8h_html"><div class="ttname"><a href="../../dc/d17/RoadInfoLaneHeight_8h.html">RoadInfoLaneHeight.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneMaterial_8h_html"><div class="ttname"><a href="../../d6/db2/RoadInfoLaneMaterial_8h.html">RoadInfoLaneMaterial.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneOffset_8h_html"><div class="ttname"><a href="../../db/d26/RoadInfoLaneOffset_8h.html">RoadInfoLaneOffset.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneRule_8h_html"><div class="ttname"><a href="../../da/d14/RoadInfoLaneRule_8h.html">RoadInfoLaneRule.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneVisibility_8h_html"><div class="ttname"><a href="../../d5/d30/RoadInfoLaneVisibility_8h.html">RoadInfoLaneVisibility.h</a></div></div>
<div class="ttc" id="aRoadInfoLaneWidth_8h_html"><div class="ttname"><a href="../../d1/d16/RoadInfoLaneWidth_8h.html">RoadInfoLaneWidth.h</a></div></div>
<div class="ttc" id="aRoadInfoMarkRecord_8h_html"><div class="ttname"><a href="../../dd/d32/RoadInfoMarkRecord_8h.html">RoadInfoMarkRecord.h</a></div></div>
<div class="ttc" id="aRoadInfoMarkTypeLine_8h_html"><div class="ttname"><a href="../../da/d4f/RoadInfoMarkTypeLine_8h.html">RoadInfoMarkTypeLine.h</a></div></div>
<div class="ttc" id="aRoadInfoSignal_8h_html"><div class="ttname"><a href="../../d1/d1d/RoadInfoSignal_8h.html">RoadInfoSignal.h</a></div></div>
<div class="ttc" id="aRoadInfoSpeed_8h_html"><div class="ttname"><a href="../../d6/dbd/RoadInfoSpeed_8h.html">RoadInfoSpeed.h</a></div></div>
<div class="ttc" id="aRoadInfoVisitor_8h_html"><div class="ttname"><a href="../../d6/d67/RoadInfoVisitor_8h.html">RoadInfoVisitor.h</a></div></div>
<div class="ttc" id="aSignalType_8h_html"><div class="ttname"><a href="../../d4/d64/SignalType_8h.html">SignalType.h</a></div></div>
<div class="ttc" id="aSignal_8h_html"><div class="ttname"><a href="../../d0/def/Signal_8h.html">Signal.h</a></div></div>
<div class="ttc" id="aStringUtil_8h_html"><div class="ttname"><a href="../../d2/d69/StringUtil_8h.html">StringUtil.h</a></div></div>
<div class="ttc" id="aclassMap_html"><div class="ttname"><a href="../../d7/db0/classMap.html">Map</a></div><div class="ttdoc">地图类的前向声明，用于在LaneInvasionSensor类中可能的引用。</div></div>
<div class="ttc" id="aclasscarla_1_1StringUtil_html_ada48ad70d7afa9a0cd6b3d68a1c292e8"><div class="ttname"><a href="../../de/d93/classcarla_1_1StringUtil.html#ada48ad70d7afa9a0cd6b3d68a1c292e8">carla::StringUtil::ToLower</a></div><div class="ttdeci">static void ToLower(WritableRangeT &amp;str)</div><div class="ttdef"><b>Definition</b> <a href="../../d2/d69/StringUtil_8h_source.html#l00040">StringUtil.h:40</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1BoundingBox_html"><div class="ttname"><a href="../../d8/d68/classcarla_1_1geom_1_1BoundingBox.html">carla::geom::BoundingBox</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/dfe/LibCarla_2source_2carla_2geom_2BoundingBox_8h_source.html#l00035">LibCarla/source/carla/geom/BoundingBox.h:35</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Location_html"><div class="ttname"><a href="../../de/d23/classcarla_1_1geom_1_1Location.html">carla::geom::Location</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d8b/geom_2Location_8h_source.html#l00028">geom/Location.h:28</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Math_html_a8f8eccc1a2bcc711250f2b47a21eb31f"><div class="ttname"><a href="../../d0/dea/classcarla_1_1geom_1_1Math.html#a8f8eccc1a2bcc711250f2b47a21eb31f">carla::geom::Math::Clamp</a></div><div class="ttdeci">static T Clamp(T a, T min=T(0), T max=T(1))</div><div class="ttdef"><b>Definition</b> <a href="../../db/d8a/Math_8h_source.html#l00054">Math.h:54</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Math_html_ae1dc5ac48cfeb15fc66176a644bcf122"><div class="ttname"><a href="../../d0/dea/classcarla_1_1geom_1_1Math.html#ae1dc5ac48cfeb15fc66176a644bcf122">carla::geom::Math::ToDegrees</a></div><div class="ttdeci">static constexpr T ToDegrees(T rad)</div><div class="ttdef"><b>Definition</b> <a href="../../db/d8a/Math_8h_source.html#l00040">Math.h:40</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Rotation_html"><div class="ttname"><a href="../../d8/dba/classcarla_1_1geom_1_1Rotation.html">carla::geom::Rotation</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d8f/Rotation_8h_source.html#l00027">Rotation.h:27</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Transform_html"><div class="ttname"><a href="../../de/da4/classcarla_1_1geom_1_1Transform.html">carla::geom::Transform</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d17/geom_2Transform_8h_source.html#l00026">geom/Transform.h:26</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Vector3D_html"><div class="ttname"><a href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html">carla::geom::Vector3D</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d70/geom_2Vector3D_8h_source.html#l00017">geom/Vector3D.h:17</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Vector3D_html_a5ca01ca36e9be8d143731da42df9ac1c"><div class="ttname"><a href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html#a5ca01ca36e9be8d143731da42df9ac1c">carla::geom::Vector3D::y</a></div><div class="ttdeci">float y</div><div class="ttdef"><b>Definition</b> <a href="../../de/d70/geom_2Vector3D_8h_source.html#l00026">geom/Vector3D.h:26</a></div></div>
<div class="ttc" id="aclasscarla_1_1geom_1_1Vector3D_html_ab319cb76841047b082bce5047a6da98a"><div class="ttname"><a href="../../d9/dfe/classcarla_1_1geom_1_1Vector3D.html#ab319cb76841047b082bce5047a6da98a">carla::geom::Vector3D::z</a></div><div class="ttdeci">float z</div><div class="ttdef"><b>Definition</b> <a href="../../de/d70/geom_2Vector3D_8h_source.html#l00028">geom/Vector3D.h:28</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1InformationSet_html"><div class="ttname"><a href="../../d4/d28/classcarla_1_1road_1_1InformationSet.html">carla::road::InformationSet</a></div><div class="ttdef"><b>Definition</b> <a href="../../d2/d56/InformationSet_8h_source.html#l00020">InformationSet.h:20</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html">carla::road::Junction</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00024">road/Junction.h:24</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_a0c75525298b7d58b2a2ac44bf65613d2"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a0c75525298b7d58b2a2ac44bf65613d2">carla::road::Junction::_bounding_box</a></div><div class="ttdeci">carla::geom::BoundingBox _bounding_box</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00117">road/Junction.h:117</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_a736aa443c045123306d0368512af278a"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a736aa443c045123306d0368512af278a">carla::road::Junction::GetId</a></div><div class="ttdeci">JuncId GetId() const</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00060">road/Junction.h:60</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_a8a6c824ebacfdbecaeaa68ff7476213e"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a8a6c824ebacfdbecaeaa68ff7476213e">carla::road::Junction::_road_conflicts</a></div><div class="ttdeci">std::unordered_map&lt; RoadId, std::unordered_set&lt; RoadId &gt; &gt; _road_conflicts</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00115">road/Junction.h:115</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_a9f491d0ae7799de3471ea4fb4656c5a4"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#a9f491d0ae7799de3471ea4fb4656c5a4">carla::road::Junction::GetConnection</a></div><div class="ttdeci">Connection * GetConnection(ConId id)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00065">road/Junction.h:65</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_ab2259731367df6d09a58035805ab9438"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#ab2259731367df6d09a58035805ab9438">carla::road::Junction::_controllers</a></div><div class="ttdeci">std::set&lt; ContId &gt; _controllers</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00113">road/Junction.h:113</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Junction_html_abedc91af2eee0d254ed59a43f2a37744"><div class="ttname"><a href="../../dd/dc6/classcarla_1_1road_1_1Junction.html#abedc91af2eee0d254ed59a43f2a37744">carla::road::Junction::GetConnections</a></div><div class="ttdeci">std::unordered_map&lt; ConId, Connection &gt; &amp; GetConnections()</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00074">road/Junction.h:74</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSectionMap_html_af96afc2630e1b2dc30735e097f4abe4b"><div class="ttname"><a href="../../d9/dab/classcarla_1_1road_1_1LaneSectionMap.html#af96afc2630e1b2dc30735e097f4abe4b">carla::road::LaneSectionMap::Emplace</a></div><div class="ttdeci">LaneSection &amp; Emplace(SectionId id, double s)</div><div class="ttdef"><b>Definition</b> <a href="../../df/d60/LaneSectionMap_8h_source.html#l00026">LaneSectionMap.h:26</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSectionMap_html_afd0eebe15809491819f1335b7c7157e9"><div class="ttname"><a href="../../d9/dab/classcarla_1_1road_1_1LaneSectionMap.html#afd0eebe15809491819f1335b7c7157e9">carla::road::LaneSectionMap::GetById</a></div><div class="ttdeci">LaneSection &amp; GetById(SectionId id)</div><div class="ttdef"><b>Definition</b> <a href="../../df/d60/LaneSectionMap_8h_source.html#l00035">LaneSectionMap.h:35</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html">carla::road::LaneSection</a></div><div class="ttdef"><b>Definition</b> <a href="../../d6/dfd/LaneSection_8h_source.html#l00024">LaneSection.h:24</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html_a2a83bca663a2b7b6388daebed95704a9"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a2a83bca663a2b7b6388daebed95704a9">carla::road::LaneSection::GetDistance</a></div><div class="ttdeci">double GetDistance() const</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d5d/LaneSection_8cpp_source.html#l00013">LaneSection.cpp:13</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html_a36c10c9afb439bc2a2ee5247ff89c423"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a36c10c9afb439bc2a2ee5247ff89c423">carla::road::LaneSection::_road</a></div><div class="ttdeci">Road * _road</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dfd/LaneSection_8h_source.html#l00059">LaneSection.h:59</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html_a44408c7b07c60926a0bd77731ee7b723"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#a44408c7b07c60926a0bd77731ee7b723">carla::road::LaneSection::GetLane</a></div><div class="ttdeci">Lane * GetLane(const LaneId id)</div><div class="ttdef"><b>Definition</b> <a href="../../d6/d5d/LaneSection_8cpp_source.html#l00031">LaneSection.cpp:31</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html_ab2c069f270a0f6c6fbf7613a6d84dcab"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#ab2c069f270a0f6c6fbf7613a6d84dcab">carla::road::LaneSection::_lanes</a></div><div class="ttdeci">std::map&lt; LaneId, Lane &gt; _lanes</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dfd/LaneSection_8h_source.html#l00061">LaneSection.h:61</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1LaneSection_html_adbb28d9d213f5f9adbdb30fd20dee17f"><div class="ttname"><a href="../../dd/d80/classcarla_1_1road_1_1LaneSection.html#adbb28d9d213f5f9adbdb30fd20dee17f">carla::road::LaneSection::_id</a></div><div class="ttdeci">const SectionId _id</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dfd/LaneSection_8h_source.html#l00055">LaneSection.h:55</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html">carla::road::Lane</a></div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00025">Lane.h:25</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a1f7bbd63d1568c63cc15966ab380d3f5"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a1f7bbd63d1568c63cc15966ab380d3f5">carla::road::Lane::_successor</a></div><div class="ttdeci">LaneId _successor</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00136">Lane.h:136</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a24c2344469c5dbcae990bd1212462a5a"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a24c2344469c5dbcae990bd1212462a5a">carla::road::Lane::_next_lanes</a></div><div class="ttdeci">std::vector&lt; Lane * &gt; _next_lanes</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00140">Lane.h:140</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a5faf5a805240e75a109b5ce23eb533bf"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a5faf5a805240e75a109b5ce23eb533bf">carla::road::Lane::_predecessor</a></div><div class="ttdeci">LaneId _predecessor</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00138">Lane.h:138</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a7b84fedfe3ac06e2568d31de758a9247"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247">carla::road::Lane::LaneType</a></div><div class="ttdeci">LaneType</div><div class="ttdoc">可以作为标志使用</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00029">Lane.h:29</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a8060dc318b0fafb0fc2e609eb5954723">carla::road::Lane::LaneType::Driving</a></div><div class="ttdeci">@ Driving</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a7b84fedfe3ac06e2568d31de758a9247a83cb4c144b3d6ee1a847bee51a44b933"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247a83cb4c144b3d6ee1a847bee51a44b933">carla::road::Lane::LaneType::Shoulder</a></div><div class="ttdeci">@ Shoulder</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a7b84fedfe3ac06e2568d31de758a9247aed36a1ef76a59ee3f15180e0441188ad"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a7b84fedfe3ac06e2568d31de758a9247aed36a1ef76a59ee3f15180e0441188ad">carla::road::Lane::LaneType::Any</a></div><div class="ttdeci">@ Any</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_a80044b7e6e4d0412983b1a1208ff14a2"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#a80044b7e6e4d0412983b1a1208ff14a2">carla::road::Lane::GetPredecessor</a></div><div class="ttdeci">LaneId GetPredecessor() const</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00102">Lane.h:102</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_aac55d0ad269a34c3ed1bc80795fa36cc"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#aac55d0ad269a34c3ed1bc80795fa36cc">carla::road::Lane::GetSuccessor</a></div><div class="ttdeci">LaneId GetSuccessor() const</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00098">Lane.h:98</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_ad5d915a4e8c4939939bbc3bfeb393503"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#ad5d915a4e8c4939939bbc3bfeb393503">carla::road::Lane::_lane_section</a></div><div class="ttdeci">LaneSection * _lane_section</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00126">Lane.h:126</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_ad9e10990b5e4376cc0dd99bd4bfe88da"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#ad9e10990b5e4376cc0dd99bd4bfe88da">carla::road::Lane::_id</a></div><div class="ttdeci">LaneId _id</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00128">Lane.h:128</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_ae1a5f15925f91fca2b5d759fb53901f3"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#ae1a5f15925f91fca2b5d759fb53901f3">carla::road::Lane::GetId</a></div><div class="ttdeci">LaneId GetId() const</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_af5d883c72d6c8efb71c0647128f79690"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#af5d883c72d6c8efb71c0647128f79690">carla::road::Lane::_level</a></div><div class="ttdeci">bool _level</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00134">Lane.h:134</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Lane_html_af60a3fdc211996954bc388100d4a228c"><div class="ttname"><a href="../../df/d85/classcarla_1_1road_1_1Lane.html#af60a3fdc211996954bc388100d4a228c">carla::road::Lane::_type</a></div><div class="ttdeci">LaneType _type</div><div class="ttdef"><b>Definition</b> <a href="../../d8/d27/Lane_8h_source.html#l00132">Lane.h:132</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a06c2866794ac071e99c6e54e804288b5"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a06c2866794ac071e99c6e54e804288b5">carla::road::MapBuilder::_temp_signal_container</a></div><div class="ttdeci">std::unordered_map&lt; SignId, std::unique_ptr&lt; Signal &gt; &gt; _temp_signal_container</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/MapBuilder_8h_source.html#l00418">MapBuilder.h:418</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a082a04a1e6e5f896b5acf13c075c3fba"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a082a04a1e6e5f896b5acf13c075c3fba">carla::road::MapBuilder::AddRoadGeometryArc</a></div><div class="ttdeci">void AddRoadGeometryArc(carla::road::Road *road, const double s, const double x, const double y, const double hdg, const double length, const double curvature)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a0d868ec1b1b34c34a5968dfd08dba4f1"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a0d868ec1b1b34c34a5968dfd08dba4f1">carla::road::MapBuilder::_map_data</a></div><div class="ttdeci">MapData _map_data</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/MapBuilder_8h_source.html#l00365">MapBuilder.h:365</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a1431466dd1dff00318a1de6ee3fa2e6f"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a1431466dd1dff00318a1de6ee3fa2e6f">carla::road::MapBuilder::CreateController</a></div><div class="ttdeci">void CreateController(const ContId controller_id, const std::string controller_name, const uint32_t controller_sequence, const std::set&lt; road::SignId &gt; &amp;&amp;signals)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a1484f5063da0a24cdc1e3d1f9560186d"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a1484f5063da0a24cdc1e3d1f9560186d">carla::road::MapBuilder::AddRoadSectionLane</a></div><div class="ttdeci">carla::road::Lane * AddRoadSectionLane(carla::road::LaneSection *section, const LaneId lane_id, const uint32_t lane_type, const bool lane_level, const LaneId predecessor, const LaneId successor)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a2144d72161716cdb85d3bf04f4d15534"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a2144d72161716cdb85d3bf04f4d15534">carla::road::MapBuilder::AddSignalPositionRoad</a></div><div class="ttdeci">void AddSignalPositionRoad(const SignId signal_id, const RoadId road_id, const double s, const double t, const double zOffset, const double hOffset, const double pitch, const double roll)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a28e5c8dd8b1100cc547ee3b1b7e41eb9"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a28e5c8dd8b1100cc547ee3b1b7e41eb9">carla::road::MapBuilder::AddSignalPositionInertial</a></div><div class="ttdeci">void AddSignalPositionInertial(const SignId signal_id, const double x, const double y, const double z, const double hdg, const double pitch, const double roll)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a290e593d53d5a58895c542e3db1012f6"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a290e593d53d5a58895c542e3db1012f6">carla::road::MapBuilder::CreateRoadSpeed</a></div><div class="ttdeci">void CreateRoadSpeed(Road *road, const double s, const std::string type, const double max, const std::string unit)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a3bd8ae2f59e33c89d34144f003bd8e7b"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a3bd8ae2f59e33c89d34144f003bd8e7b">carla::road::MapBuilder::AddRoad</a></div><div class="ttdeci">carla::road::Road * AddRoad(const RoadId road_id, const std::string name, const double length, const JuncId junction_id, const RoadId predecessor, const RoadId successor)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a42bde86ce9e8116ad27afcf8a10cc839"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a42bde86ce9e8116ad27afcf8a10cc839">carla::road::MapBuilder::CreateSectionOffset</a></div><div class="ttdeci">void CreateSectionOffset(Road *road, const double s, const double a, const double b, const double c, const double d)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a43256ab478dc6251af976c7b466b0c45"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a43256ab478dc6251af976c7b466b0c45">carla::road::MapBuilder::AddJunctionController</a></div><div class="ttdeci">void AddJunctionController(const JuncId junction_id, std::set&lt; ContId &gt; &amp;&amp;controllers)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a4c51ad576d6a0f4078594d571b64a4d4"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a4c51ad576d6a0f4078594d571b64a4d4">carla::road::MapBuilder::AddRoadSection</a></div><div class="ttdeci">carla::road::LaneSection * AddRoadSection(carla::road::Road *road, const SectionId id, const double s)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a514a195a88e36e8611fe69ca4ccd2c63"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a514a195a88e36e8611fe69ca4ccd2c63">carla::road::MapBuilder::CreateLaneAccess</a></div><div class="ttdeci">void CreateLaneAccess(Lane *lane, const double s, const std::string restriction)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a5484346171a02a134007986113c30379"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a5484346171a02a134007986113c30379">carla::road::MapBuilder::AddRoadObjectCrosswalk</a></div><div class="ttdeci">void AddRoadObjectCrosswalk(Road *road, const std::string name, const double s, const double t, const double zOffset, const double hdg, const double pitch, const double roll, const std::string orientation, const double width, const double length, const std::vector&lt; road::element::CrosswalkPoint &gt; points)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a563fe0c1c965d2f01f10d4ba1aa55b9e"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a563fe0c1c965d2f01f10d4ba1aa55b9e">carla::road::MapBuilder::CreateLaneHeight</a></div><div class="ttdeci">void CreateLaneHeight(Lane *lane, const double s, const double inner, const double outer)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a59c3796375f1ca76276763f94b923afc"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a59c3796375f1ca76276763f94b923afc">carla::road::MapBuilder::ComputeSignalTransform</a></div><div class="ttdeci">geom::Transform ComputeSignalTransform(std::unique_ptr&lt; Signal &gt; &amp;signal, MapData &amp;data)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a60adfc4b42c04342acfea8b0acd67516"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a60adfc4b42c04342acfea8b0acd67516">carla::road::MapBuilder::GetLane</a></div><div class="ttdeci">Lane * GetLane(const RoadId road_id, const LaneId lane_id, const double s)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a611de6c7856168347fddf40228704128"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a611de6c7856168347fddf40228704128">carla::road::MapBuilder::CreateLaneBorder</a></div><div class="ttdeci">void CreateLaneBorder(Lane *lane, const double s, const double a, const double b, const double c, const double d)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a681b6b968d9fc6a9477dca966ec3e09e"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a681b6b968d9fc6a9477dca966ec3e09e">carla::road::MapBuilder::ComputeJunctionRoadConflicts</a></div><div class="ttdeci">void ComputeJunctionRoadConflicts(Map &amp;map)</div><div class="ttdoc">Compute the conflicts of the roads (intersecting roads) // 计算道路冲突（相交道路）</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a687e51ee805d2daecf80de5523f8ee79"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a687e51ee805d2daecf80de5523f8ee79">carla::road::MapBuilder::AddValidityToSignalReference</a></div><div class="ttdeci">void AddValidityToSignalReference(element::RoadInfoSignal *signal_reference, const LaneId from_lane, const LaneId to_lane)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a720e10d05c31b993837d6446bf68b54a"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a720e10d05c31b993837d6446bf68b54a">carla::road::MapBuilder::CreateLaneRule</a></div><div class="ttdeci">void CreateLaneRule(Lane *lane, const double s, const std::string value)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a76406231d5de92bdeda1b869d0da7eab"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a76406231d5de92bdeda1b869d0da7eab">carla::road::MapBuilder::SolveControllerAndJuntionReferences</a></div><div class="ttdeci">void SolveControllerAndJuntionReferences()</div><div class="ttdoc">Solve the references between Controllers and Juntions // 解决控制器和交叉口之间的引用</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a76ee768c427a5d1c0c7023a88c966f9e"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a76ee768c427a5d1c0c7023a88c966f9e">carla::road::MapBuilder::AddRoadElevationProfile</a></div><div class="ttdeci">void AddRoadElevationProfile(Road *road, const double s, const double a, const double b, const double c, const double d)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a7b0bb12125e15fd246924aee12327e7e"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a7b0bb12125e15fd246924aee12327e7e">carla::road::MapBuilder::Build</a></div><div class="ttdeci">boost::optional&lt; Map &gt; Build()</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a7ca3a4005f3f53fdca75465b7782696b"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a7ca3a4005f3f53fdca75465b7782696b">carla::road::MapBuilder::AddJunction</a></div><div class="ttdeci">void AddJunction(const JuncId id, const std::string name)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a8562b5754037a8096bff3c51c84691ae"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a8562b5754037a8096bff3c51c84691ae">carla::road::MapBuilder::CreateLaneSpeed</a></div><div class="ttdeci">void CreateLaneSpeed(Lane *lane, const double s, const double max, const std::string unit)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a88d0c7d56fc99ee3f4ea852c6d6ee55b"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a88d0c7d56fc99ee3f4ea852c6d6ee55b">carla::road::MapBuilder::_temp_road_info_container</a></div><div class="ttdeci">std::unordered_map&lt; Road *, std::vector&lt; std::unique_ptr&lt; element::RoadInfo &gt; &gt; &gt; _temp_road_info_container</div><div class="ttdoc">Map to temporary store all the road and lane infos until the map is // 用于临时存储所有道路和车道信息，直到地图构建完成，因此可以一...</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/MapBuilder_8h_source.html#l00412">MapBuilder.h:412</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a8a75b8af56314c29891cb5c91a7fd00d"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a8a75b8af56314c29891cb5c91a7fd00d">carla::road::MapBuilder::AddLaneLink</a></div><div class="ttdeci">void AddLaneLink(const JuncId junction_id, const ConId connection_id, const LaneId from, const LaneId to)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a93ee14d452625ad1da2bc7a9716cebaf"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a93ee14d452625ad1da2bc7a9716cebaf">carla::road::MapBuilder::AddDependencyToSignal</a></div><div class="ttdeci">void AddDependencyToSignal(const SignId signal_id, const std::string dependency_id, const std::string dependency_type)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a9ab60d9b8784f35b90893fbc32f703d2"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a9ab60d9b8784f35b90893fbc32f703d2">carla::road::MapBuilder::AddRoadGeometryParamPoly3</a></div><div class="ttdeci">void AddRoadGeometryParamPoly3(carla::road::Road *road, const double s, const double x, const double y, const double hdg, const double length, const double aU, const double bU, const double cU, const double dU, const double aV, const double bV, const double cV, const double dV, const std::string p_range)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_a9f7acb42642bed1a1bf1a21c2b1c9931"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#a9f7acb42642bed1a1bf1a21c2b1c9931">carla::road::MapBuilder::GetJunctionLanes</a></div><div class="ttdeci">std::vector&lt; std::pair&lt; RoadId, LaneId &gt; &gt; GetJunctionLanes(JuncId junction_id, RoadId road_id, LaneId lane_id)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_aa01b79061fa5fc167617bc32272a2bb7"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aa01b79061fa5fc167617bc32272a2bb7">carla::road::MapBuilder::RemoveZeroLaneValiditySignalReferences</a></div><div class="ttdeci">void RemoveZeroLaneValiditySignalReferences()</div><div class="ttdoc">Removes signal references with lane validity equal to [0,0] // 移除车道有效性等于[0,0]的信号引用 as they have no ef...</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_aa724a828b0aca026efbdc65855ee23c0"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aa724a828b0aca026efbdc65855ee23c0">carla::road::MapBuilder::CreateRoadMarkTypeLine</a></div><div class="ttdeci">void CreateRoadMarkTypeLine(Lane *lane, const int road_mark_id, const double length, const double space, const double tOffset, const double s, const std::string rule, const double width)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ab0d9fe008defb1501769cf62f8cadf14"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab0d9fe008defb1501769cf62f8cadf14">carla::road::MapBuilder::CreateJunctionBoundingBoxes</a></div><div class="ttdeci">void CreateJunctionBoundingBoxes(Map &amp;map)</div><div class="ttdoc">Create the bounding boxes of each junction // 创建每个交叉口的边界框</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ab572d01d8dc4f2d4dbbecbc382b9e4ed"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ab572d01d8dc4f2d4dbbecbc382b9e4ed">carla::road::MapBuilder::AddSignalReference</a></div><div class="ttdeci">element::RoadInfoSignal * AddSignalReference(Road *road, const SignId signal_id, const double s_position, const double t_position, const std::string signal_reference_orientation)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_abae77cd3e00e9be6bde4c3d58ab025d0"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abae77cd3e00e9be6bde4c3d58ab025d0">carla::road::MapBuilder::_temp_lane_info_container</a></div><div class="ttdeci">std::unordered_map&lt; Lane *, std::vector&lt; std::unique_ptr&lt; element::RoadInfo &gt; &gt; &gt; _temp_lane_info_container</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/MapBuilder_8h_source.html#l00415">MapBuilder.h:415</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_abba9f4ce52cfc184ea1263d0f32eeaf9"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#abba9f4ce52cfc184ea1263d0f32eeaf9">carla::road::MapBuilder::_temp_signal_reference_container</a></div><div class="ttdeci">std::vector&lt; element::RoadInfoSignal * &gt; _temp_signal_reference_container</div><div class="ttdef"><b>Definition</b> <a href="../../de/d3b/MapBuilder_8h_source.html#l00420">MapBuilder.h:420</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ac11b2606c1d84fb1a606aba760cf93e6"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ac11b2606c1d84fb1a606aba760cf93e6">carla::road::MapBuilder::AddRoadGeometryPoly3</a></div><div class="ttdeci">void AddRoadGeometryPoly3(carla::road::Road *road, const double s, const double x, const double y, const double hdg, const double length, const double a, const double b, const double c, const double d)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ac5ab2aea311a2bb6e43258c73bd57b49"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ac5ab2aea311a2bb6e43258c73bd57b49">carla::road::MapBuilder::GenerateDefaultValiditiesForSignalReferences</a></div><div class="ttdeci">void GenerateDefaultValiditiesForSignalReferences()</div><div class="ttdoc">Generates a default validity field for signal references with missing validity record in OpenDRIVE //...</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_aca70ccf621b7b40053014478bb934410"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#aca70ccf621b7b40053014478bb934410">carla::road::MapBuilder::AddConnection</a></div><div class="ttdeci">void AddConnection(const JuncId junction_id, const ConId connection_id, const RoadId incoming_road, const RoadId connecting_road)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ace2456563cabdf60c2c2e601c189bce5"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ace2456563cabdf60c2c2e601c189bce5">carla::road::MapBuilder::AddSignal</a></div><div class="ttdeci">element::RoadInfoSignal * AddSignal(Road *road, const SignId signal_id, const double s, const double t, const std::string name, const std::string dynamic, const std::string orientation, const double zOffset, const std::string country, const std::string type, const std::string subtype, const double value, const std::string unit, const double height, const double width, const std::string text, const double hOffset, const double pitch, const double roll)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ad4f4ecd2bf090c849e743302db8fde85"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ad4f4ecd2bf090c849e743302db8fde85">carla::road::MapBuilder::CreateRoadMark</a></div><div class="ttdeci">void CreateRoadMark(Lane *lane, const int road_mark_id, const double s, const std::string type, const std::string weight, const std::string color, const std::string material, const double width, const std::string lane_change, const double height, const std::string type_name, const double type_width)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ad84a5423baee8d92269aab9d8723c68a"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ad84a5423baee8d92269aab9d8723c68a">carla::road::MapBuilder::GetLaneNext</a></div><div class="ttdeci">std::vector&lt; Lane * &gt; GetLaneNext(RoadId road_id, SectionId section_id, LaneId lane_id)</div><div class="ttdoc">Return a list of pointers to all lanes from a lane (using road and // 返回从某车道到所有车道的指针列表（使用道路和 junction...</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_add044e6ce2e3342454af48e9db6a7876"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#add044e6ce2e3342454af48e9db6a7876">carla::road::MapBuilder::CreateLaneWidth</a></div><div class="ttdeci">void CreateLaneWidth(Lane *lane, const double s, const double a, const double b, const double c, const double d)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ae08e6f0bdd3b6efe2e30ca19effd3a97"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae08e6f0bdd3b6efe2e30ca19effd3a97">carla::road::MapBuilder::SolveSignalReferencesAndTransforms</a></div><div class="ttdeci">void SolveSignalReferencesAndTransforms()</div><div class="ttdoc">Solves the signal references in the road // 解决道路中的信号引用</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ae13dbbe72540773614b4e89898582530"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae13dbbe72540773614b4e89898582530">carla::road::MapBuilder::CreateLaneVisibility</a></div><div class="ttdeci">void CreateLaneVisibility(Lane *lane, const double s, const double forward, const double back, const double left, const double right)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ae3f4192b6f1b0737a5d12923fc8da239"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae3f4192b6f1b0737a5d12923fc8da239">carla::road::MapBuilder::CreatePointersBetweenRoadSegments</a></div><div class="ttdeci">void CreatePointersBetweenRoadSegments()</div><div class="ttdoc">Create the pointers between RoadSegments based on the ids. // 根据标识符创建道路段之间的指针</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_ae78c5880d7bd9edde4764d054037164d"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#ae78c5880d7bd9edde4764d054037164d">carla::road::MapBuilder::GetRoad</a></div><div class="ttdeci">Road * GetRoad(const RoadId road_id)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_af1f3d98883d99feb88d4b94535b39f8b"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af1f3d98883d99feb88d4b94535b39f8b">carla::road::MapBuilder::CreateLaneMaterial</a></div><div class="ttdeci">void CreateLaneMaterial(Lane *lane, const double s, const std::string surface, const double friction, const double roughness)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_af3773de062a9e9aec4310f024f19ba28"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af3773de062a9e9aec4310f024f19ba28">carla::road::MapBuilder::CheckSignalsOnRoads</a></div><div class="ttdeci">void CheckSignalsOnRoads(Map &amp;map)</div><div class="ttdoc">Checks signals overlapping driving lanes and emits a warning // 检查重叠驾驶车道的信号并发出警告</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_af435a180c70620b9d7ddc9f3f921356b"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af435a180c70620b9d7ddc9f3f921356b">carla::road::MapBuilder::AddRoadGeometrySpiral</a></div><div class="ttdeci">void AddRoadGeometrySpiral(carla::road::Road *road, const double s, const double x, const double y, const double hdg, const double length, const double curvStart, const double curvEnd)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_af6ed1543d744e5674f4421f8278991ba"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af6ed1543d744e5674f4421f8278991ba">carla::road::MapBuilder::AddRoadGeometryLine</a></div><div class="ttdeci">void AddRoadGeometryLine(carla::road::Road *road, const double s, const double x, const double y, const double hdg, const double length)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapBuilder_html_af7818fa90e4281abc159f08e31a9fb00"><div class="ttname"><a href="../../de/d16/classcarla_1_1road_1_1MapBuilder.html#af7818fa90e4281abc159f08e31a9fb00">carla::road::MapBuilder::GetEdgeLanePointer</a></div><div class="ttdeci">Lane * GetEdgeLanePointer(RoadId road_id, bool from_start, LaneId lane_id)</div><div class="ttdoc">Return the pointer to a lane object. // 返回车道对象的指针</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html">carla::road::MapData</a></div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/MapData_8h_source.html#l00029">MapData.h:29</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_a2be95bb0e432f3ecfa159924eb4c1c55"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a2be95bb0e432f3ecfa159924eb4c1c55">carla::road::MapData::_roads</a></div><div class="ttdeci">std::unordered_map&lt; RoadId, Road &gt; _roads</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/MapData_8h_source.html#l00094">MapData.h:94</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_a7b4838408fa475389a01b2d451b662e7"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a7b4838408fa475389a01b2d451b662e7">carla::road::MapData::GetRoad</a></div><div class="ttdeci">Road &amp; GetRoad(const RoadId id)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d71/MapData_8cpp_source.html#l00021">MapData.cpp:21</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_a98e1b8ce8d1bd034acd4aace4d2dd8b4"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#a98e1b8ce8d1bd034acd4aace4d2dd8b4">carla::road::MapData::_controllers</a></div><div class="ttdeci">std::unordered_map&lt; ContId, std::unique_ptr&lt; Controller &gt; &gt; _controllers</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/MapData_8h_source.html#l00100">MapData.h:100</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_acc4bd7e8be09ba14390e504be5216d3f"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#acc4bd7e8be09ba14390e504be5216d3f">carla::road::MapData::ContainsRoad</a></div><div class="ttdeci">bool ContainsRoad(RoadId id) const</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/MapData_8h_source.html#l00048">MapData.h:48</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_ada1ec7c5f6908e9b4cebc302aa4ec466"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#ada1ec7c5f6908e9b4cebc302aa4ec466">carla::road::MapData::GetJunctions</a></div><div class="ttdeci">std::unordered_map&lt; JuncId, Junction &gt; &amp; GetJunctions()</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d71/MapData_8cpp_source.html#l00017">MapData.cpp:17</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_af580facf9de3fe646c8984dc2365301d"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#af580facf9de3fe646c8984dc2365301d">carla::road::MapData::GetJunction</a></div><div class="ttdeci">Junction * GetJunction(JuncId id)</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d71/MapData_8cpp_source.html#l00029">MapData.cpp:29</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1MapData_html_afb261aeb79a5c2784d44abf7cfa1326c"><div class="ttname"><a href="../../da/d3b/classcarla_1_1road_1_1MapData.html#afb261aeb79a5c2784d44abf7cfa1326c">carla::road::MapData::_signals</a></div><div class="ttdeci">std::unordered_map&lt; SignId, std::unique_ptr&lt; Signal &gt; &gt; _signals</div><div class="ttdef"><b>Definition</b> <a href="../../d5/db7/MapData_8h_source.html#l00098">MapData.h:98</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html">carla::road::Road</a></div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00032">Road.h:32</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a05fdfb37a163bded2d3614ee1cb3a818"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a05fdfb37a163bded2d3614ee1cb3a818">carla::road::Road::_map_data</a></div><div class="ttdeci">MapData * _map_data</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00183">Road.h:183</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a0d4daeed04d8276c84e7db24a36dbff6"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a0d4daeed04d8276c84e7db24a36dbff6">carla::road::Road::GetPredecessor</a></div><div class="ttdeci">RoadId GetPredecessor() const</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a11acd9741132199eb349204c1def107f"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a11acd9741132199eb349204c1def107f">carla::road::Road::GetLength</a></div><div class="ttdeci">double GetLength() const</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a242d8d41927bee937a2ac46247a78c5c"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a242d8d41927bee937a2ac46247a78c5c">carla::road::Road::GetPrevLane</a></div><div class="ttdeci">Lane * GetPrevLane(const double s, const LaneId lane_id)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a364d48e04217afe4a0c57565002a13e7"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a364d48e04217afe4a0c57565002a13e7">carla::road::Road::_length</a></div><div class="ttdeci">double _length</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00189">Road.h:189</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a3fea1511d0c5ceb2dca10090b23d616e"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a3fea1511d0c5ceb2dca10090b23d616e">carla::road::Road::_junction_id</a></div><div class="ttdeci">JuncId _junction_id</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00193">Road.h:193</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a4f76cd62723468f99e24723485d93d26"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a4f76cd62723468f99e24723485d93d26">carla::road::Road::_id</a></div><div class="ttdeci">RoadId _id</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00185">Road.h:185</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a51794196f4af00d66d8543c9b30aef2c"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a51794196f4af00d66d8543c9b30aef2c">carla::road::Road::_lane_sections</a></div><div class="ttdeci">LaneSectionMap _lane_sections</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00195">Road.h:195</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a56ce24902d4e496e30f9260718d4a376"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a56ce24902d4e496e30f9260718d4a376">carla::road::Road::GetSuccessor</a></div><div class="ttdeci">RoadId GetSuccessor() const</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a57e376489ef0d7fe752a310a18adf0c8"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a57e376489ef0d7fe752a310a18adf0c8">carla::road::Road::_nexts</a></div><div class="ttdeci">std::vector&lt; Road * &gt; _nexts</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00203">Road.h:203</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a58e44ae16af1a84e2d68de7d64a4085c"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a58e44ae16af1a84e2d68de7d64a4085c">carla::road::Road::_prevs</a></div><div class="ttdeci">std::vector&lt; Road * &gt; _prevs</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00205">Road.h:205</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a5fbd6ce83670d0394b56a89f0b7be239"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a5fbd6ce83670d0394b56a89f0b7be239">carla::road::Road::GetId</a></div><div class="ttdeci">RoadId GetId() const</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a6c90082d65eb8e2fbb8d9db51136563a"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a6c90082d65eb8e2fbb8d9db51136563a">carla::road::Road::GetStartSection</a></div><div class="ttdeci">LaneSection * GetStartSection(LaneId id)</div><div class="ttdoc">获取给定车道 ID 的起始车道段</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a7e9150dc29a3ab8b9a529ffb11205980"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a7e9150dc29a3ab8b9a529ffb11205980">carla::road::Road::GetNextLane</a></div><div class="ttdeci">Lane * GetNextLane(const double s, const LaneId lane_id)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_a88c0e4c9f38925e1e309a9d7adce06f7"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#a88c0e4c9f38925e1e309a9d7adce06f7">carla::road::Road::_is_junction</a></div><div class="ttdeci">bool _is_junction</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00191">Road.h:191</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_aa50c6bda434b04c6adb0fca5a26df4a9"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#aa50c6bda434b04c6adb0fca5a26df4a9">carla::road::Road::GetLaneByDistance</a></div><div class="ttdeci">Lane &amp; GetLaneByDistance(double s, LaneId lane_id)</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_acbea6fe4d600f5f2a84d7ae16390aee3"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#acbea6fe4d600f5f2a84d7ae16390aee3">carla::road::Road::GetLanesByDistance</a></div><div class="ttdeci">std::vector&lt; Lane * &gt; GetLanesByDistance(double s)</div><div class="ttdoc">在特定的 s 值获取所有车道</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_ad82403b75d7d9fd7a16bfbd36977854e"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#ad82403b75d7d9fd7a16bfbd36977854e">carla::road::Road::_successor</a></div><div class="ttdeci">RoadId _successor</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00197">Road.h:197</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_add5e8cae755c9981a715426d29f14887"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#add5e8cae755c9981a715426d29f14887">carla::road::Road::GetDirectedPointInNoLaneOffset</a></div><div class="ttdeci">element::DirectedPoint GetDirectedPointInNoLaneOffset(const double s) const</div><div class="ttdoc">返回指定距离的中心点（车道 0）的导向点，不考虑车道偏移</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_ae4e3c1ad71021067f9a444b98f78b335"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#ae4e3c1ad71021067f9a444b98f78b335">carla::road::Road::GetEndSection</a></div><div class="ttdeci">LaneSection * GetEndSection(LaneId id)</div><div class="ttdoc">获取给定车道 ID 的结束车道段</div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_aebf343db3f93cbf9fda62a1eb4156751"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#aebf343db3f93cbf9fda62a1eb4156751">carla::road::Road::_name</a></div><div class="ttdeci">std::string _name</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00187">Road.h:187</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1Road_html_af0d9106ed41000c139ac8038cddf3530"><div class="ttname"><a href="../../dd/de6/classcarla_1_1road_1_1Road.html#af0d9106ed41000c139ac8038cddf3530">carla::road::Road::_predecessor</a></div><div class="ttdeci">RoadId _predecessor</div><div class="ttdef"><b>Definition</b> <a href="../../db/d48/Road_8h_source.html#l00199">Road.h:199</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1SignalType_html_aa4bab3287ce92cf7e1ba04767775ebf0"><div class="ttname"><a href="../../db/d47/classcarla_1_1road_1_1SignalType.html#aa4bab3287ce92cf7e1ba04767775ebf0">carla::road::SignalType::IsTrafficLight</a></div><div class="ttdeci">static bool IsTrafficLight(const std::string &amp;type)</div><div class="ttdef"><b>Definition</b> <a href="../../d5/dfc/SignalType_8cpp_source.html#l00121">SignalType.cpp:121</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoGeometry_html"><div class="ttname"><a href="../../d4/dcb/classcarla_1_1road_1_1element_1_1RoadInfoGeometry.html">carla::road::element::RoadInfoGeometry</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/d8e/RoadInfoGeometry_8h_source.html#l00017">RoadInfoGeometry.h:17</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoMarkRecord_html_a7ab9501c5086223a821a827e77edf7ec"><div class="ttname"><a href="../../d1/df9/classcarla_1_1road_1_1element_1_1RoadInfoMarkRecord.html#a7ab9501c5086223a821a827e77edf7ec">carla::road::element::RoadInfoMarkRecord::LaneChange</a></div><div class="ttdeci">LaneChange</div><div class="ttdoc">可用作标志</div><div class="ttdef"><b>Definition</b> <a href="../../dd/d32/RoadInfoMarkRecord_8h_source.html#l00027">RoadInfoMarkRecord.h:27</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html">carla::road::element::RoadInfoSignal</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00016">RoadInfoSignal.h:16</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_a6a9f65e93420edc1f2cbe36fa1cacd39"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6a9f65e93420edc1f2cbe36fa1cacd39">carla::road::element::RoadInfoSignal::_validities</a></div><div class="ttdeci">std::vector&lt; LaneValidity &gt; _validities</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00109">RoadInfoSignal.h:109</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_a6f1bd6d09eb77d84b3b6ec31b1aff6cc"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#a6f1bd6d09eb77d84b3b6ec31b1aff6cc">carla::road::element::RoadInfoSignal::GetS</a></div><div class="ttdeci">double GetS() const</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00075">RoadInfoSignal.h:75</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_ac3a2a7ee39de73cfce80b50c9af8ff1f"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ac3a2a7ee39de73cfce80b50c9af8ff1f">carla::road::element::RoadInfoSignal::_signal</a></div><div class="ttdeci">Signal * _signal</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00104">RoadInfoSignal.h:104</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_acf4c1bb47ec1a4fac2505022dc551fcd"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#acf4c1bb47ec1a4fac2505022dc551fcd">carla::road::element::RoadInfoSignal::_signal_id</a></div><div class="ttdeci">SignId _signal_id</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00103">RoadInfoSignal.h:103</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_ae33c044a531e19f153ce80c16e531397"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ae33c044a531e19f153ce80c16e531397">carla::road::element::RoadInfoSignal::GetOrientation</a></div><div class="ttdeci">SignalOrientation GetOrientation() const</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00085">RoadInfoSignal.h:85</a></div></div>
<div class="ttc" id="aclasscarla_1_1road_1_1element_1_1RoadInfoSignal_html_ae8ba47fa9b90f5e36e8e9fb56039366d"><div class="ttname"><a href="../../d5/d51/classcarla_1_1road_1_1element_1_1RoadInfoSignal.html#ae8ba47fa9b90f5e36e8e9fb56039366d">carla::road::element::RoadInfoSignal::GetRoadId</a></div><div class="ttdeci">RoadId GetRoadId() const</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d1d/RoadInfoSignal_8h_source.html#l00065">RoadInfoSignal.h:65</a></div></div>
<div class="ttc" id="anamespacecarla_1_1multigpu_html_ab43bb7f54aaed5c720effba0e848be1c"><div class="ttname"><a href="../../dd/d17/namespacecarla_1_1multigpu.html#ab43bb7f54aaed5c720effba0e848be1c">carla::multigpu::false</a></div><div class="ttdeci">return false</div><div class="ttdef"><b>Definition</b> <a href="../../d6/da8/primaryCommands_8cpp_source.html#l00222">primaryCommands.cpp:222</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_1_1element_html"><div class="ttname"><a href="../../df/dc1/namespacecarla_1_1road_1_1element.html">carla::road::element</a></div><div class="ttdef"><b>Definition</b> <a href="../../de/d8e/SignComponent_8h_source.html#l00021">SignComponent.h:22</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a0eafa3a966293c70fdfd033a0b961ca3"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a0eafa3a966293c70fdfd033a0b961ca3">carla::road::SectionId</a></div><div class="ttdeci">uint32_t SectionId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00029">RoadTypes.h:29</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a25b64180ba09083d08dbd3dc5a94807f"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a25b64180ba09083d08dbd3dc5a94807f">carla::road::JuncId</a></div><div class="ttdeci">int32_t JuncId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00023">RoadTypes.h:23</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a2a6871c9b73093b94512acd5d7e5faa4"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a2a6871c9b73093b94512acd5d7e5faa4">carla::road::ContId</a></div><div class="ttdeci">std::string ContId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00041">RoadTypes.h:41</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a819c473e6007333e3a037a76220707d8a5721181d37fddc4cadf9db2a90249669"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a5721181d37fddc4cadf9db2a90249669">carla::road::Both</a></div><div class="ttdeci">@ Both</div><div class="ttdef"><b>Definition</b> <a href="../../d0/def/Signal_8h_source.html#l00025">Signal.h:24</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a819c473e6007333e3a037a76220707d8a7a8cfd44e6ff56176312681582613f42"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a7a8cfd44e6ff56176312681582613f42">carla::road::Positive</a></div><div class="ttdeci">@ Positive</div><div class="ttdef"><b>Definition</b> <a href="../../d0/def/Signal_8h_source.html#l00022">Signal.h:22</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a819c473e6007333e3a037a76220707d8a81dda9bac0450f020afb784dc5fb0196"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a819c473e6007333e3a037a76220707d8a81dda9bac0450f020afb784dc5fb0196">carla::road::Negative</a></div><div class="ttdeci">@ Negative</div><div class="ttdef"><b>Definition</b> <a href="../../d0/def/Signal_8h_source.html#l00023">Signal.h:23</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_a86d9109bfe533008a3a7391159aa6d5b"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#a86d9109bfe533008a3a7391159aa6d5b">carla::road::LaneId</a></div><div class="ttdeci">int32_t LaneId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00026">RoadTypes.h:26</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_ad5e0aeb7e0341f9128c506ddb88270ef"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#ad5e0aeb7e0341f9128c506ddb88270ef">carla::road::RoadId</a></div><div class="ttdeci">uint32_t RoadId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00020">RoadTypes.h:20</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_aed1a767ba963bdb667b5f0b9f97147a3"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#aed1a767ba963bdb667b5f0b9f97147a3">carla::road::SignId</a></div><div class="ttdeci">std::string SignId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00035">RoadTypes.h:35</a></div></div>
<div class="ttc" id="anamespacecarla_1_1road_html_af1e9b9c042c2ad1550d15f607e3c5f05"><div class="ttname"><a href="../../de/d26/namespacecarla_1_1road.html#af1e9b9c042c2ad1550d15f607e3c5f05">carla::road::ConId</a></div><div class="ttdeci">uint32_t ConId</div><div class="ttdef"><b>Definition</b> <a href="../../d6/dbb/RoadTypes_8h_source.html#l00038">RoadTypes.h:38</a></div></div>
<div class="ttc" id="anamespacecarla_1_1rpc_html_a64d9aac1c2a1d8e7ff5056054f80b42ba6adf97f83acf6453d4a6a4b1070f3754"><div class="ttname"><a href="../../de/d6c/namespacecarla_1_1rpc.html#a64d9aac1c2a1d8e7ff5056054f80b42ba6adf97f83acf6453d4a6a4b1070f3754">carla::rpc::MapLayer::None</a></div><div class="ttdeci">@ None</div></div>
<div class="ttc" id="anamespacecarla_html"><div class="ttname"><a href="../../d9/d36/namespacecarla.html">carla</a></div><div class="ttdoc">CARLA模拟器的主命名空间。</div><div class="ttdef"><b>Definition</b> <a href="../../d9/d4f/Carla_8cpp_source.html#l00139">Carla.cpp:139</a></div></div>
<div class="ttc" id="anamespacecarla_html_afb6ca911605d1ec35bdf563de2814dba"><div class="ttname"><a href="../../d9/d36/namespacecarla.html#afb6ca911605d1ec35bdf563de2814dba">carla::log_debug</a></div><div class="ttdeci">static void log_debug(Args &amp;&amp;... args)</div><div class="ttdef"><b>Definition</b> <a href="../../de/d87/Logging_8h_source.html#l00071">Logging.h:71</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1Junction_1_1Connection_html"><div class="ttname"><a href="../../d1/d9e/structcarla_1_1road_1_1Junction_1_1Connection.html">carla::road::Junction::Connection</a></div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00034">road/Junction.h:34</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1Junction_1_1Connection_html_a06d553f83562d5a8576fb5cb96ae4fd0"><div class="ttname"><a href="../../d1/d9e/structcarla_1_1road_1_1Junction_1_1Connection.html#a06d553f83562d5a8576fb5cb96ae4fd0">carla::road::Junction::Connection::AddLaneLink</a></div><div class="ttdeci">void AddLaneLink(LaneId from, LaneId to)</div><div class="ttdef"><b>Definition</b> <a href="../../d1/d3a/road_2Junction_8h_source.html#l00041">road/Junction.h:41</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1LaneValidity_html"><div class="ttname"><a href="../../d8/d71/structcarla_1_1road_1_1LaneValidity.html">carla::road::LaneValidity</a></div><div class="ttdef"><b>Definition</b> <a href="../../d9/d74/LaneValidity_8h_source.html#l00017">LaneValidity.h:17</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1SignalDependency_html"><div class="ttname"><a href="../../d3/dd0/structcarla_1_1road_1_1SignalDependency.html">carla::road::SignalDependency</a></div><div class="ttdef"><b>Definition</b> <a href="../../d0/def/Signal_8h_source.html#l00027">Signal.h:27</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1element_1_1DirectedPoint_html"><div class="ttname"><a href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html">carla::road::element::DirectedPoint</a></div><div class="ttdef"><b>Definition</b> <a href="../../d3/d8b/Geometry_8h_source.html#l00040">Geometry.h:40</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1element_1_1DirectedPoint_html_a058ad3be7f22229ea802e569ab0e8b7e"><div class="ttname"><a href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a058ad3be7f22229ea802e569ab0e8b7e">carla::road::element::DirectedPoint::ApplyLateralOffset</a></div><div class="ttdeci">void ApplyLateralOffset(float lateral_offset)</div><div class="ttdef"><b>Definition</b> <a href="../../d7/def/Geometry_8cpp_source.html#l00045">Geometry.cpp:45</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1element_1_1DirectedPoint_html_a4b9f9bf824ad3ffaca1a52ecb1918ad3"><div class="ttname"><a href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a4b9f9bf824ad3ffaca1a52ecb1918ad3">carla::road::element::DirectedPoint::location</a></div><div class="ttdeci">geom::Location location</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d8b/Geometry_8h_source.html#l00055">Geometry.h:55</a></div></div>
<div class="ttc" id="astructcarla_1_1road_1_1element_1_1DirectedPoint_html_a7591ba833bf3d06ba311914d6631757d"><div class="ttname"><a href="../../df/d65/structcarla_1_1road_1_1element_1_1DirectedPoint.html#a7591ba833bf3d06ba311914d6631757d">carla::road::element::DirectedPoint::tangent</a></div><div class="ttdeci">double tangent</div><div class="ttdef"><b>Definition</b> <a href="../../d3/d8b/Geometry_8h_source.html#l00057">Geometry.h:57</a></div></div>
</div><!-- fragment --></div><!-- contents -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
制作者&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="../../doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.10.0
</small></address>
</body>
</html>

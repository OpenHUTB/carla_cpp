# pugixml.cpp

## 实现方式

`pugixml`是一个C++库，用于解析和处理XML文件。它提供了轻量级的DOM和SAX解析器，以及XPath查询支持。

## 实现原理

### 1. 解析器

- **DOM解析器**：将整个XML文档加载到内存中，构建一棵文档对象模型树（DOM），方便进行随机访问。
- **SAX解析器**：逐个元素遍历XML文档，边解析边处理，节省内存。

### 2. XPath支持

- 支持XPath 1.0表达式，可以查询复杂的节点集合。

### 3. 内存管理

- 使用自研的内存分配器，优化小内存分配，减少内存碎片。

## 详细流程

### 1. 文件读取

- 从文件系统或内存中读取XML数据。

### 2. 格式检查

- 检查XML文件的格式是否正确。

### 3. 解析过程

- **DOM解析**：将XML文件解析为一棵DOM树。
- **SAX解析**：逐个元素解析XML文件。

### 4. DOM树构建

- 构建DOM树，方便后续节点查询。

### 5. 元素处理

- 对每个元素进行处理，如节点的添加、属性的设置等。

### 6. XPath查询

- 如果需要，使用XPath表达式进行节点查询。

### 7. 结果返回

- 返回查询结果或处理结果。

### 8. 解析结束

- 清理资源，结束解析过程。

## 流程图

![image](https://github.com/OpenHUTB/carla_cpp/blob/dev/img/pugixml.png)
